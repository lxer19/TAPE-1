URL: http://ftp.eecs.umich.edu/people/neuhoff/video_blocksize.ps
Refering-URL: http://ftp.eecs.umich.edu/people/neuhoff/
Root-URL: http://www.eecs.umich.edu
Title: OPTIMIZING BLOCK SIZE IN MOTION-COMPENSATED VIDEO CODING  
Author: Jordi Ribas-Corbera David L. Neuhoff 
Keyword: video coding, motion estimation, motion field resolution, block size, motion vector accuracy.  
Address: 5750 NW Pacific Rim Blvd 1301 Beal Ave Camas, WA 98607, USA Ann Arbor, MI 48109, USA  
Affiliation: Digital Video Department EECS Department Sharp Labs of America University of Michigan  
Abstract: Despite the widespread experience with block-based video coders, there is little analysis or theory that quantitatively explains the effect of block size on encoding bit rate, and ordinarily the block size for a coder is chosen based on empirical experiments on video sequences of interest. In this work, we derive a procedure to determine the optimal block size that minimizes the encoding rate for a typical block-based video coder. To do this, we analytically model the effect of block size and derive expressions for the encoding rates for both motion vectors and difference frames, as functions of block size. Minimizing these expressions leads to a simple formula that indicates how to choose the block size in these types of coders. This formula also shows that the best block size is a function of the accuracy with which the motion vectors are encoded and several parameters related to key characteristics of the video scene, such as image texture, motion activity, inter-frame noise, and coding distortion. We implement the video coder and use our analysis to optimize and explain its performance on real video frames. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> A. Netravali and B. </author> <title> Haskell, Digital pictures. Representation and compression, </title> <publisher> Plenum Press, </publisher> <year> 1988. </year>
Reference-contexts: need to estimate ~oe 2 V and ~a from the field of computed vectors but, in practice, computing a motion vector for each pixel is computationally expensive and we computed a motion vector only for each image block of size B 0 = 8 using the classical block matching method <ref> [1] </ref>. <p> The frame resolution was 512 fi 400 pixels for "caltrain" and "176 fi 144 00 (QCIF) for "coastguard", and only the gray-level components were encoded. We used the full-search block-matching method with the minimum absolute difference criteria <ref> [1] </ref> to compute the motion vectors at each B fi B image block for B's in the set B = f4; 8; 16; 32g, and the motion vectors were found with pixel and subpixel accuracy for 's in the set Y = f2; 1; 1=2; 1=4; :::; 1=32g (subpixel accuracy was
Reference: [2] <author> D. Le Gall, </author> <title> "MPEG: A video compression standard for multimedia applications," </title> <journal> Commun. ACM, </journal> <volume> Vol. 34, </volume> <pages> pp. 47-58, </pages> <month> Apr. 91. </month>
Reference-contexts: Ordinarily, the choice of B and is based on heuristics or empirical experiments on scenes of interest. For example, most block-based video coders use pixel accurate ( = 1) or half-pixel accurate ( = 1/2) motion vectors [1-4,12,13]. MPEG <ref> [2] </ref> and H.261 [3] use block size B = 16. Recently, it was found that B = 2 was best for ultrasound video [13], and that, with the appropriate motion coder, B = 8 was better than B = 16 for some typical video scenes [12]. <p> Finally, note that many other block-based video coders use difference frame encoders that are more sophisticated than our uniform scalar quantization and entropy coding. For example, MPEG <ref> [2] </ref> uses a block-by-block DCT, which gives better rate-distortion performance and also exploits the response of the human visual system. In this work, our coder does not intend to compete with these more advanced video coders but to explore the block size problem in a basic case.
Reference: [3] <author> ITU-T Recommendations H.261, </author> <title> Video codec for audiovisual services at px64 kbits. </title>
Reference-contexts: Ordinarily, the choice of B and is based on heuristics or empirical experiments on scenes of interest. For example, most block-based video coders use pixel accurate ( = 1) or half-pixel accurate ( = 1/2) motion vectors [1-4,12,13]. MPEG [2] and H.261 <ref> [3] </ref> use block size B = 16. Recently, it was found that B = 2 was best for ultrasound video [13], and that, with the appropriate motion coder, B = 8 was better than B = 16 for some typical video scenes [12].
Reference: [4] <author> ITU-T/SG15, </author> <title> Video codec test model, </title> <journal> TMN5, Te-lenor Research, </journal> <month> Jan. </month> <title> 95. 1 A Gaussian model would produce the same final result. </title>
Reference-contexts: MPEG [2] and H.261 [3] use block size B = 16. Recently, it was found that B = 2 was best for ultrasound video [13], and that, with the appropriate motion coder, B = 8 was better than B = 16 for some typical video scenes [12]. In H.263 <ref> [4] </ref>, there is the option of splitting 16fi16 blocks into four 8fi8 subblocks. <p> This is not surprising given the amount of work in this topic [5-7,9-11]. Indeed, current video coding standards such as H.263, H.263+, and MPEG-4 (c.f., <ref> [4] </ref>) allow some limited adaptation of the block size.
Reference: [5] <author> P. Strobach, </author> <title> "Tree-structured scene adaptive coder," </title> <journal> IEEE Trans. Communications, </journal> <volume> Vol. 38, </volume> <month> Apr. 90. </month>
Reference: [6] <author> G. J. Sullivan and R.L. Baker, </author> <title> "Rate-distortion optimized motion compensation for video compression using fixed or variable size blocks," </title> <booktitle> Proc. GLOBECOM, </booktitle> <address> pp.85-90, </address> <month> Nov. 91. </month>
Reference: [7] <author> F. Moscheni, F. Dufaux and H. Nicolas, </author> <title> "Entropy criterion for optimal bit allocation between motion and prediction error information," </title> <booktitle> Proc. VCIP, </booktitle> <pages> pp. 235-242, </pages> <month> Nov. 93. </month>
Reference-contexts: We assume that the difference frame pixels have a discrete Laplacian form <ref> [7] </ref>, which is obtained by quantizing a Laplacian density of variance oe 2 with a uniform scalar quantizer of step size Q, and use the approximate formula [18,19]: H (Q) &gt; &lt; 1 Q 2 ; oe 2 2e ; ln 2 Q 2 ; oe 2 2e . <p> In Figure 4 we plot the values of H (Q) as a function of oe (using the formula in <ref> [7] </ref> for the exact entropy of a discrete Laplacian) and that obtained with our approximation (1), for several values of Q.
Reference: [8] <author> B. Girod, </author> <title> "Motion-compensating prediction with fractional-pel accuracy," </title> <journal> IEEE Trans. Commun., </journal> <volume> Vol. 41, </volume> <pages> pp. 604-612, </pages> <month> Apr. 93. </month>
Reference-contexts: Further, they do not provide analysis or theory that explains or predicts how the best block size depends on motion accuracy and the key scene characteristics. The problem of finding the effect of the motion vector accuracy on the difference frame was first considered by Girod <ref> [8] </ref>. Recent work of the present authors [17-19] focused on finding the optimal accuracy fl for a fixed block size B in the context of certain simple, appropriate models. However, neither the functional dependence of fl on B, nor the optimal block size B fl , were addressed.
Reference: [9] <author> B. Girod, </author> <title> "Rate-constrained motion compensation," </title> <booktitle> Proc. VCIP, </booktitle> <pages> pp. 1026-1034, </pages> <address> Chicago, </address> <month> Sept. 94. </month>
Reference: [10] <author> G.R. Martin, R.A. Packwood, I. Rhee, </author> <title> "Variable size block matching motion estimation with minimal error," </title> <booktitle> Proc. SPIE Dig. Video Compr., </booktitle> <pages> pp. 324-333, </pages> <address> San Jose, </address> <month> Jan-Feb 96. </month>
Reference-contexts: In fact, our equations model both effects (c.f. see (15)) and show that the second interpretation is typically the correct one, except in the rare case when "oe 2 V ln (1=~a)" is very small (i.e., very large motion coherence). Not surprisingly, Martin et al. <ref> [10] </ref> designed fairly good variable block-size motion fields for video coders by heuristically joining blocks with coherent motion (similar motion vectors) into larger blocks.
Reference: [11] <author> G.M. Schuster and A.K. Katsaggelos, </author> <title> "A video compression scheme with optimal bit allocation between displacement vector field and displaced frame difference," </title> <booktitle> Proc. ICASSP, </booktitle> <address> Atlanta, </address> <month> May 96. </month>
Reference: [12] <author> M. Sipitca and V. Madisetti, </author> <title> "Lossy techniques for motion vector encoding," </title> <booktitle> Proc. VCIP, </booktitle> <pages> pp. 387-393, </pages> <address> Orlando, </address> <month> Mar. 96. </month>
Reference-contexts: MPEG [2] and H.261 [3] use block size B = 16. Recently, it was found that B = 2 was best for ultrasound video [13], and that, with the appropriate motion coder, B = 8 was better than B = 16 for some typical video scenes <ref> [12] </ref>. In H.263 [4], there is the option of splitting 16fi16 blocks into four 8fi8 subblocks. <p> For example, observe that a motion vector coder that encodes four motion vectors produced for B = 8 in a lossy fashion may be equivalent to a motion vector coder that losslessly encodes motion vectors produced for B = 16 (c.f. Sipitca and Madisetti <ref> [12] </ref>), and these two coders will clearly have different optimal block sizes. Because of this, the equations and results in this work are only valid for the typical differential encoding of motion vectors.
Reference: [13] <author> A. Docef and M. Smith, </author> <title> "Application of motion compensated prediction to coding of ultrasound video," </title> <booktitle> Proc. VCIP, </booktitle> <pages> pp. 811-817, </pages> <address> Orlando, </address> <month> Mar. 96. </month>
Reference-contexts: For example, most block-based video coders use pixel accurate ( = 1) or half-pixel accurate ( = 1/2) motion vectors [1-4,12,13]. MPEG [2] and H.261 [3] use block size B = 16. Recently, it was found that B = 2 was best for ultrasound video <ref> [13] </ref>, and that, with the appropriate motion coder, B = 8 was better than B = 16 for some typical video scenes [12]. In H.263 [4], there is the option of splitting 16fi16 blocks into four 8fi8 subblocks. <p> Also, the block size should be larger for larger coding distortions, and when there is motion coherence in the frame (i.e., small motion vector variance and large motion vector correlation). Consequently, it is not surprising that Docef and Smith <ref> [13] </ref> found B = 2 to be the best block size for ultrasound video, since the structure and texture components of those sequences have high textured frames and low motion coherence.
Reference: [14] <author> P. Guillotel and C. Chevance, </author> <title> "Comparison of motion vector coding techniques," </title> <booktitle> SPIE Image and Video Compr., </booktitle> <pages> pp. 1594-1604, </pages> <month> Feb. 94. </month>
Reference-contexts: However, an accurate estimate of a requires finding the ideal motion field, also known as optical flow, which is very complex (c.f., Barron et al. [20]). In practice, a can be fixed for a large variety of scenes, and based on the experiments in Guillotel and Chevance's work <ref> [14] </ref>, we fix a = 0:998 (Appendix C describes how this value was obtained). Observe that the correlation coefficient of the ideal motion vectors a is significantly higher than that of the pixel values, typically 0.9. <p> In computer vision, the ideal motion field is estimated by computing the optical flow for each pixel in a video sequence [20]. In <ref> [14] </ref>, the (first-order) entropy of the X components of an optical flow field of a typical video sequence was empirically found to be H 1 = 6:8 bits/pixel, and the entropy of the error field, when the previous vector (corresponding to the previous pixel position in a raster scan) is used
Reference: [15] <author> T.M. Cover and J.M Thomas, </author> <title> Elements of Information Theory. </title> <publisher> John Wiley & Sons, Inc., </publisher> <pages> 91. </pages>
Reference-contexts: The approximation in (1) for low distortion is obtained by relating the entropy H (Q) to the differential entropy of a Laplacian <ref> [15, p. 228] </ref> and for high distortion by choosing the linear function of oe 2 to meet the log function at a point of equal slope, which turns out to be at oe 2 = Q 2 =(2e). <p> The approximation in (10) is obtained, like the low distortion case in (1), by relating the entropy of the n x;i 's and n y;i 's to the differential entropy of a Laplacian <ref> [15, p. 228] </ref>. Clearly, the prediction error variance fi 2 N will in crease with B because the correlation of adjacent motion vectors decreases when the vectors are further apart.
Reference: [16] <author> A. Gersho and R.M. Gray, </author> <title> Vector quantization and signal compression. </title> <publisher> Kluwer Academic Publishers, </publisher> <pages> 92. </pages>
Reference-contexts: The design of our video coder involves choosing the parameters Q, B, , and, also, the two entropy coders. The PSNR of the video coder is principally determined by the well known Q 2 =12 approximation for mean squared error <ref> [16, p. 152] </ref>. We will assume 2 Our analysis can also apply to backward or interpolative prediction. that Q is fixed at some appropriate value and, conse-quently, we focus on optimizing the choice of B, , and the entropy coders to minimize the encoding rate in (fixed-quality) variable-rate coding. <p> Specifically, we model C i as follows: C i = C 0;i + 12 where C 0;i is the interframe noise energy in the block (e.g., due to light changes, occlusions, camera noise, etc.), Q 2 =12 is the approximate MSE coding distortion introduced in the encoded previous frame <ref> [16, p. 152] </ref>, and Z i is the error energy caused by having several pixel motions in a block (e.g., due to rotations, several moving objects in a block, etc.). <p> accuracy fl For a fixed block size B and distortion Q, we find that the motion vector accuracy fl that minimizes the total frame rate R (15) is fl = 12=e D 1 ; (16) where D = Q 2 =12 is the approximate MSE distortion of the encoded frame <ref> [16, p. 152] </ref>. Equation (16) indicates that the motion vectors must be encoded more accurately (i.e., smaller) for larger block size. Also, higher motion accuracy is necessary in frames with larger texture T , and lower accuracy is needed at higher levels of compression (higher D).
Reference: [17] <author> J. Ribas-Corbera and D.L. Neuhoff, </author> <title> "Optimal bit allocations for lossless video coders: motion vectors vs. difference frames," </title> <booktitle> Proc. ICIP, </booktitle> <volume> Vol. 3, </volume> <pages> pp. 180-183, </pages> <address> Washington, DC, </address> <month> Oct. 95. </month>
Reference: [18] <author> J. Ribas-Corbera and D.L. Neuhoff, </author> <title> "On the optimal motion vector accuracy for block-based, motion-compensated video coders," </title> <booktitle> Proc. SPIE Dig. Video Compr., </booktitle> <pages> pp. 302-314, </pages> <address> San Jose, </address> <month> Jan-Feb 96. </month>
Reference: [19] <author> J. Ribas-Corbera and D.L. Neuhoff, </author> <title> "Reducing rate/complexity in video coding by motion estimation with block adaptive accuracy," </title> <booktitle> Proc. VCIP, </booktitle> <pages> pp. 615-624, </pages> <address> Orlando, </address> <month> Mar. 96. </month>
Reference-contexts: Note that A i (whose formula was analytically derived in <ref> [19] </ref>) is a simple measure of the texture in the ith block. C i is the energy in the ith block of the difference frame if the block's motion vector was found with infinite accuracy ( = 0).

References-found: 19

