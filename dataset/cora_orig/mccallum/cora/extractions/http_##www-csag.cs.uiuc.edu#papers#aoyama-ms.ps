URL: http://www-csag.cs.uiuc.edu/papers/aoyama-ms.ps
Refering-URL: http://www-csag.cs.uiuc.edu/papers/index.html
Root-URL: http://www.cs.uiuc.edu
Title: DESIGN ISSUES IN IMPLEMENTING AN ADAPTIVE ROUTER  
Author: BY KAZUHIRO AOYAMA 
Degree: 1983 M.Engr., Keio University, 1985 THESIS Submitted in partial fulfillment of the requirements for the degree of Master of Science in Computer Science in the Graduate College of the  
Address: 1993 Urbana, Illinois  
Affiliation: B.Engr., Keio University,  University of Illinois at Urbana-Champaign,  
Abstract-found: 0
Intro-found: 1
Reference: [1] <author> A. Agarwal et. al. </author> <title> The mit alewife machine: A large-scale distributed-memory multiprocessor. </title> <type> Lcs-technical memo 454, </type> <institution> Massachusetts Institute of Technology, Laboratory for Computer Science, </institution> <year> 1991. </year>
Reference-contexts: A prototype of MRC has nine bit data width, eight for data and one for tail. Improved MRCs are used in some machines, for example, the Alewife and the Dash. Frontier series Mesh Routing Chip (FMRC) is used in the MIT Alewife machine <ref> [1] </ref>. The Alewife network is a two-dimensional mesh, using wormhole routing with dimension-order routing algorithm. The network has eight-bit channels, and operates asynchronously with switching delay of 50 ns per hop. The throughput is roughly 90MB/sec in each direction.
Reference: [2] <author> P. Berman, L. Gravano, G. Pifarre, and J. Sanz. </author> <title> Adaptive deadlock and livelock free routing with all minimal paths in torus networks. </title> <booktitle> In Proceedings of the Symposium on Parallel Algorithms and Architectures, </booktitle> <year> 1992. </year>
Reference-contexts: Virtual channels are used for deadlock avoidance, and virtual lanes are used to multiplex a single path, allowing packets to pass one another which can improve total network performance. In the last section, we review the *-Channel algorithm <ref> [2] </ref>. The motivation of the algorithm is the same as ours, to reduce hardware complexity in an adaptive router. We compare our router with the *-Channel router in Section 6.5. 5 2.1 Topology Topology is a structure of physical connections in a network. <p> The *-Channel algorithm can reduce the hardware requirements of a fully-adaptive router, but there are some drawbacks. *-Channels is fully adaptive minimal routing algorithm, that requires only two (or four) 2 virtual channels regardless of the network dimension <ref> [2] </ref>. The algorithm is provably deadlock and livelock free. The central idea is simple. "Message will move through the *- channels as when doing dimension-order routing. <p> The central idea is simple. "Message will move through the *- channels as when doing dimension-order routing. The non-*-channels will be used when taking any of the transitions that would not be allowed by the dimension-order routing algorithm, thus obtaining full adaptivity while preserving freedom from deadlock."(From <ref> [2] </ref>) When there are no available channels, a message must wait unconnected. Since the *-channels are used only for dimension-order routing, the *-channels are deadlock free. Hence, it is guaranteed that the message will be able to take the *-channels. Since 2 These number are per physical channel. <p> Since the *-channels are used only for dimension-order routing, the *-channels are deadlock free. Hence, it is guaranteed that the message will be able to take the *-channels. Since 2 These number are per physical channel. They are slightly different from the numbers presented in <ref> [2] </ref>. It is because we follow the counting method used in Linder-Harden's algorithm. 20 any blockage of a *-channel eventually dissipates, the blockage of non-*-channels also dissipates. Hence the *-Channel routing is deadlock free. <p> The reason is that the extra ports do not require virtual channels. Figure 6.20 summarizes the size and the delay of routers with from one to sixteen additional ports. 6.5 *-Channel Router The *-channel algorithm depends on flow control information to prevent deadlock <ref> [2] </ref>. This means that the *-channel router needs information from its neighboring nodes input buffers, potentially increasing router complexity.
Reference: [3] <author> S. Borkar, R. Cohn, G. Cox, T. Gross, H. T. Kung, M. Lam, M. Levine, B. Moore, W. Moore, C. Peterson, J. Susman, J. Sutton, J. Urbanski, and J. Webb. </author> <title> Supporting systolic and memory communication in iwarp. </title> <booktitle> In Proceedings of the 17th International Symposium on Computer Architecture. IEEE Computer Society, </booktitle> <year> 1990. </year>
Reference-contexts: 2-flat 4-flat 8-flat XFC 4240 (530) 25440 678400 AD 800 (100) 7200 (150) 320000 (250)) CB 920 (460) 8280 (1035) 368000 (2875) are the number of gate in each single block. 116 6.4 Multiple Router Ports Multiple interface ports for a processing element (PE) are known to improve network performance <ref> [3] </ref>. They allow multiple packets to be injected from PE to the networks simultaneously. In this section, the impact of extra interface ports on the router hardware is estimated. In Figure 6.19, extra hardware and the blocks which need modification are shown.
Reference: [4] <author> A. A. Chien and J. H. Kim. </author> <title> Planar-adaptive routing: Low-cost adaptive networks for multiprocessors. </title> <booktitle> In Proceedings of the International Symposium on Computer Architecture, </booktitle> <pages> pages 268-77, </pages> <month> May </month> <year> 1992. </year>
Reference-contexts: Previous work by Chien and Kim has produced a limited adaptivity router called Planar-Adaptive Routing (PAR). PAR has many implementation advantages, notably hardware simplicity. PAR uses only three virtual channels for deadlock prevention and small crossbar switches regardless of the number of dimensions <ref> [4] </ref> [13]. This document describes our study of implementation issues. We designed the PAR router in gate level, using 0:8m gate array libraries. This router is designed for two 2 dimensional mesh networks and has two virtual lanes. <p> The characteristics of direct networks are determined by topology, switching, flow control and routing algorithm. In direct networks, the routing algorithm is the one of most important factors. In this chapter we present a low-cost simple adaptive routing algorithm, called planar-adaptive routing <ref> [4] </ref> in this chapter. In addition, we describe two common network features, virtual channels and virtual lanes. Virtual channels are used for deadlock avoidance, and virtual lanes are used to multiplex a single path, allowing packets to pass one another which can improve total network performance. <p> This restriction dramatically reduces hardware complexity. Figure 2.9 shows basic concept of PAR. First the packet from N 0 to N 1 is routed on planeA 0 , and then progresses on planeA 1 . We use same notation as that in <ref> [4] </ref>. k = # of nodes along a dimension n = # of dimensions, 2*n = # of physical channels per node d i;j = dimension i, virtual channel j. As a k-ary n-cube, the network has k n nodes. <p> Since the address format directly affects hardware design, we must define the address formats for higher-dimensional routers. Figure 6.1 shows address formats for three- and four-dimensional mesh networks. This scheme is an adaptation of the dimension stripping scheme described in <ref> [4] </ref>. This router uses two routers for two-dimensional mesh networks and one plane interface. 94 95 A block diagram of the plane interface is shown in Figure 6.3. The address shifter shifts addresses as shown in Figure 6.4, excising the address information for the major dimension of the previous plane.
Reference: [5] <author> W. Dally. </author> <title> Network and processor architecture for message-driven computers. </title> <editor> In Robert Suaya and Graham Birtwistle, editors, </editor> <booktitle> VLSI and Parallel Computation, chapter 3, </booktitle> <pages> pages 140-222. </pages> <publisher> Morgan Kaufmann, </publisher> <year> 1990. </year>
Reference: [6] <author> W. Dally and C. Seitz. </author> <title> Deadlock-free message routing in multiprocessor interconnection networks. </title> <journal> IEEE Transactions on Computers, </journal> <volume> C-36(5), </volume> <year> 1987. </year>
Reference-contexts: The disadvantage of adaptive routing is that since minimal adaptive routing is not itself deadlock free, some extra hardware to prevent deadlock is required. To prevent deadlock, virtual channels are used <ref> [6] </ref>. This issue is discussed in next section. 2.4 Virtual Channels and Lanes 13 "A virtual channel is a channel from the point of view of resource allocation, but may share a physical communication channel with other virtual channels"[5].
Reference: [7] <author> W. J. Dally. </author> <title> Performance analysis of k-ary n-cube interconnection networks. </title> <journal> IEEE Transactions on Computers, </journal> <volume> 39(6), </volume> <month> June </month> <year> 1990. </year>
Reference-contexts: In these networks, each node can be connected by short wires, and has small degree. On the other hand, higher-dimensional mesh networks have the advantage of smaller network diameter, which can improve total network performance. Various studies have shown that low to moderate dimensional networks are most attractive <ref> [7] </ref>. In this project, we focus on a router for two-dimensional mesh networks and extrapolate to higher-dimension router. This approach is feasible, because this router can used to build routers for higher-dimensional mesh networks by cascading the router for two-dimensional mesh networks.
Reference: [8] <author> W. J. Dally. </author> <title> Virtual channel flow control. </title> <journal> IEEE Transactions on Parallel and Distributed Systems, </journal> <volume> 3(2) </volume> <pages> 194-205, </pages> <year> 1992. </year>
Reference-contexts: Since each virtual lane is interchangeable within its virtual channel class, the hardware support for virtual lanes is much more complicate than that for virtual channels. To implement virtual lanes, there are three alternatives which differ in how they share the crossbar switch <ref> [8] </ref>. Figure 4.23 shows these three implementations. For the purpose of illustration, in these figures, we suppose only two virtual lanes and two physical inputs and outputs, though the PAR requires four inputs and outputs. <p> The difference of delay per node of the DOR and the PAR in ratio are given as follows. T P AR = 19:6 11:4 = 1:16 The result shows that despite a significant difference in clock rate, latency is comparable because of the internode delay. According to Dally's <ref> [8] </ref> and Kim and Chien's [14] studies, virtual lanes can improve router performance significantly, so we considered routers with two virtual lanes. When we use two virtual lanes in the DOR, the CB must have six inputs and six outputs, and two virtual channels are required. <p> When a packet changes adaptive planes, twice the normal delay is incurred. Since the plane interface block is small compared with the router, the block does not add significantly to the critical path. 6.2 Extra Virtual Lanes Virtual lanes can significantly improve total network performance <ref> [8] </ref> [15]. In this section, the impact of extra virtual lanes on the cost and speed of PAR is estimated and characterized analytically. In Figure 6.5, a block diagram of a router with one virtual lane is shown. The shaded blocks must be modified to support additional virtual lanes.
Reference: [9] <author> W. J. Dally, A. Chien, S. Fiske, W. Horwat, J. Keen, M. Larivee, R. Lethin, P. Nuth, S. Wills, P. Carrick, and G. Fyler. </author> <title> The J-Machine: A fine-grain concurrent computer. </title> <booktitle> In Information Processing 89, Proceedings of the IFIP Congress, </booktitle> <pages> pages 1147-1153, </pages> <month> August </month> <year> 1989. </year>
Reference-contexts: The estimated total delay to move a flit through a node is 100-110 ns. The NDF is implemented by 3m CMOS. 3.4 The J-machine Router The J-Machine is a fine-grain concurrent computer developed at MIT <ref> [9] </ref> [17]. The J-machine network is a three-dimensional mesh, with bidirectional 9-bit channels, dimension-order routing, and blocking flow control. The blocking flow control is pipelined flow control. This flow control can improve data transmission rate, because the round-trip of the request-acknowledge signals is eliminated.
Reference: [10] <author> W. J. Dally and C. Seitz. </author> <title> The torus routing chip. </title> <booktitle> Distributed Computing, </booktitle> <pages> pages 187-96, </pages> <year> 1986. </year>
Reference-contexts: All of the routers reviewed here are deterministic routers, though our router is a adaptive router. We do not know any published studies of adaptive routers implemented or designed to the gate level. 3.1 The Torus Routing Chip The Torus routing chip (TRC) was designed for k-ary n-cube networks <ref> [10] </ref>. This router is the first router which uses virtual channels for deadlock prevention. The TRC uses wormhole routing. A handshake protocol is used for flow control.
Reference: [11] <author> Charles M. Flaig. </author> <title> Vlsi mesh routing systems. </title> <type> Master's thesis, </type> <institution> California Institute of Technology, Department of Computer Science, </institution> <month> May </month> <year> 1987. </year>
Reference-contexts: The TRC uses a 5x5 crossbar switch for two-dimensional torus networks with two virtual channels, although there are eight (4*2) virtual channels. 22 3.2 The Mesh Routing Chip The Mesh Routing Chip (MRC) was developed at the California Institute of Technology <ref> [11] </ref>. The MRC supports bidirectional mesh networks with dimension-order-routing algorithm. In bidirectional mesh networks, a node can transmit packets to all adjacent nodes directly. Bidirectional networks can improve the efficiency of packet transmission. The MRC is designed as self-timed circuit. <p> Figure 5.14 shows a block diagram of a DOR. There are several alternative architectures for a DOR, but we use the architecture employed by Mesh Routing Chip <ref> [11] </ref>. We can use XF C and IF C without modification. AD, RD and CB need modification. We do not need V C, because DOR is deadlock free without virtual channels. We use 3x3 crossbar switches although the NDF, crossbar switches are split into several two-to-one selectors [11] [18]. <p> Mesh Routing Chip <ref> [11] </ref>. We can use XF C and IF C without modification. AD, RD and CB need modification. We do not need V C, because DOR is deadlock free without virtual channels. We use 3x3 crossbar switches although the NDF, crossbar switches are split into several two-to-one selectors [11] [18].
Reference: [12] <author> P. Kermani and L. Kleinrock. </author> <title> Virtual cut-through: A new computer communications switching technique. </title> <journal> Computer Networks, </journal> <volume> 3(4) </volume> <pages> 267-86, </pages> <year> 1979. </year> <month> 130 </month>
Reference-contexts: Since an acknowledge signal from destination is not necessary, transmission initiation overhead is smaller than that in circuit switching. Other advantage of wormhole routing is that theoretically only one flit 1 buffer is required, requiring much less hardware than store-and-forward routing. Virtual cut-through <ref> [12] </ref> is a hybrid mixture of wormhole and store-and-forward routing. If all of the intermediate channels are free, virtual cut-through is exactly the same as wormhole. When a packet encounters busy channels, the packet is stored in the node.
Reference: [13] <author> J. H. Kim. </author> <title> Planar-adaptive routing: Low-cost adaptive networks for multiproces-sors. </title> <type> Master's thesis, </type> <institution> University of Illinois, Department of Electrical and Computer Engineering, </institution> <month> January </month> <year> 1993. </year>
Reference-contexts: Previous work by Chien and Kim has produced a limited adaptivity router called Planar-Adaptive Routing (PAR). PAR has many implementation advantages, notably hardware simplicity. PAR uses only three virtual channels for deadlock prevention and small crossbar switches regardless of the number of dimensions [4] <ref> [13] </ref>. This document describes our study of implementation issues. We designed the PAR router in gate level, using 0:8m gate array libraries. This router is designed for two 2 dimensional mesh networks and has two virtual lanes. <p> It specifies two for each node, one in the positive direction, and one in the negative direction in the i dimension. We denote the positive direction channels as d i;j + and the negative direction channels as d i;j . (A more detailed description in <ref> [13] </ref>) The n 1 adaptive planes, from A 0 to A n2 , is defined as follows. A i = d i;2 + d i+1;0 + d i+1;1 Planar-adaptive routing algorithm is given as follows. Planar-Adaptive Routing Algorithm:(Excerpt from [13]) High-level (between adaptive planes) 1. <p> direction channels as d i;j . (A more detailed description in <ref> [13] </ref>) The n 1 adaptive planes, from A 0 to A n2 , is defined as follows. A i = d i;2 + d i+1;0 + d i+1;1 Planar-adaptive routing algorithm is given as follows. Planar-Adaptive Routing Algorithm:(Excerpt from [13]) High-level (between adaptive planes) 1. For i = 0, i &lt; (n 1) do Route adaptively in A i , see low-level routing. end 2. After exiting the loop, it can only be necessary to correct the address in d n1 . <p> The arbiter arbitrates requests, choosing a direction when two directions are available for a packet (direction selection), and choosing a packet when two or more packets request the same direction (packet selection). There are several possible selection policies: turn-first, major-first and random-selection <ref> [13] </ref>. According to Kim's study, in PAR, straight-first gives the best result [13]. Figure 4.21 (a) and (b) show straight-first arbitration in the direction selection and the packet selection. In (a), there are two possible directions, N and E, at Node X for the packet A. <p> There are several possible selection policies: turn-first, major-first and random-selection <ref> [13] </ref>. According to Kim's study, in PAR, straight-first gives the best result [13]. Figure 4.21 (a) and (b) show straight-first arbitration in the direction selection and the packet selection. In (a), there are two possible directions, N and E, at Node X for the packet A. There are no conflicts, the straight-first policy chooses the direction E.
Reference: [14] <author> J. H. Kim and A. A. Chien. </author> <title> An evaluation of planar-adaptive routing (par). </title> <booktitle> In Proceedings of the Fourth Symposium on Parallel and Distributed Processing, </booktitle> <month> December </month> <year> 1992. </year>
Reference-contexts: T P AR = 19:6 11:4 = 1:16 The result shows that despite a significant difference in clock rate, latency is comparable because of the internode delay. According to Dally's [8] and Kim and Chien's <ref> [14] </ref> studies, virtual lanes can improve router performance significantly, so we considered routers with two virtual lanes. When we use two virtual lanes in the DOR, the CB must have six inputs and six outputs, and two virtual channels are required. The delay can be approximated as follows.
Reference: [15] <author> J. H. Kim and A. A. Chien. </author> <title> Evaluation of wormhole routed networks under hybrid traffic loads. </title> <booktitle> In Proceedings of the Hawaii International Conference on System Sciences, </booktitle> <month> January </month> <year> 1993. </year>
Reference-contexts: When a packet changes adaptive planes, twice the normal delay is incurred. Since the plane interface block is small compared with the router, the block does not add significantly to the critical path. 6.2 Extra Virtual Lanes Virtual lanes can significantly improve total network performance [8] <ref> [15] </ref>. In this section, the impact of extra virtual lanes on the cost and speed of PAR is estimated and characterized analytically. In Figure 6.5, a block diagram of a router with one virtual lane is shown. The shaded blocks must be modified to support additional virtual lanes. <p> The delay of PAR with two virtual lanes is roughly only fifteen percent larger than that of DOR with two virtual lanes. Of course, functionally, PAR is much superior to DOR <ref> [15] </ref>. (2) PAR is much simpler than fully-adaptive routers. PAR is much simpler and faster than fully-adaptive routers. Although the router with Linder-Harden's algorithm is simple adaptive router because of splitting its crossbar switch into several small blocks, especially in higher-dimensional networks, it is much more complicates and slower than PAR.
Reference: [16] <author> C. Mead and L. Conway. </author> <title> Introduction to VLSI Systems, </title> <booktitle> chapter Highly Concurrent Systems, </booktitle> <pages> pages 263-92. </pages> <publisher> Addison-Wesley, </publisher> <year> 1980. </year>
Reference-contexts: The functional chart and block diagram of the sync-el are shown in Figure 4.7. In the sync-el, input signal A is sampled by clock high using a Muller C element <ref> [16] </ref>. Transition of A from low to high is sampled when the clock is high, and its transition from high to low is sampled when the inverted clock is high. A high level block diagram of the XFC is shown in Figure 4.8.
Reference: [17] <author> P. Nuth and W. Dally. </author> <title> The j-machine network. </title> <booktitle> In Proceedings of the 1992 IEEE International Conference on Computer Design: VLSI in Computers and Processors, </booktitle> <pages> pages 420-23, </pages> <year> 1992. </year>
Reference-contexts: The estimated total delay to move a flit through a node is 100-110 ns. The NDF is implemented by 3m CMOS. 3.4 The J-machine Router The J-Machine is a fine-grain concurrent computer developed at MIT [9] <ref> [17] </ref>. The J-machine network is a three-dimensional mesh, with bidirectional 9-bit channels, dimension-order routing, and blocking flow control. The blocking flow control is pipelined flow control. This flow control can improve data transmission rate, because the round-trip of the request-acknowledge signals is eliminated.

References-found: 17

