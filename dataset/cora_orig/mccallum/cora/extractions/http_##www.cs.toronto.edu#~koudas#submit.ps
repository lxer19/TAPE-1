URL: http://www.cs.toronto.edu/~koudas/submit.ps
Refering-URL: http://www.cs.toronto.edu/~koudas/publications.htm
Root-URL: http://www.cs.toronto.edu
Email: jag@research.att.com  koudas@cs.toronto.edu  kcs@cs.toronto.edu  
Title: Choosing Bucket Boundaries for Histograms  
Author: H. V. Jagadish Nick Koudas Kenneth C. Sevcik 
Date: 218  
Note: Paper Number  
Address: Florham Park, NJ 07932  Toronto  Toronto  
Affiliation: AT&T Laboratories  Computer Systems Research Group University of  Computer Systems Research Group University of  
Abstract: Histograms have long been used to capture attribute value distribution statistics for query optimizers. More recently, there has been a growing interest in the use of histograms to produce quick approximate answers to decision support queries. This motivates finding good strategies for specifying histogram buckets. Under the assumption that finding optimal bucket boundaries is computationally inefficient, previous research has focused on finding heuristics that produce good solutions. In this paper, we present an algorithm to determine bucket boundaries optimally, in time proportional to the square of the number of distinct data values, for a broad class of optimality metrics. Through experimentation, we show that optimal histograms can have substantially lower reconstruction error than histograms produced according to popular heuristics. We also present a new heuristic, based on our understanding of the optimal solution, which in many cases obtains lower reconstruction error than previously proposed heuristics, with a computation cost that is still quite low. 
Abstract-found: 1
Intro-found: 1
Reference: [Bel54] <author> R. E. Bellman. </author> <title> The Theory of Dynamic Programming. </title> <journal> Bull. Amer Math Soc. </journal> <volume> Vol 60, </volume> <pages> pages 503-516, </pages> <year> 1954. </year>
Reference-contexts: We also observe restb (j; 1) = F (j; N ). Using Bellman's equation <ref> [Bel54] </ref>, we can write a recursive expression for restb (j; b). restb (j; b) = min jkN [F (j; k) + restb (k + 1; b 1)] (3) That is, the cost of an optimal completion strategy using b buckets to cover cells j to N is the sum of the
Reference: [CdB72] <author> S. D. Conte and Carl de Boor. </author> <title> Elementary Numerical Analysis: An algorithmic approach. </title> <publisher> McGraw Hill Publishing Company, </publisher> <year> 1972. </year>
Reference-contexts: In numerical analysis, the problem has been formulated in terms of approximating a given function piece-wise with a class of simple functions, usually polynomials of some degree <ref> [CdB72] </ref>. Much of the work in this area has concentrated on identifying the class of polynomials to use, and computing their parameters in order to minimize the error of the approximation. Little attention has been given to the number of parameters or amount of space required.
Reference: [CR94] <author> C. M. Chen and N. Roussopoulos. </author> <title> Adaptive Selectivity Estimation Using Query Feedback. </title> <booktitle> Proceedings of ACM SIGMOD 1994, </booktitle> <address> Minneapolis, </address> <publisher> Minnesota, </publisher> <pages> pages 161-172, </pages> <month> May </month> <year> 1994. </year>
Reference-contexts: In the database community, the problem has received attention in the field of query optimization and more specifically in selectivity estimation for relational operators. Several techniques have been proposed. New uses of parametric techniques [MCS88] have been recently proposed by Chen and Roussopoulos <ref> [CR94] </ref> and by Sun et al. [SLRD93]. Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms [Koo80] and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally.
Reference: [dB97] <author> Carl de Boor. </author> <type> personal communication. </type> <year> 1997. </year>
Reference-contexts: Little attention has been given to the number of parameters or amount of space required. In fact, finding an optimum set of "breakpoints" for a piece-wise polynomial approximation is believed to be very hard due to the non-linearity of the problem space <ref> [dB97] </ref>. In statistics, the problem has been posed in connection with non-parametric density estimation as constructing a histogram of a given data distribution. But again the effort focused on minimizing the error without taking space constraints into account [GES85].
Reference: [FD81] <author> David Freedman and Persi Diaconis. </author> <title> On the Historgram as a density Estimator: L 2 Theory. </title> <journal> Zeitschrift fur Wahrscheinlichkeitstheorie, </journal> <volume> 57 </volume> <pages> 453-476, </pages> <year> 1981. </year>
Reference-contexts: In fact, statisticians worry about over-fitting a distribution for a given sample set, so too fine a histogram bucket width is considered undesirable. An "optimum" histogram bucket width, in the statistical sense, is one that neither under-fits nor over-fits the data available <ref> [FD81] </ref>. In the database community, the problem has received attention in the field of query optimization and more specifically in selectivity estimation for relational operators. Several techniques have been proposed.
Reference: [GES85] <author> T. Gasser, J. Engel, and B. Seifert. </author> <title> Non parametric density estimation. </title> <journal> Ann. Stat., </journal> <month> September </month> <year> 1985. </year> <month> 21 </month>
Reference-contexts: In statistics, the problem has been posed in connection with non-parametric density estimation as constructing a histogram of a given data distribution. But again the effort focused on minimizing the error without taking space constraints into account <ref> [GES85] </ref>. In fact, statisticians worry about over-fitting a distribution for a given sample set, so too fine a histogram bucket width is considered undesirable. An "optimum" histogram bucket width, in the statistical sense, is one that neither under-fits nor over-fits the data available [FD81].
Reference: [HS92] <author> P. Haas and A. Swami. </author> <title> Sequantial Sampling Procedures for Query Size Estimation. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> San Diego, CA, </address> <pages> pages 341-350, </pages> <month> June </month> <year> 1992. </year>
Reference: [IC93] <author> Y. Ioannidis and S. Christodoulakis. </author> <title> Optimal Histograms for Limiting Worst-Case Error Propagation in the Size of Join Results. </title> <journal> ACM Transactions on Database Systems, </journal> <volume> Vol. 18, No. 4, </volume> <pages> pages 709-748, </pages> <month> December </month> <year> 1993. </year>
Reference: [Ioa93] <author> Y. Ioannidis. </author> <title> Universality of Serial Histograms. </title> <booktitle> Proceedings of VLDB, Dublin Ireland, </booktitle> <pages> pages 256-277, </pages> <month> August </month> <year> 1993. </year>
Reference: [IP95] <author> Y. Ioannidis and Viswanath Poosala. </author> <title> Balancing Histogram Optimality and Practicality for Query Result Size Estimation. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> San Hose, CA, </address> <pages> pages 233-244, </pages> <month> June </month> <year> 1995. </year>
Reference-contexts: include Equal Depth (Height) and Equal Width histograms [PSC84] [MD98], as well as serial histograms [IC93][Ioa93]<ref> [IP95] </ref>[PIHS96]. Serial histograms have been shown to be superior for joins and selections when a list of attribute values in each bucket is maintained. The notion of variance optimality is introduced by Ioannidis and Poosala [IP95], and an exponential time (O (N B ), where B is the number of buckets and N the number of distinct data values) algorithm is presented to achieve this optimality with a serial histogram. <p> Place the bucket boundaries at exactly these indices. For N distinct data values and B buckets, the complexity of this algorithm is O (N log B) and it makes use of a heap of B elements. * End Biased Vopt (EBV) Heuristic <ref> [IP95] </ref>: The end-biased Vopt (EBV) heuristic was proposed by Ioannidis and Poosala [IP95]. It results in an end-biased histogram suitable for predicting the result size of join queries. <p> For N distinct data values and B buckets, the complexity of this algorithm is O (N log B) and it makes use of a heap of B elements. * End Biased Vopt (EBV) Heuristic <ref> [IP95] </ref>: The end-biased Vopt (EBV) heuristic was proposed by Ioannidis and Poosala [IP95]. It results in an end-biased histogram suitable for predicting the result size of join queries. <p> We assume that the elements of this vector have been sorted according to some sort parameter (following <ref> [IP95] </ref>), typically the numeric values, A j . Consider the example data set shown in figure 1 (a). There are 42 data points (that is K = 42). <p> We also examine the tradeoffs involved in the choice of the f parameter in GBS. Previous proposals used for comparison include the Maximum Difference heuristic (MaxDiff ) [PIHS96], the End-Biased VOpt heuristic (EBV) <ref> [IP95] </ref>, the equi-width heuristic (EQW), and the equi-depth heuristic (EQD). We found EBV to be extremely inaccurate, since it only records the B highest frequencies, and makes the uniformity assumption for the rest. <p> For instance, join query result sizes depend upon the product of the counts for the corresponding attribute values. It has been shown in <ref> [IP95] </ref> that the error in the estimate of the query result size is minimized when the variance of the counts of cell occupancies in each bucket is minimized. This observation leads to the following metric. Let p i denote the number of non zero cell occupancies in bucket i. <p> The Join Query Metric (JQM) is defined as follows: F JQM (b i ; e i ) = P i 1 l=b i In the following section we present experimental results, using this metric to construct histograms for estimating the result size of (self-)join queries. Following <ref> [IP95] </ref> we use the standard deviation of error, to compare the histograms. <p> Thus, in particular, the OH algorithm can be used to find the optimal histogram (for variance optimality) sought by Ioannidis and Poosala <ref> [IP95] </ref> in O (N 2 ) time. We also presented an inexpensive heuristic, GBS, that can approach the accuracy of the OH algorithm and yet has lower construction costs. We presented experimental results based on real data sets, showing that our algorithms outperform previous approaches in many situations of interest.
Reference: [Koo80] <author> R. P. Kooi. </author> <title> The Optimization of Queries in Relational Databases. </title> <type> PhD Thesis, </type> <institution> Case Western Reserve University, </institution> <month> September </month> <year> 1980. </year>
Reference-contexts: Several techniques have been proposed. New uses of parametric techniques [MCS88] have been recently proposed by Chen and Roussopoulos [CR94] and by Sun et al. [SLRD93]. Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms <ref> [Koo80] </ref> and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally. These include Equal Depth (Height) and Equal Width histograms [PSC84] [MD98], as well as serial histograms [IC93][Ioa93][IP95][PIHS96].
Reference: [LNS90] <author> R. J. Lipton, J. F. Naughton, and D. A. Schneider. </author> <title> Practical Selectivity Estimation Through Adaptive Sampling. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> Atlantic City, NJ, </address> <pages> pages 1-11, </pages> <month> May </month> <year> 1990. </year>
Reference: [MCS88] <author> M. V. Mannino, Paicheng Chu, and Thomas Sager. </author> <title> Statistical Profile Estimation in Database Sysems. </title> <journal> ACM Computing Surveys, </journal> <volume> Vol. 20, No. 3, </volume> <pages> pages 191-221, </pages> <month> September </month> <year> 1988. </year>
Reference-contexts: In the database community, the problem has received attention in the field of query optimization and more specifically in selectivity estimation for relational operators. Several techniques have been proposed. New uses of parametric techniques <ref> [MCS88] </ref> have been recently proposed by Chen and Roussopoulos [CR94] and by Sun et al. [SLRD93]. Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms [Koo80] and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally.
Reference: [MD98] <author> M. Muralikrishna and D. J. DeWitt. </author> <title> Equi-depth histograms for estimating selectivity factors for multidimensional queries. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> Chicago, IL, </address> <pages> pages 28-36, </pages> <month> June </month> <year> 1998. </year>
Reference-contexts: Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms [Koo80] and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally. These include Equal Depth (Height) and Equal Width histograms [PSC84] <ref> [MD98] </ref>, as well as serial histograms [IC93][Ioa93][IP95][PIHS96]. Serial histograms have been shown to be superior for joins and selections when a list of attribute values in each bucket is maintained.
Reference: [PIHS96] <author> V. Poosala, Y. Ioannidis, P. Haas, and E. Shekita. </author> <title> Improved Histograms for Selectivity Estimation of Range Predicates. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> Montreal Canada, </address> <pages> pages 294-305, </pages> <month> June </month> <year> 1996. </year>
Reference-contexts: by having each segment include N=B data values (subject to integer constraints). * Equi-depth heuristic (EQD): Equi-depth histograms are specified by placing the end of the jth bucket at the point where the cumulative distribution function reaches j=B (again subject 3 to integer constraints). * Maximum Difference (MaxDiff ) Heuristic <ref> [PIHS96] </ref>: The MaxDiff heuristic works as follows. To create B buckets, perform a single pass over the distinct data values, keeping track, using a heap of the B 1 maximum differences between successive distinct data values, as well as the index at which each difference occurs. <p> The parameter f takes a value between 0 and 1, and is used to make a tradeoff between speed and accuracy. For f = 1, GBS becomes the MaxDiff heuristic <ref> [PIHS96] </ref> with low time and space complexity, but significant error. For f = 0, GBS has a longer running time, but lower error. <p> We also examine the tradeoffs involved in the choice of the f parameter in GBS. Previous proposals used for comparison include the Maximum Difference heuristic (MaxDiff ) <ref> [PIHS96] </ref>, the End-Biased VOpt heuristic (EBV) [IP95], the equi-width heuristic (EQW), and the equi-depth heuristic (EQD). We found EBV to be extremely inaccurate, since it only records the B highest frequencies, and makes the uniformity assumption for the rest. <p> In the following section we use the RQM to construct histograms for predicting the result of range queries. Following <ref> [PIHS96] </ref> we measure the accuracy of range query prediction for a set Q 19 40 80 120 160 Average Error Number of Buckets Census Data: D2 B=10 "OH" "GBS_f=0.4" "EQW" "EQD" "MaxDiff" 20 60 100 140 Average Error Number of Cell Occupancies Census Data: D2 B=10 "OH" "GBS_f=0.4" "MaxDiff" "EQW" "EQD"
Reference: [PSC84] <author> G. Piatetsky-Shapiro and C. Connell. </author> <title> Accurate Estimation of the Number of Tuples Satisfying a Condition. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> Boston MA, </address> <pages> pages 256-276, </pages> <month> June </month> <year> 1984. </year>
Reference-contexts: Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms [Koo80] and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally. These include Equal Depth (Height) and Equal Width histograms <ref> [PSC84] </ref> [MD98], as well as serial histograms [IC93][Ioa93][IP95][PIHS96]. Serial histograms have been shown to be superior for joins and selections when a list of attribute values in each bucket is maintained.
Reference: [SLRD93] <author> Wei Sun, Yibei Ling, Naphtali Rishe, and Yi Deng. </author> <title> An Instant and Accurate Size Estimation Method for Joins and Selections in a Retrieval Intensive Environment. </title> <booktitle> Proceedings of ACM SIGMOD, </booktitle> <address> Washington, DC, </address> <pages> pages 79-88, </pages> <month> June </month> <year> 1993. </year>
Reference-contexts: In the database community, the problem has received attention in the field of query optimization and more specifically in selectivity estimation for relational operators. Several techniques have been proposed. New uses of parametric techniques [MCS88] have been recently proposed by Chen and Roussopoulos [CR94] and by Sun et al. <ref> [SLRD93] </ref>. Other recent approaches are based on non-parametric techniques for selectivity estimation. The techniques proposed include histograms [Koo80] and sampling [LNS90][HS92]. Several types of histograms have been proposed and evaluated experimentally. These include Equal Depth (Height) and Equal Width histograms [PSC84] [MD98], as well as serial histograms [IC93][Ioa93][IP95][PIHS96].
Reference: [Weg83] <author> E. J. Wegman. </author> <title> Density estimation. </title> <editor> In S. Kotz and N. Johnson, editors, </editor> <booktitle> Encyclopedia of Statistical Sciences, </booktitle> <volume> volume 2. </volume> <publisher> Wiley, </publisher> <year> 1983. </year> <month> 22 </month>
References-found: 18

