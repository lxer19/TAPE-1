URL: http://www.cs.cmu.edu/afs/cs/user/fp/public/papers/mfps95.ps.gz
Refering-URL: http://www.cs.cmu.edu/afs/cs/user/fp/public/papers/
Root-URL: 
Email: fp@cs.cmu.edu  hcwong@cs.cmu.edu  
Title: On a Modal -Calculus for S4  
Author: F. Pfenning H. C. Wong 
Address: Pittsburgh, PA 15213 U.S.A.  Pittsburgh, PA 15213 U.S.A.  
Affiliation: Department of Computer Science Carnegie Mellon University  Department of Computer Science Carnegie Mellon University  
Date: 1 (1995)  
Note: Electronic Notes in Computer Science  
Abstract: We present !2 , a concise formulation of a proof term calculus for the intuitionistic modal logic S4 that is well-suited for practical applications. We show that, with respect to provability, it is equivalent to other formulations in the literature, sketch a simple type checking algorithm, and prove subject reduction and the existence of canonical forms for well-typed terms. Applications include a new formulation of natural deduction for intuitionistic linear logic, modal logical frameworks, and a logical analysis of staged computation and binding-time analysis for functional languages [6]. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> Samson Abramsky. </author> <title> Computational interpretations of linear logic. </title> <journal> Theoretical Computer Science, </journal> <volume> 111 </volume> <pages> 3-57, </pages> <year> 1993. </year>
Reference: [2] <author> Mario R. F. Benevides and Thomas S. E. Maibaum. </author> <title> A constructive presentation for the modal connective of necessity. </title> <journal> Journal of Logic and Computation, </journal> <volume> 2(1) </volume> <pages> 31-50, </pages> <year> 1992. </year>
Reference-contexts: A system with explicit quantifiers for worlds has been given by Gabbay and de Queiroz [8]. It also implements a Kripke semantics as a natural deduction system, using explicit quantification over world parameters. This makes it less useful for programming applicatons. Benevides and Maibaum <ref> [2] </ref> present a formulation where the derivability judgment is explicitly indexed by a world. The same information is contained in the context stack in our presentation. However, their rules for S4 are different in that they do not have an equivalent to the pop rule in its full generality.
Reference: [3] <author> Nick Benton, Gavin Bierman, Valeria de Paiva, and Martin Hyland. </author> <title> A term calculus for intuitionistic linear logic. </title> <editor> In M. Bezem and J.F. Groote, editors, </editor> <booktitle> Proceedings of the International Conference on Typed Lambda Calculi and Applications, TLCA'93, </booktitle> <pages> pages 75-90, </pages> <address> Utrecht, The Netherlands, March 1993. </address> <publisher> Springer-Verlag LNCS 664. </publisher>
Reference: [4] <author> Gavin Bierman. </author> <title> On Intuitionistic Linear Logic. </title> <type> PhD thesis, </type> <institution> University of Cambridge Computer Laboratory, </institution> <month> December </month> <year> 1993. </year> <note> Revised version available as technical report No. 346, </note> <month> August </month> <year> 1994. </year>
Reference-contexts: is easy to check that x:B; y:B ! 2A ` e box z:2A z : 22A: e has a number of well-known pleasant properties, such as uniqueness of the typing derivation given a well-typed term and a context, and the subject reduction property assuming a standard notion of reduction following <ref> [4] </ref>. On the other hand, the calculus lacks a clear notion of normal form, since substitutions may interfere with redices. We elaborate on this at the beginning of the next section. <p> A similar system has been developed for linear logic which requires a modality that satisfies the laws of S4 <ref> [4] </ref>. Our presentation of the implicit system is new as far as we are aware, but some related systems have been given in the literature. A system with explicit quantifiers for worlds has been given by Gabbay and de Queiroz [8].
Reference: [5] <author> Gavin Bierman and Valeria de Paiva. </author> <title> Intuitionistic necessity revisited. </title> <booktitle> In Proceedings of the Logic at Work Conference, </booktitle> <address> Amsterdam, Holland, </address> <month> December </month> <year> 1992. </year>
Reference-contexts: Pfenning and H. C. Wong 2 Modal -Calculus: An Explicit Formulation In this section we present a formulation of a modal -calculus for intuitionistic S4, as it is given, for example, in <ref> [5] </ref>. We denote this system by !2 e . We refer to it as explicit since it requires substitutions to occur explicitly within terms in order to deal with the non-local validity conditions imposed by the modal operator. <p> The box construct requires a substitution and a context 2 whose role should become clear when we present the typing rules. 2.2 Typing Rules The problem of typing in the explicit system is well understood; we present here the system in <ref> [5] </ref>, using a slightly different notation. It is given by the following set of inference rules 3 F. Pfenning and H. C. <p> It is this restriction which enforces the correct use of the 2 operator in accordance with the laws of S4. The interested reader is referred to <ref> [5] </ref> for a further discussion and relationship to sequent and other formulations. Before we proceed to the next section, however, we would like to point out that an apparently simpler version of 2-introduction, 2 ` M : A is inadequate since subject reduction fails (a fact noted by Troelstra [22]). <p> We conjecture that fi and conversion between well-typed terms are admissible rules of inference for such an equality. 6 Related Work As we have pointed out, the explicit system for intuitionistic modal logic has been taken straight from Bierman and de Paiva <ref> [5] </ref>. A similar system has been developed for linear logic which requires a modality that satisfies the laws of S4 [4]. Our presentation of the implicit system is new as far as we are aware, but some related systems have been given in the literature.
Reference: [6] <author> Rowan Davies and Frank Pfenning. </author> <title> A modal analysis of staged computation. </title> <note> Submitted, February 1995. 22 F. </note> <editor> Pfenning and H. C. </editor> <publisher> Wong </publisher>
Reference-contexts: A related system without weakening and contraction has been analysed by Martini & Masini [14]. Our system can also serve as the basis for a modal logical framework used for explanation-based generalization [7] and for binding-time analysis of functional languages <ref> [6] </ref>. Another application to the combination of higher-order abstract syntax and induction in logical frameworks is the subject of current research and sketched in slightly more detail in the conclusion. The remainder of this paper is structured as follows. <p> Both are corollaries to our canonical form theorem 5.10 20 F. Pfenning and H. C. Wong and type preservation 5.16. Modal logical frameworks are of interest to explanation-based generalization [7] and may also be used for more concise representations of modal logics themselves. Binding time analysis. <ref> [6] </ref> The most promising application so far is a generalization of Nielson & Nielson's 2-level functional language [18] to admit multiple computation stages, code reuse across various phases of computation, and run-time code generation. This work provides a logical explanation and generalization of binding-time analysis within a modal framework.
Reference: [7] <author> Scott Dietzen and Frank Pfenning. </author> <title> Higher-order and modal logic as a framework for explanation-based generalization. </title> <journal> Machine Learning, </journal> <volume> 9 </volume> <pages> 23-55, </pages> <year> 1992. </year>
Reference-contexts: A related system without weakening and contraction has been analysed by Martini & Masini [14]. Our system can also serve as the basis for a modal logical framework used for explanation-based generalization <ref> [7] </ref> and for binding-time analysis of functional languages [6]. Another application to the combination of higher-order abstract syntax and induction in logical frameworks is the subject of current research and sketched in slightly more detail in the conclusion. The remainder of this paper is structured as follows. <p> For such an extension to be usable we have to verify conservative extension and the uniform proof property. Both are corollaries to our canonical form theorem 5.10 20 F. Pfenning and H. C. Wong and type preservation 5.16. Modal logical frameworks are of interest to explanation-based generalization <ref> [7] </ref> and may also be used for more concise representations of modal logics themselves.
Reference: [8] <author> Dov M. Gabbay and Ruy J. G. B. de Queiroz. </author> <title> Extending the Curry-Howard interpretation to linear, relevant and other resource logics. </title> <journal> Journal of Symbolic Logic, </journal> <volume> 57(4) </volume> <pages> 1319-1365, </pages> <month> December </month> <year> 1992. </year>
Reference-contexts: Our presentation of the implicit system is new as far as we are aware, but some related systems have been given in the literature. A system with explicit quantifiers for worlds has been given by Gabbay and de Queiroz <ref> [8] </ref>. It also implements a Kripke semantics as a natural deduction system, using explicit quantification over world parameters. This makes it less useful for programming applicatons. Benevides and Maibaum [2] present a formulation where the derivability judgment is explicitly indexed by a world.
Reference: [9] <author> Jean H. Gallier. </author> <title> On Girard's "Candidats de Reductibilite". </title> <editor> In P. Odifreddi, editor, </editor> <booktitle> Logic and Computer Science. </booktitle> <publisher> Academic Press, </publisher> <year> 1990. </year>
Reference-contexts: Since every well-typed term is also approximately typed, the results will be adequate if we also know conversion to canonical form preserves well-typing in the strict sense. Our proof is based on a Tait-style argument modified to use a 12 F. Pfenning and H. C. Wong Kripke-like interpretation (see <ref> [9] </ref> for a survey). Ironically, this construction of a Kripke model has nothing to do with Kripke models for S4, but only with Kripke models for intuitionistic logic. In this setting, a world is given by a context , and a future world corresponds to an extended context ; .
Reference: [10] <author> Jean-Yves Girard, Yves Lafont, and Paul Taylor. </author> <title> Proofs and Types, </title> <booktitle> volume 7 of Cambridge Tracts in Theoretical Computer Science. </booktitle> <publisher> Cambridge University Press, </publisher> <address> Cambridge, </address> <year> 1989. </year>
Reference-contexts: This is a special case of a very general construction of a logical relation where we include elements of a desired property (here: convertibility to canonical form) at the level of base types and extend it inductively to the whole type hierarchy. Girard <ref> [10] </ref> calls the terms in [[A]] reducible terms. This is somewhat confusing since it has nothing to do with any underlying notion of reduction, but we will adopt this terminology. Then every reducible term is convertible to canonical form which follows by induction over the structure of types.
Reference: [11] <author> Robert Harper, Furio Honsell, and Gordon Plotkin. </author> <title> A framework for defining logics. </title> <journal> Journal of the Association for Computing Machinery, </journal> <volume> 40(1) </volume> <pages> 143-184, </pages> <month> January </month> <year> 1993. </year>
Reference-contexts: : A. 5 Canonical Forms and Type Preservation The application of -calculi in logical frameworks requires a notion of canonical form or long fi-normal form, since, typically, the canonical forms of a given type are in 1-1 correspondence with the objects to be represented in a framework (see, for example, <ref> [11] </ref>). In this section, we introduce the notion of approximate typing and prove that every approximately typed term in !2 is convertible to canonical form. We then show subject reduction and type preservation for (precisely) well-typed terms. <p> Finally we would like to thank Andrzej Filinski for providing an illuminating implementation of the various calculi, translations between them, conversion to canonical forms, and some parts of the correctness proofs in Elf [19], a logic programming language based on the LF logical framework <ref> [11] </ref>. The implementation is available via anonymous ftp from ftp.cs.cmu.edu, file user/fp/papers/mfps95.tar.Z.
Reference: [12] <author> Robert Harper and Greg Morrisett. </author> <title> Compiling polymorphism using intensional type analysis. </title> <editor> In Peter Lee, editor, </editor> <booktitle> Proceedings of the 22nd Annual ACM SIGPLAN-SIGACT Symposium on Principles of Programming Languages, </booktitle> <pages> pages 130-141, </pages> <address> San Francisco, California, </address> <month> January </month> <year> 1995. </year>
Reference-contexts: Nielson & Nielson's 2-level functional language can be conservatively embedded in the implicit system, which shows that S4 indeed correctly models standard binding-time properties. Ad hoc polymorphism. Even if one excludes ad hoc polymorphism from a language like ML, it arises naturally during compilation <ref> [12] </ref>. Modal kinds provide a way to sort out ad hoc and parametric polymorphism in an explicitly polymorphic language. Briefly, 2Type would be the kind of types that may be the subject of a typecase statement.
Reference: [13] <author> Simone Martini and Andrea Masini. </author> <title> A computational interpretation of modal proofs. </title> <editor> In H. Wansing, editor, </editor> <title> Proof theory of Modal Logics. </title> <publisher> Kluwer, </publisher> <year> 1994. </year> <note> To appear. </note>
Reference-contexts: We then prove subject reduction and the existence of a canonical form for every well-typed term. We omit a simpler and not so relevant strong normalization result. A similar, but more verbose system motivated by proof-theoretic considerations has been given by Martini & Masini <ref> [13] </ref>. They investigate normalization and the Church-Rosser property which is complementary to our own meta-theoretic study. A similar approach can be used beyond S4 to give an analogous formulation of intuitionistic linear logic which is beyond the scope of this paper. <p> The pop rule implements transitivity, since we can apply it as often as we like to conclude 2A in any future world given 2A in the current world. In this sense the system is quite similar to the one given by Martini and Masini <ref> [13] </ref>, except that our formulas and proof terms generically apply to all worlds, while in their system formulas and proof terms uniquely determine their world. <p> Further, they do not introduce a proof term calculus, nor do they study properties such as subject reduction or normalization. Closest to ours is the study of modal logic by Martini and Masini employing a 2-sequent calculus in its natural deduction form [15,16]. In <ref> [13] </ref> they present a term assignment system for the system of natural deduction for the intuitionistic modal logics K, K4, KT and S4. In their systems, worlds are also represented structurally as part of the formulation of their judgments.
Reference: [14] <author> Simone Martini and Andrea Masini. </author> <title> On the fine structure of the exponential rule. </title> <editor> In J.-Y. Girard, Y. Lafont, and L. Regnier, editors, </editor> <booktitle> Advances in Linear Logic, Proceedings of the 1993 Workshop on Linear Logic, </booktitle> <address> Ithaca, New York, </address> <year> 1994. </year> <note> MIT Press. To appear. </note>
Reference-contexts: A similar approach can be used beyond S4 to give an analogous formulation of intuitionistic linear logic which is beyond the scope of this paper. A related system without weakening and contraction has been analysed by Martini & Masini <ref> [14] </ref>. Our system can also serve as the basis for a modal logical framework used for explanation-based generalization [7] and for binding-time analysis of functional languages [6]. <p> Linear logic. The modal operator ! is required to recover full intuitionistic or classical logic from linear logic. It satisfies the basic laws of S4, but of course interacts with weakening and contraction. A first step in this direction was taken by Martini & Masini <ref> [14] </ref> who consider a linear logic with a modal operator, but without weakening and contraction. We have designed another system based on similar ideas to the ones described here which permits a simple closed form definition of terms from the ordinary (intuitionistic) -calculus.
Reference: [15] <author> Andrea Masini. </author> <title> 2-Sequent calculus: A proof theory of modality. </title> <journal> Annals of Pure and Applied Logic, </journal> <volume> 58 </volume> <pages> 229-246, </pages> <year> 1992. </year>
Reference: [16] <author> Andrea Masini. </author> <title> 2-Sequent calculus: Intuitionism and natural deduction. </title> <journal> Journal of Logic and Computation, </journal> <volume> 3 </volume> <pages> 533-562, </pages> <year> 1993. </year>
Reference: [17] <author> Dale Miller, Gopalan Nadathur, Frank Pfenning, and Andre Scedrov. </author> <title> Uniform proofs as a foundation for logic programming. </title> <journal> Annals of Pure and Applied Logic, </journal> <volume> 51 </volume> <pages> 125-157, </pages> <year> 1991. </year>
Reference-contexts: The connection to Schellinx's linear decoration [21] for sequent formulations still remains to be explored. Modal logical frameworks. The intuitionistic modal logic S4 can serve as the basis for a modal extension of logical frameworks such as hereditary Harrop formulas <ref> [17] </ref> used in Isabelle or Prolog. For such an extension to be usable we have to verify conservative extension and the uniform proof property. Both are corollaries to our canonical form theorem 5.10 20 F. Pfenning and H. C. Wong and type preservation 5.16.
Reference: [18] <author> Flemming Nielson and Hanne Riis Nielson. </author> <title> Two-Level Functional Languages. </title> <publisher> Cambridge University Press, </publisher> <year> 1992. </year>
Reference-contexts: C. Wong and type preservation 5.16. Modal logical frameworks are of interest to explanation-based generalization [7] and may also be used for more concise representations of modal logics themselves. Binding time analysis. [6] The most promising application so far is a generalization of Nielson & Nielson's 2-level functional language <ref> [18] </ref> to admit multiple computation stages, code reuse across various phases of computation, and run-time code generation. This work provides a logical explanation and generalization of binding-time analysis within a modal framework. Briefly, each possible world that arises during type checking corresponds to a stage in the computation.
Reference: [19] <author> Frank Pfenning. </author> <title> Logic programming in the LF logical framework. </title> <editor> In Gerard Huet and Gordon Plotkin, editors, </editor> <booktitle> Logical Frameworks, </booktitle> <pages> pages 149-181. </pages> <publisher> Cambridge University Press, </publisher> <year> 1991. </year>
Reference-contexts: We are also grateful to the anonymous referees for valuable suggestions. Finally we would like to thank Andrzej Filinski for providing an illuminating implementation of the various calculi, translations between them, conversion to canonical forms, and some parts of the correctness proofs in Elf <ref> [19] </ref>, a logic programming language based on the LF logical framework [11]. The implementation is available via anonymous ftp from ftp.cs.cmu.edu, file user/fp/papers/mfps95.tar.Z.
Reference: [20] <author> Dag Prawitz. </author> <title> Natural Deduction. </title> <publisher> Almquist & Wiksell, </publisher> <address> Stockholm, </address> <year> 1965. </year>
Reference-contexts: This observation is not new and one solution has been proposed by Troelstra [22] in the con text of linear logic which we view as a modern reconstruction of Prawitz's natural deduction for S4 <ref> [20] </ref>. In Troelstra's system the box operator would no longer contain a substitution and the rule 2I would be replaced by ` e : 2 ` e E : A ` e box (E) : 2A F. Pfenning and H. C.
Reference: [21] <author> Harold Schellinx. </author> <title> The Noble Art of Linear Decorating. </title> <type> PhD thesis, </type> <institution> Dutch Institute for Logic, Language and Computation, University of Amsterdam, </institution> <year> 1994. </year> <note> Available in the ILLC Dissertation Series, 1994-1. </note>
Reference-contexts: We have established its basic correctness and some normal form properties which will be the subject of a future paper. The connection to Schellinx's linear decoration <ref> [21] </ref> for sequent formulations still remains to be explored. Modal logical frameworks. The intuitionistic modal logic S4 can serve as the basis for a modal extension of logical frameworks such as hereditary Harrop formulas [17] used in Isabelle or Prolog.
Reference: [22] <author> A. S. Troelstra. </author> <title> Natural deduction for intuitionistic linear logic. </title> <type> Unpublished manuscript, </type> <month> May </month> <year> 1993. </year>
Reference-contexts: Before we proceed to the next section, however, we would like to point out that an apparently simpler version of 2-introduction, 2 ` M : A is inadequate since subject reduction fails (a fact noted by Troelstra <ref> [22] </ref>). Consider the system obtained from !2 e by replacing its introduction rule for 2 by the just-mentioned rule. A concrete example that demonstrates the failure of subject reduction is the term (z:2A: box z) (y x) under the context x:B; y:B ! 2A. <p> The box operator hides redices; here it is the application of unbox to f (which stands for box (x:b: x)) and, if that is reduced, the application of (x:b: x) to c. This observation is not new and one solution has been proposed by Troelstra <ref> [22] </ref> in the con text of linear logic which we view as a modern reconstruction of Prawitz's natural deduction for S4 [20].
References-found: 22

