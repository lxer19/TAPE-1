URL: ftp://ftp.icsi.berkeley.edu/pub/techreports/1996/tr-96-030.ps.gz
Refering-URL: http://www.icsi.berkeley.edu/techreports/1996.html
Root-URL: http://www.icsi.berkeley.edu
Email: mmueller@icsi.berkeley.edu berlek@math.berkeley.edu bspight@igc.apc.org  
Title: Generalized Thermography: Algorithms, Implementation, and Application to Go Endgames  
Author: Martin Muller Elwyn Berlekamp Bill Spight 
Date: October 1996  
Address: Berkeley UC Berkeley  
Affiliation: ICSI  
Pubnum: TR-96-030  
Abstract: Thermography [1] is a powerful method for analyzing combinatorial games. It has been extended to games that contain loops in their game graph by Berlekamp [2]. We survey the main ideas of this method and discuss how it applies to Go endgames. After a brief review of the methodology, we develop an algorithm for generalized thermography and describe its implementation. To illustrate the power and scope of the resulting program, we give an extensive catalog of examples of Ko positions and their thermographs. We introduce a new method related to thermography for analyzing ko in the context of a specific ko threat situation. We comment on some well-known Go techniques, terminology, and "exotic" Go positions from a thermography point of view. Our analysis shows that a framework based on generalized thermography can be useful for the opening and midgame as well. We suggest that such a framework will serve as the basis for future strong Go programs. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> Winning Ways. Berlekamp, E., Conway, J.H., Guy, </author> <title> R.K. </title> <publisher> Academic Press, </publisher> <address> London 1982. </address>
Reference-contexts: The mean is (x + y)=2 and the temperature (x y)=2. 2.2.2 Simplification of Games and Sums Loopfree games can be brought into a canonical form by repeatedly removing dominated options and reversing reversals <ref> [1] </ref>. This process also removes all but one of several options when they have the same value. The analysis of sum games can be simplified by removing null games, integers, and pairs of games and their inverses G + (G). <p> At sufficiently high temperatures, any "double sente" situation becomes either one-sided sente or gote. Figure 5 shows an example. 3 Endgames Containing Ko Fights 3.1 Drawing Game Graphs for Ko Diagrams showing the game graph of loopy games are similar to those used for game trees <ref> [1] </ref>. Non-loop moves are represented by a straight line. A move always leads from the higher to the lower endpoint of the line. A two move loop is drawn as an arc. It can be traversed in both directions. In 6 3.2 Ko Threats Leftscore = Rightscore = 0. <p> Most of these variations contain one or more bad moves, so for efficiency they should be eliminated from a game before computing the thermograph. In [11] we used an iteration technique, based on sidling <ref> [1] </ref>, to find loopfree lower and upper bounds on a loopy game. If both bounds for a node are the same, ko moves do not affect the game value (they are dominated by non-ko moves), and we can remove the loops before computing the thermograph.
Reference: [2] <institution> The Economist's View of Combinatorial Games. </institution> <note> Berlekamp, </note> <editor> E. </editor> <booktitle> To appear in: Proceedings of MSRI Workshop on Combinatorial Games, </booktitle> <year> 1996. </year>
Reference-contexts: 1 Analysis of Go Endgames Generalized thermography <ref> [2] </ref> is an efficient method for playing well in "loopy" Go endgames containing ko. Solving such endgames by traditional minmax-based methods is feasible only for very tiny boards or extremely late endgames. <p> In one sided sente situations, both playing and waiting will be optimal for one player in some temperature range. 2.4 Temperature Based Pruning Methods Dominance and reversability are classical concepts of combinatorial game theory. They have the following counterparts in thermography <ref> [2] </ref>: Thermographic dominance A move is thermographically optimal at temperature t iff its taxed scaffold coincides with the game scaffold at t. Other moves, which have an inferior scaffold value at t, are thermographically dominated. <p> Playing a sente move temporarily increases the temperature. Replying to such a move is urgent. Overall, the ambient temperature is monotonically non-increasing throughout the endgame. 2.5.2 Sentestrat The sentestrat algorithm <ref> [2] </ref> models a slowly decreasing temperature by precisely defining the ambient temperature. Often, all endgames have a temperature smaller or equal to the ambient. A player following sentestrat answers any move that increases the local temperature above the ambient. <p> Figure 4 shows such a scenario. Sentestrat is primarily a local algorithm: there is no complicated global analysis. Information about the global environment is reduced to a single number, the ambient. 2.6 Economic Model Berlekamp <ref> [2] </ref> introduces a different model for playing sums of games, where players pay a tax to the opponent for the right to move. The tax rate is determined by auctions. A sum game continues at the same tax rate until both players choose to pass. <p> Each local position can be studied in an enriched environment. Within this environment, the behavior of a complicated game in a complicated sum is essentially the same as if the other complicated games were not present. Berlekamp <ref> [2] </ref> gives more details on this algorithm. 2.8 Interpretation of Moves Based on Thermography Thermography is a method for analyzing local games that summarizes the rest of the board in one parameter, the "ambient temperature" of the sum game. <p> In his Ph.D. thesis [7], Kim models the urgency of playing ko by pseudoincentives. He shows that it is often possible to treat a ko as if it had the same incentive as a carefully chosen loopfree game. 7 3.3.1 Komaster Berlekamp <ref> [2] </ref> models play of a loopy game under the assumption that one player is "komaster", i.e. able to win all kos because she has a surplus of ko threats. We will call the other player the "koloser". <p> He may even win the ko! This possibility, called "tunnelling" [13], appears in the solution to the "$1,000 Ko" [8]. 4 Generalized Thermography Berlekamp develops a methodology for computing thermographs of loopy games and illustrates it with several examples <ref> [2] </ref>. In this section we briefly review this methodology, develop details of an algorithm, and describe its implementation. Trying to compute the thermograph of a loopy game with the equations of loopfree thermography leads to an infinite loop. We consider two closely related loopfree games: the "solidhat" and "hat" games. <p> The mast of pass-banned "solidhat" graphs is non-vertical. The left and right wall used to construct a thermograph can intersect more than once, leading to several "cave" and "hill" regions <ref> [2] </ref>. Inside a cave, the thermograph follows a "balloon's path", as shown in Figure 10. In thermographs of loopfree games, the slopes of the scaffolds indicate whether the difference in the number of moves played by both players is zero or one. <p> In practice we cannot know which endgame situation will occur in the given environment. It makes sense to look for a kind of "standard environment" against which to compare different local results. The enriched environment <ref> [2] </ref> seems a good candidate for a non-biased a priori choice of environment. One problem is choosing a komaster. A pessimist would always choose the opponent as komaster, an optimist would choose himself. A realist would base this assumption on an evaluation of existing ko threats.
Reference: [3] <editor> Mathematical Go: </editor> <title> Chilling Gets the Last Point. Berlekamp, </title> <editor> E., Wolfe, D. A K Peters, </editor> <address> Wellesley 1994. </address>
Reference-contexts: In Go, this happens when parts of the board are separated by walls of safe stones. Moves in one part have no effect on other parts across such a wall. In the loopfree case, without ko fights, this independence is strong <ref> [3, 9] </ref>. With ko, a limited kind of interaction is introduced: ko threats played in one subgame affect the status of the ko in another subgame. 2.1.2 Local Search and Evaluation Local search is exhaustive in principle: all possible moves are generated. <p> In Japanese rules it costs points to capture dead stones, so competent players will not do it. If players disagree in the end which stones are dead or alive, a special dispute-settling phase follows <ref> [3] </ref>. In Chinese rules the capture of dead stones in the end is not penalized, allowing play to continue until only alive and neutral (shared liberties in seki) points remain on the board. Scoring is very easy with Chinese rules: all stones are worth one point for their color.
Reference: [4] <editor> The Go Player's Almanac. Bozulich, R. (Ed.), </editor> <publisher> Ishi Press, </publisher> <address> Tokyo 1992. </address>
Reference-contexts: These positions must be evaluated statically. Seki and unresolved ko are the most frequent examples of problematic positions. Rules differ significantly in the evaluation of such positions. A big collection of interesting positions can be found in Fearnley [5]. Smaller collections appear in the official rules of several countries <ref> [4] </ref>. 6.2.2 Playing One Point Ko and Dame In Japanese rules, one point ko fights are the smallest plays. Dame are usually filled after the last ko fight to make counting easier, but they are not worth any points.
Reference: [5] <institution> Some positions for a "Bestiary" of Go (Baduk, WeiQi). Fearnley, H., </institution> <note> Web page http://www.eng.ox.ac.uk/people/Harry.Fearnley/go /bestiary/molasses ko.html </note>
Reference-contexts: These positions must be evaluated statically. Seki and unresolved ko are the most frequent examples of problematic positions. Rules differ significantly in the evaluation of such positions. A big collection of interesting positions can be found in Fearnley <ref> [5] </ref>. Smaller collections appear in the official rules of several countries [4]. 6.2.2 Playing One Point Ko and Dame In Japanese rules, one point ko fights are the smallest plays. Dame are usually filled after the last ko fight to make counting easier, but they are not worth any points. <p> The positions in Figure 36 both contain free white ko threats that Black cannot eliminate <ref> [5] </ref>. 7 Implementation Issues This section discusses technical aspects of our implementation of generalized thermography: repetition, transposition, underlying arithmetic and geometric operations, the construction of scaffolds and thermographs, and the user interface. 7.1 Repetition and Transposition Detection To identify loops, we must detect repetitive positions.
Reference: [6] <author> Smart Game Board: </author> <title> a Workbench for Game-Playing Programs, with Go and Othello as Case Studies. </title> <editor> Kierulf, A. Dissertation, </editor> <address> ETH Zurich, </address> <year> 1990. </year>
Reference-contexts: Therefore a position is defined as the current board state, plus the difference in number of captures when using Japanese rules. The history of moves and captures is used to recognize repetitions. For details on repetition detection see <ref> [6] </ref>. Loop recognition and transpositions in the game graph are closely related: a loop is a transposition to a previous node in the game history. A special kind of transpositions unique to Go are shift transpositions: transpositions into the same board position, but with a different number of captures.
Reference: [7] <editor> New Values in Domineering and Loopy Games in Go. Kim, </editor> <title> Y., </title> <type> Ph.D. thesis, </type> <institution> Berkeley 1995. </institution>
Reference-contexts: Another model adds idealized ko threats of the form big 0 fl to a sum consisting of the ko plus several other, loopfree games, which cannot be used as ko threats. In his Ph.D. thesis <ref> [7] </ref>, Kim models the urgency of playing ko by pseudoincentives. <p> Such kos are called "placid", while those whose mast value depends on the komaster are called "hyperactive". Many of the examples in section 11 are hyperactive, for example Figures 76,79,80 and 81. 3.3.3 Decreasing the Temperature During a Ko Fight Spight and Kim <ref> [13, 7] </ref> study decreasing the temperature during a ko fight. This changes the thermograph, since komaster may be able to win the ko at a lower temperature, and therefore has to give up less in return. <p> A komaster who has enough primary threats to delay winning the ko until the end of the game is called a komonster. Pseudothermographs <ref> [7] </ref> show the effect of lowering the temperature before winning the ko. They represent not just the ko, but the ko with threats. <p> Dame are usually filled after the last ko fight to make counting easier, but they are not worth any points. In Chinese rules, dame and one point ko fights are both valuable but incomparable plays. Playing them in the correct order can already be quite intricate <ref> [7] </ref>. After all dame are occupied, players can continue to play inside their own territories without losing points. This way they can eliminate most remaining weaknesses such as potential ko or ko threats. This is also the time when positions containing latent ko fights will be played out. <p> The possible existance of local threats in a ko fight further affects the value of other ko threats. Endgame moves create or destroy ko threats as a side effect. Kim <ref> [7] </ref> introduces perturbation theory for solving the simplest problem of handling a ko in a real endgame environment: to play the final one point ko correctly in Japanese rules. He assigns very small values * to ko threats and solves the corresponding combinatorial game.
Reference: [8] <author> Where is the $1,000 Ko? Berlekamp, E., Kim, Y., </author> <title> Go World No. </title> <booktitle> 71, </booktitle> <pages> pp. 65-80, </pages> <publisher> Ishi Press, </publisher> <address> Tokyo 1994. </address>
Reference-contexts: Conversely, koloser may initiate a ko fight at a higher temperature than predicted by thermography. He may even win the ko! This possibility, called "tunnelling" [13], appears in the solution to the "$1,000 Ko" <ref> [8] </ref>. 4 Generalized Thermography Berlekamp develops a methodology for computing thermographs of loopy games and illustrates it with several examples [2]. In this section we briefly review this methodology, develop details of an algorithm, and describe its implementation.
Reference: [9] <author> Computer Go as a Sum of Local Games: </author> <title> An Application of Combinatorial Game Theory. Muller, M., </title> <type> Ph.D. thesis, </type> <institution> ETH Zurich, </institution> <year> 1995. </year>
Reference-contexts: Solving such endgames by traditional minmax-based methods is feasible only for very tiny boards or extremely late endgames. A program based on combinatorial game theory can solve loopfree endgames containing many independent local positions, where each is of moderate size, up to about 10 local moves <ref> [9] </ref>. Generalized thermography can deal with endgame positions of comparable size that may contain ko. The technique does not guarantee perfect play, but the imprecision is small, and becomes zero in the case of an "enriched environment". The method gives good results in all but the rarest ko fights. <p> We give a brief overview of these phases. Detailed descriptions can be found in <ref> [9] </ref>. 1 2.1.1 Board Partition and Subgame Identification The precondition for applying combinatorial game theory is that a game decomposes into a sum of subgames. In Go, this happens when parts of the board are separated by walls of safe stones. <p> In Go, this happens when parts of the board are separated by walls of safe stones. Moves in one part have no effect on other parts across such a wall. In the loopfree case, without ko fights, this independence is strong <ref> [3, 9] </ref>. With ko, a limited kind of interaction is introduced: ko threats played in one subgame affect the status of the ko in another subgame. 2.1.2 Local Search and Evaluation Local search is exhaustive in principle: all possible moves are generated. <p> To select a move, different algorithms compare temperatures, thermo-graphs or incentives of moves. 2.1.4 Exact Solution of Endgames Loopfree late endgames can be solved exactly <ref> [9] </ref>: Board partition Find absolutely safe stones, territories and dame points, then partition the rest of the board into connected components. <p> In Go, single-player loops are possible when the rules allow suicide (see Figure 8). Such loops contain at least one bad move and can be eliminated in a preliminary step by pruning the loop-closing move <ref> [9] </ref>. Another preprocessing algorithm that can eliminate bad moves and loops from a game is proposed in section 9. 4.4 Sample Thermograph Computation: One Point Ko We demonstrate the algorithm that computes solidhat and hat thermographs using the example of the one point ko in Figure 9. <p> Loop recognition and transpositions in the game graph are closely related: a loop is a transposition to a previous node in the game history. A special kind of transpositions unique to Go are shift transpositions: transpositions into the same board position, but with a different number of captures. Muller <ref> [9] </ref> describes an implementation of local search that takes advantage of such transpositions. 7.2 From Thermography to Generalized Thermography Explorer [9] is a full-featured traditional Go-playing program that has taken part in many computer Go competitions. <p> A special kind of transpositions unique to Go are shift transpositions: transpositions into the same board position, but with a different number of captures. Muller <ref> [9] </ref> describes an implementation of local search that takes advantage of such transpositions. 7.2 From Thermography to Generalized Thermography Explorer [9] is a full-featured traditional Go-playing program that has taken part in many computer Go competitions. It contains Wolfe's toolkit for combinatorial games [15] and modules for exact and heuristic endgame calculation. The thermography modules are fully integrated in the program. <p> Games often are not strictly independent, and players seek to create "double threats" or other multi-purpose moves. Muller <ref> [9] </ref> investigates several kinds of dependencies and surveys methods that have been proposed for dealing with them. 29 Sets of ko threats are clearly not well-ordered: In some situations a few big threats will be superior to many small threats, in other situations it will be the opposite.
Reference: [10] <editor> The Complete Kisei Collection. Muller, M. </editor> <address> http://wwwjn.inf.ethz.ch/martin/kisei.html </address>
Reference: [11] <editor> Experiments in Computer Go Endgames. Muller, M., and Gasser, R. </editor> <booktitle> To appear in: Proceedings of MSRI Workshop on Combinatorial Games, </booktitle> <year> 1996. </year>
Reference-contexts: Ko occurs in every sufficiently complex local fight. In earlier experiments with small corner situations, ko fights were found to affect the local game in all situations of seven or more empty spaces <ref> [11] </ref>. Current Go programs are still poor at playing ko. Strong future Go programs will need to deal with ko in complex and intricate ways, and generalized thermography can provide the necessary theoretical framework for such programs. <p> Local search and evaluation A brute force search inside the local area, with a few refinements to cut down the search space while retaining exactness <ref> [11] </ref>. 2 Move selection in sum game Determine all moves whose incentives are not dominated by other moves. If a unique such move exists it is selected immediately. <p> A program looks at many sequences that human players would never consider, but are hard to dismiss beforehand with current techniques. Most of these variations contain one or more bad moves, so for efficiency they should be eliminated from a game before computing the thermograph. In <ref> [11] </ref> we used an iteration technique, based on sidling [1], to find loopfree lower and upper bounds on a loopy game.
Reference: [12] <author> Ko Jiten. Murashima, Y., </author> <title> Kaibundo Shinkosha, </title> <address> Tokyo 1973. </address>
Reference: [13] <author> Ko Notes. Spight, B. </author> <type> Unpublished manuscript, </type> <institution> Berkeley 1989. </institution>
Reference-contexts: Such kos are called "placid", while those whose mast value depends on the komaster are called "hyperactive". Many of the examples in section 11 are hyperactive, for example Figures 76,79,80 and 81. 3.3.3 Decreasing the Temperature During a Ko Fight Spight and Kim <ref> [13, 7] </ref> study decreasing the temperature during a ko fight. This changes the thermograph, since komaster may be able to win the ko at a lower temperature, and therefore has to give up less in return. <p> Conversely, koloser may initiate a ko fight at a higher temperature than predicted by thermography. He may even win the ko! This possibility, called "tunnelling" <ref> [13] </ref>, appears in the solution to the "$1,000 Ko" [8]. 4 Generalized Thermography Berlekamp develops a methodology for computing thermographs of loopy games and illustrates it with several examples [2]. In this section we briefly review this methodology, develop details of an algorithm, and describe its implementation. <p> when the opponent is trying to lower the temperature before winning the ko. 5.3 Pseudothermography and Komonster Since to win the ko the komaster must give up a play in the environment, she may profit by delaying the win until the value of such a play (the ambient temperature) drops <ref> [13] </ref>. A komaster who has enough primary threats to delay winning the ko until the end of the game is called a komonster. Pseudothermographs [7] show the effect of lowering the temperature before winning the ko. They represent not just the ko, but the ko with threats.
Reference: [14] <institution> Mathematics of Go: Chilling Corridors. Wolfe, </institution> <address> D., </address> <institution> Dissertation, University of California at Berkeley, Berkeley 1991. </institution>

References-found: 14

