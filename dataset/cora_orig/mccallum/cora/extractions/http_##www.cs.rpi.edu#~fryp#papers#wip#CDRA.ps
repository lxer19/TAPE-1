URL: http://www.cs.rpi.edu/~fryp/papers/wip/CDRA.ps
Refering-URL: http://www.cs.rpi.edu/~fryp/papers/wip/
Root-URL: http://www.cs.rpi.edu
Email: fryp@cs.rpi.edu  joshk@us.ibm.com  
Title: A Caching DHCP Relay Agent  
Author: Patrick H. Fry Joshua W. Knight 
Affiliation: Department of Computer Science Rensselaer Polytechnic Institute  IBM T.J. Watson Research Center  
Abstract: Dynamic Host Configuration Protocol (DHCP) is an increasingly popular method for providing configuration information to network hosts. This paper describes the Caching DHCP Relay Agent (CDRA). The CDRA stores local client configuration by caching the data in DHCP server messages. Using this cached information, the CDRA can respond to many client queries directly without involving the server. The CDRA described in this paper needs no changes to the DHCP protocol. It appears to its clients as a DHCP server and to its servers as a DHCP relay. Using CDRAs reduces overall DHCP network traffic by keeping most on the client's local subnet, lowers server workload, and increases the availability of DHCP services. The CDRA can also provide other services such as automated lease release and dynamic DNS update. We have built a prototype for the IBM RS/6000. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> Steve Alexander and Ralph Droms. </author> <title> DHCP Options and BOOTP Vendor Extensions. </title> <institution> Network Working Group, IETF, </institution> <month> March </month> <year> 1997. </year> <note> RFC 2132. </note>
Reference-contexts: The relay must change this entry to its own IP address before forwarding to the client. Normally the configuration information relative to the IP address lease (e.g. IP Address Lease Time, Renewal (T1) Time Value, and Rebinding (T2) Time Value <ref> [1] </ref>) must also be modified before forwarding to the client. Additionally, when a client sends a REQUEST in response to an OFFER, it must include the Server Identifier option. This option will contain the address of the relay.
Reference: [2] <author> J. Bound and C. Perkins. </author> <title> Dynamic Host Configuration Protocol for IPv6 (DHCPv6). </title> <institution> Network Working Group, IETF, </institution> <month> July </month> <year> 1998. </year> <title> draft-ietf-dhc-dhcpv6-12.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: Using the stateless method, [18], a host "creates" a valid IP address by obtaining subnet information from its local network router and using Neighbor Solicitation messages to determine if any other host is using the candidate address. The stateful method, <ref> [2] </ref>, uses DHCP servers which support IPv6 addresses. These two methods may be used together by one host. For example, a host may determine its IP address through stateless methods and find other network configuration information using DHCP.
Reference: [3] <author> N. S. Bowen, J. Antognini, R. D. Regan, </author> <title> and N.C. Matsakis. Availability in parallel systems: Automatic process restart. </title> <journal> IBM Systems Journal, </journal> <volume> 36(2) </volume> <pages> 284-300, </pages> <year> 1997. </year>
Reference-contexts: Availability Here, we discuss three possible ways to increase availability. These methods are not mutually exclusive in their benefits and can be used in any combination. One method is to run the DHCP services on a highly available system (e.g. IBM S/390 Parallel Sysplex y <ref> [3, 16] </ref>). Another option is to use a pool of redundant DHCP servers. If a server fails, other servers are available to take over.
Reference: [4] <author> Bill Croft and John Gilmore. </author> <title> Bootstrap Protocol (BOOTP). </title> <institution> Network Working Group, IETF, </institution> <month> September </month> <year> 1985. </year> <note> RFC 0951. </note>
Reference: [5] <author> S. Deering and R. Hinden. </author> <title> Internet Protocol, Version 6 (IPv6) Specification. </title> <institution> Network Working Group, IETF, </institution> <month> December </month> <year> 1995. </year> <note> RFC 1883. </note>
Reference-contexts: This restricts the servers from using some potentially faster storage mechanism. The CDRA supports all RFC-compliant servers independent of how the network configuration data is stored. There are currently two proposed (non-competing) methods for providing automatic network configuration to IPv6 <ref> [5] </ref> hosts: stateless and stateful. Using the stateless method, [18], a host "creates" a valid IP address by obtaining subnet information from its local network router and using Neighbor Solicitation messages to determine if any other host is using the candidate address.
Reference: [6] <author> Ralph Droms. </author> <title> Interoperation Between DHCP and BOOTP. </title> <institution> Network Working Group, IETF, </institution> <note> Octo-ber 1993. RFC 1534. </note>
Reference: [7] <author> Ralph Droms. </author> <title> Dynamic Host Configuration Protocol. </title> <institution> Network Working Group, IETF, </institution> <month> April </month> <year> 1997. </year> <note> RFC 2131. </note>
Reference-contexts: For example, a "safe network mode" option could be used in the CDRA's configuration file. Our CDRA prototype can run in either same or unsafe mode. 3.2 Precautions Before Responding to Client Requests Of the five types of client DHCP messages <ref> [7] </ref>, only one, REQUEST, requires special precautions when being handled by a CDRA. The only situation under which a CDRA can avoid following these procedures are in a safe network with stable storage used to log each IP address assignment and lease renewal. <p> Determining what is considered "significantly long enough" for a remaining lease is outside the scope of this paper. There are three stages in a client lease <ref> [7] </ref>. Figure 2, shows the timeline for a lease. The first stage (BOUND) runs from the point at which the lease is issued to T1, which is usually halfway through the lease. For this interval, the client normally does not communicate with the server. <p> Figure 6 shows the state diagram for a DHCP client (as shown in <ref> [7] </ref>). The CDRA bases a client's state on messages received from and sent to that particular client. The CDRA's client state diagram is shown in Figure 7. <p> DB DELETE Other Silent Discard | BOOTP Packet REQUEST Any Spoof BOUND REPLY REQUESTING Forward to client BOUND REPLY Other Silent Discard BOUND Table 2: Proxy CDRA actions categorized by message type and client state. l s is the time remaining on the IP address lease from the server. protocol <ref> [7] </ref>. 8 state diagram for DHCP and BOOTP clients. Storing the state is necessary for a variety of reasons. The most important reason is for OFFERs from multiple servers. Once the relay has sent an OFFER to a client, the relay places the client in the REQUESTING state. <p> The relay could convert this REQUESTING REQUEST to a INIT-REBOOT REQUEST and forward it to the server. This saves the server from having to process the DISCOVER. In the worst case, the server responds with a NAK and the client has to reissue a DISCOVER. See <ref> [7] </ref> for more details about different methods of client initialization. Expired data is also useful in situations where the server is temporarily unreachable. The relay could give the client its old expired IP address if the server doesn't respond within some specified interval.
Reference: [8] <author> Ralph Droms and W. Arbaugh. </author> <title> Authentication for DHCP Messages. </title> <institution> Network Working Group, IETF, </institution> <month> August </month> <year> 1998. </year> <title> draft-ietf-dhc-authentication-08.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: Therefore, an intermediate relay never receives server responses and cannot cache the server data. 3.7 Security Currently, there is no IETF standard for encryption or authentication in DHCP. However there are two drafts addressing this issue <ref> [8, 9] </ref>. Since the CDRA must read and modify DHCP packets, it must take an active role in any security implementation.
Reference: [9] <author> Ralph Droms and O. Gudmundsson. </author> <title> Security Requirements for the DHCP Protocol. </title> <institution> Network Working Group, IETF, </institution> <month> May </month> <year> 1998. </year> <title> draft-ietf-dhc-security-requirements-00.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: Therefore, an intermediate relay never receives server responses and cannot cache the server data. 3.7 Security Currently, there is no IETF standard for encryption or authentication in DHCP. However there are two drafts addressing this issue <ref> [8, 9] </ref>. Since the CDRA must read and modify DHCP packets, it must take an active role in any security implementation.
Reference: [10] <author> Ralph Droms, Bernard Volz, K. Kinnear, Arun Kapur, Greg Rabil, Mike Dooley, and Steve Gonczi. </author> <title> DHCP Failover Protocol. </title> <institution> Network Working Group, IETF, </institution> <month> August </month> <year> 1998. </year> <title> draft-ietf-dhc-failover-02.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: If a server fails, other servers are available to take over. There are currently no standard methods for automated server take over, however there are two Internet drafts which define a protocol to have a DHCP server act as a hot backup to another server <ref> [10, 14] </ref>. A CDRA offers a third approach. If a DHCP server fails, the CDRA is capable of providing some services to its clients until the server returns. The CDRA resides on the same network segment as its clients.
Reference: [11] <author> Patrick H. Fry and Joshua W. Knight. </author> <title> A caching DHCP relay agent. </title> <type> Technical Report TR97-10, </type> <institution> Dept. of Computer Science, Rensselaer Polytechnic Institute and IBM T. J. Watson Research Center, Troy, NY and Yorktown, </institution> <address> NY, </address> <month> November </month> <year> 1997. </year>
Reference-contexts: The CDRA described in this paper requires no changes to the DHCP protocol. There are some other types of CDRAs which require modifications to the DHCP server to work effectively <ref> [11] </ref>, however our CDRA of choice, the proxy CDRA, requires no such changes. The proxy CDRA appears to its clients as a DHCP server and to its servers as a DHCP relay. <p> This section describes the precautions necessary for each type of REQUEST. Our technical paper provides examples of situations where multiple clients can be assigned the same IP address if these safeguards are not followed <ref> [11] </ref>. REQUEST from INIT-REBOOT or used in response to an OFFER In this situation, the client is requesting a lease on an IP address. <p> The existing source code for the AIX RS/6000 BOOTP relay agent was modified to create a proxy CDRA. In short, a proxy CDRA identifies itself to its clients as a DHCP server by modifying the siaddr field of the messages from the server to contain its own IP address <ref> [11] </ref>. Our prototype is capable of running in either safe or unsafe network mode. It supports automated lease renewals and releases. It keeps a database containing information about clients from which it has received messages.
Reference: [12] <author> Patrick H. Fry and Joshua W. Knight. </author> <title> An auto-configuring secondary Dynamic Host Configuration Protocol (DHCP) server. </title> <type> Technical report, </type> <institution> Dept. of Computer Science, Rensselaer Polytechnic Institute and IBM T. J. Watson Research Center, Troy, NY and Yorktown, </institution> <address> NY, </address> <month> September </month> <year> 1998. </year>
Reference-contexts: The CDRA could store IP address usage statistics which could be made available, through SNMP for instance, to network management software. 6 Related Work In <ref> [12] </ref> we describe a Secondary DHCP Server. The DHCP secondary does for DHCP what secondary name servers do for DNS. Unlike the CDRA, the secondary provides full DHCP services clients in its domain. <p> The CDRA requires intermittent communication with its server and is not suitable for networks in which long term disconnects or high latency network delays are common. In these situations a separate DHCP server or a secondary server <ref> [12] </ref> would be applicable. y Trademark or registered trademark of International Business Machines Corporation. 10
Reference: [13] <author> Christos T. Karamanolis and Jeff N. Magee. </author> <title> Configurable highly available distributed services. </title> <booktitle> In Proceedings. 14th Symposium on Reliable Distributed Systems, </booktitle> <pages> pages 118-127, </pages> <address> Bad Neuenahr, Germany, </address> <month> September </month> <year> 1995. </year> <journal> IEEE Computer Society. </journal>
Reference: [14] <author> K. Kinnear. </author> <title> DHCP Safe Failover Protocol. </title> <institution> Network Working Group, IETF, </institution> <month> March </month> <year> 1998. </year> <title> draft-ietf-dhc-safe-failover-proto-00.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: If a server fails, other servers are available to take over. There are currently no standard methods for automated server take over, however there are two Internet drafts which define a protocol to have a DHCP server act as a hot backup to another server <ref> [10, 14] </ref>. A CDRA offers a third approach. If a DHCP server fails, the CDRA is capable of providing some services to its clients until the server returns. The CDRA resides on the same network segment as its clients.
Reference: [15] <author> Chris Lowde, Dave Champine, Ali Marashi, and Tim Kelley. </author> <title> Directory enabled networks ad hoc working group. </title> <note> (Online Information), 1998. Available at: http://murchiso.com/den. </note>
Reference: [16] <author> J. M. Nick, B. B. Moore, J.-Y. Chung, and N. S. Bowen. </author> <title> S/390 cluster technology: Parallel sysplex. </title> <journal> IBM Systems Journal, </journal> <volume> 36(2) </volume> <pages> 172-201, </pages> <year> 1997. </year>
Reference-contexts: Availability Here, we discuss three possible ways to increase availability. These methods are not mutually exclusive in their benefits and can be used in any combination. One method is to run the DHCP services on a highly available system (e.g. IBM S/390 Parallel Sysplex y <ref> [3, 16] </ref>). Another option is to use a pool of redundant DHCP servers. If a server fails, other servers are available to take over.
Reference: [17] <author> Yakov Rekhter. </author> <title> Interaction Between DHCP and DNS. </title> <institution> Network Working Group, IETF, </institution> <month> March </month> <year> 1998. </year> <title> draft-ietf-dhc-dhcp-dns-08.txt, </title> <booktitle> work in progress. </booktitle>
Reference-contexts: DNS Update The autoconfiguration of clients which DHCP provides does not yet include updating DNS. There is currently an IETF Internet draft specifying a method for a DHCP server to update a DNS server using the DNS update protocol <ref> [17, 19] </ref>. A CDRA could perform this service for its servers and clients. 3 CDRA Design As described in Section 2, the CDRA enhances the DHCP relay agent to include additional DHCP server functionality. This section provides details on how a CDRA must function.
Reference: [18] <author> S. Thomson and T. </author> <month> Narten. </month> <institution> IPv6 Stateless Address Autoconfiguration. Network Working Group, IETF, </institution> <month> August </month> <year> 1996. </year> <note> RFC 1971. </note>
Reference-contexts: This restricts the servers from using some potentially faster storage mechanism. The CDRA supports all RFC-compliant servers independent of how the network configuration data is stored. There are currently two proposed (non-competing) methods for providing automatic network configuration to IPv6 [5] hosts: stateless and stateful. Using the stateless method, <ref> [18] </ref>, a host "creates" a valid IP address by obtaining subnet information from its local network router and using Neighbor Solicitation messages to determine if any other host is using the candidate address. The stateful method, [2], uses DHCP servers which support IPv6 addresses.
Reference: [19] <author> P. Vixie, S. Thomson, Y. Rekhter, and J. </author> <title> Bound. Dynamic Updates in the Domain Name System. </title> <institution> Network Working Group, IETF, </institution> <month> April </month> <year> 1997. </year> <note> RFC 2136. </note>
Reference-contexts: DNS Update The autoconfiguration of clients which DHCP provides does not yet include updating DNS. There is currently an IETF Internet draft specifying a method for a DHCP server to update a DNS server using the DNS update protocol <ref> [17, 19] </ref>. A CDRA could perform this service for its servers and clients. 3 CDRA Design As described in Section 2, the CDRA enhances the DHCP relay agent to include additional DHCP server functionality. This section provides details on how a CDRA must function.
Reference: [20] <author> M. Wahl, T. Howes, and S. Kille. </author> <title> Lightweight Directory Access Protocol (v3). </title> <institution> Network Working Group, IETF, </institution> <month> December </month> <year> 1997. </year> <note> RFC 2251. </note>
References-found: 20

