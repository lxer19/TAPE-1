URL: http://www.net-tech.bbn.com/craig/karn.ps
Refering-URL: http://www.cs.washington.edu/education/courses/590s/w98/index.html
Root-URL: 
Title: Improving Round-Trip Time Estimates in Reliable Transport Protocols  
Author: Phil Karn Craig Partridge 
Keyword: Categories and Subject Descriptors: C.2.0 [Computer Communications Networks]: General Open Systems Interconnection reference model (OSI); C.2.1 [Computer Communications Networks]: Network Architecture and Design packet networks, store and forward networks; D.4.4 [Operating Systems]: Communications Management message sending, network communication; General Terms: Performance, Reliability, Algorithms Additional Key Words and Phrases: Transport protocols, round-trip times.  
Affiliation: Bell Communications Research, Incorporated  Harvard University/BBN Systems and Technologies Corp.  
Abstract: As a reliable, end-to-end transport protocol, the Transmission Control Protocol (TCP) uses positive acknowledgements and retransmission to guarantee delivery. T CP implementations are expected to measure and adapt to changing round-trip delay so that their retransmission behavior balances user throughput and network efficiency. Howev er, TCP suffers from a problem we call retransmission ambiguity: when an acknowledgment arrives for a datagram that has been retransmitted, there is no indication of which transmission is being acknowledged. As a result, an implementation may be unable to determine if the round-trip time it measures is for an original transmission or a retransmission of a datagram. Many existing TCP implementations do not handle this problem correctly. Furthermore, the problem of retransmission ambiguity is also a characteristic of other major transport protocols, including OSI TP4 and DECnet NSP. This paper reviews the various approaches to retransmission and presents a novel and effective approach to the retransmission ambiguity problem. 
Abstract-found: 1
Intro-found: 1
Reference: 1. <author> BRADEN, R. (Ed.). </author> <title> Requirements for Internet Hosts - Communication Layers, Internet Requests for Comments, no. </title> <booktitle> 1122 SRI International, </booktitle> <address> Menlo Park, Calif., </address> <month> (October </month> <year> 1989) </year>
Reference-contexts: The TCP Algorithm According to the original TCP specification [20] TCP implementations are expected to predict future round-trip times by sampling the behavior of datagrams sent over a connection and averaging those samples into a ``smoothed'' round-trip time estimate, SRTT . (The specification has since been updated by <ref> [1] </ref> to require the prediction algorithms described in this paper and in [9]).
Reference: 2. <author> CLARK, D.D., ZHANG, L., and LAMBERT, M. N ETBLT: </author> <title> a high throughput transport protocol. </title> <booktitle> Proc. ACM SIGCOMM '87, Association for Computing Machinery, </booktitle> <year> (1987), </year> <pages> 353-359. </pages>
Reference: 3. <author> CLARK, D.D., JACOBSON, V., ROMKEY, J., and SALWEN, H. </author> <title> An Analysis of TCP Processing Overhead, </title> <journal> IEEE Communications 27, </journal> <month> 6 (July </month> <year> 1989), </year> <pages> 23-29. </pages>
Reference-contexts: In wide area networks, the propagation delay is the most significant contributor to the round-trip time, but ev en on local area networks, recent advances in reducing protocol processing times <ref> [3] </ref> have made the propagation delay an important part of the total round-trip time. Dynamically estimating the round-trip time is a key function in many r eliable transport protocols [4,5,6,15,20,21,22]. Round-trip time estimates are used to ensure that data is reliably delivered.
Reference: 4. <author> Digital Equipment Corporation. </author> <title> DECnet Digital Network Architecture; Phase IV; NSP Functional Specification, </title> <month> (December </month> <year> 1983). </year>
Reference-contexts: The problem of round-trip time estimation also has important consequences for other reliable protocols, especially OSI TP4 [6] and DECnet NSP <ref> [4] </ref>, which use round-trip time estimation schemes similar to that of TCP. (Actually, the TP4 specification uses a more primitive estimation scheme which is known to be inadequate for use over the OSI connection-less network service (CLNS) [7].
Reference: 5. <author> EDGE, S. W. </author> <title> An adaptive timeout algorithm for retransmission across a packet switching network. </title> <booktitle> Proc. ACM SIGCOMM '84, Association for Computing Machinery, </booktitle> <year> (1984), </year> <pages> 248-255. </pages>
Reference: 6. <author> International Organization for Standards. </author> <title> Information processing systems Open Systems Interconnection Connection oriented transport protocol specification. </title> <journal> International Standard, </journal> <volume> no. 8073. </volume> <pages> ISO, </pages> <address> Switzerland, </address> <year> (1986). </year>
Reference-contexts: This discovery is distressing because it suggests that the mechanism reliable transport protocols depend upon to handle loss and variable round-trip times, namely the estimation of round-trip times, may not work well. The problem of round-trip time estimation also has important consequences for other reliable protocols, especially OSI TP4 <ref> [6] </ref> and DECnet NSP [4], which use round-trip time estimation schemes similar to that of TCP. (Actually, the TP4 specification uses a more primitive estimation scheme which is known to be inadequate for use over the OSI connection-less network service (CLNS) [7].
Reference: 7. <author> International Organization for Standards. </author> <title> Information processing systems Open Systems Interconnection Protocol for providing the connectionless-mode network service. </title> <journal> International Standard, </journal> <volume> no. 8473. </volume> <pages> ISO, </pages> <address> Switzerland, </address> <year> (1988). </year> <note> Final Copy 7- Final Copy </note>
Reference-contexts: important consequences for other reliable protocols, especially OSI TP4 [6] and DECnet NSP [4], which use round-trip time estimation schemes similar to that of TCP. (Actually, the TP4 specification uses a more primitive estimation scheme which is known to be inadequate for use over the OSI connection-less network service (CLNS) <ref> [7] </ref>.
Reference: 8. <institution> Internet Engineering Task Force. </institution> <note> Proceedings, </note> <year> 1990, </year> <title> and personal communication from M.K. </title> <publisher> Lottor. </publisher>
Reference-contexts: Final Copy 1- Final Copy First, there has been an explosive growth in the size and complexity of IP internetworks, b uilt by interconnecting existing subnetworks. The best known example is the Federal Research Internet, an IP internetwork that contains over 375,000 hosts and several thousand constituent networks <ref> [8] </ref>. Using IP gateways, the Internet interconnects a wide variety of networks, with very different speeds, propagation delays, service intervals, and mean times between failure. As a result of this diversity, round-trip times over the Internet are often quite variable.
Reference: 9. <author> JACOBSON, V. </author> <title> Interpacket arrival variance and mean. Letter to the TCP-IP mailing list, </title> <address> (June 15, </address> <year> 1987). </year>
Reference-contexts: TCP implementations are expected to predict future round-trip times by sampling the behavior of datagrams sent over a connection and averaging those samples into a ``smoothed'' round-trip time estimate, SRTT . (The specification has since been updated by [1] to require the prediction algorithms described in this paper and in <ref> [9] </ref>). When a datagram is sent over a TCP connection, the sender times how long it takes for it to be acknowledged, producing a sequence, S, of round-trip time samples: s 1 , s 2 , s 3 ....
Reference: 10. <author> JACOBSON, V. </author> <title> Congestion avoidance and control. </title> <booktitle> Proc. ACM SIGCOMM '88, </booktitle> <month> (August </month> <year> 1988), </year> <pages> 314-329. </pages>
Reference-contexts: This important refinement has been shown to produce dramatically improved round-trip time estimates and is now in wide-spread use. An examination of Jacob-son's work is outside the scope of this paper. A detailed discussion can be found in <ref> [10] </ref>. 2.2. Back-off Whenever a timeout occurs, virtually every TCP implementation increases the RTO by s ome factor before retransmitting the unacknowledged data. Should the new, larger RTO expire yet again before the retransmission is acknowledged, the RTO is i ncreased still further. <p> Whatever t he algorithm, TCP back-off is essential in keeping the network stable when sudden overloads cause datagrams to be dropped <ref> [10] </ref>. When the overload condition disappears, datagram loss stops and the TCPs reduce their RTO to their normal SRTT-based values. 3. <p> Datagrams lost due to noise leave the SRTT unaffected. Similar results on other networks have been achieved u sing Karn's algorithm and Jacobson's improved round-trip time estimation algorithm <ref> [10] </ref>. 3.5. Implementing Karn's Algorithm In practice, Karn's algorithm can be implemented in a handful of instructions.
Reference: 11. <author> JAIN, R. </author> <title> Divergence of timeout algorithms for packet retransmissions. </title> <booktitle> Proc. Fifth Annual Int. Phoenix Conf. on Computers and Communications, </booktitle> <address> Scottsdale, AZ, </address> <month> (March </month> <year> 1986), </year> <pages> 174-179. </pages>
Reference: 12. <author> KARN, P. R., PRICE, H., DIERSING, R. </author> <title> Packet radio in the amateur service. </title> <journal> IEEE Journal on Selected Areas in Communications, </journal> <month> (May </month> <year> 1985). </year>
Reference-contexts: Since the number of required valid samples is small, convergence is usually swift. A TCP implementation using Karn's algorithm and Mills' nonlinear filter has been in heavy use on perhaps the worst medium ever used to pass IP datagrams: amateur packet radio <ref> [12] </ref>. Despite datagram loss rates often exceeding 50%, SRTT values remain quite stable, changing only in response to true changes in round-trip time. Datagrams lost due to noise leave the SRTT unaffected.
Reference: 13. <author> MANKINS, A. </author> <title> Private communication, </title> <month> (July </month> <year> 1989). </year>
Reference-contexts: A proposal to adopt a round-trip time estimation algorithm like the one discussed below is currently working its way though the OSI approval process <ref> [13] </ref>.) Concern about the accuracy of estimated round-trip times has led to some interesting research into reliability mechanisms which are less dependent on round-trip estimates [2,23]. The authors, however, have taken a different approach that tries to improve the data used to compute round-trip time estimates.
Reference: 14. <author> MILLS, D. </author> <title> Internet delay experiments; RFC889. Internet Requests for Comments, no. </title> <type> 889. </type> <institution> SRI International, Menlo Park, Calif., </institution> <month> (December </month> <year> 1983). </year>
Reference-contexts: One should also observe that the values of the constants a and b have important effects on the behavior of the algorithm. The value of a controls how rapidly the SRTT adjusts to changing round-trip times. In 1983, Mills <ref> [14] </ref> measured network round-trip times and recommended that there be two values for a , depending on the relative values of the sample, s i , a nd SRTT i .
Reference: 15. <author> MORRIS, R.J.T. </author> <title> Fixing timeout intervals for lost packet detection in computer communication networks. </title> <booktitle> AFIPS Conf. Proc., 1979 National Computer Conference. </booktitle> <publisher> AFIPS Press, </publisher> <address> Montvale, Jew Jersey, </address> <year> (1979), </year> <pages> 887-891. </pages>
Reference-contexts: Choosing a value for b is harder because it has important and conicting effects on individual user throughput and overall network efficiency <ref> [15] </ref>. To achieve optimal throughput b should be only a little greater than 1. This keeps the RTO very close to the SRTT and ensures that datagram loss will be quickly detected.
Reference: 16. <author> NAGLE, J. </author> <title> Congestion control in IP/TCP networks. </title> <journal> ACM Computer Communications Review, </journal> <volume> Vol. 14, No. 4, </volume> <month> (October </month> <year> 1984), </year> <pages> 11-17. </pages>
Reference: 17. <author> PERRY, D.G. </author> <title> Congestion in the ARPANET. Letter to the TCP-IP Mailing List, </title> <month> (October 1, </month> <year> 1986). </year>
Reference: 18. <author> POSTEL, J. (Ed). </author> <title> Internet protocol; RFC791. ARPANET Working Group Requests for Comments, no. </title> <type> 791. </type> <institution> SRI International, Menlo Park, Calif., </institution> <month> (September </month> <year> 1981). </year>
Reference: 19. <author> POSTEL, J. (Ed). </author> <title> Internet control message protocol; RFC792. Internet Requests for Comments, no. </title> <type> 792. </type> <institution> SRI International, Menlo Park, Calif., </institution> <month> (September </month> <year> 1981). </year>
Reference: 20. <author> POSTEL, J. (Ed). </author> <title> Transmission control protocol; RFC793. Internet Requests for Comments, no. </title> <type> 793. </type> <institution> SRI International, Menlo Park, Calif., </institution> <month> (September </month> <year> 1981). </year>
Reference-contexts: The authors, however, have taken a different approach that tries to improve the data used to compute round-trip time estimates. In this paper we present an analysis of this work. 2. The TCP Algorithm According to the original TCP specification <ref> [20] </ref> TCP implementations are expected to predict future round-trip times by sampling the behavior of datagrams sent over a connection and averaging those samples into a ``smoothed'' round-trip time estimate, SRTT . (The specification has since been updated by [1] to require the prediction algorithms described in this paper and in <p> To minimize retransmissions, b should be chosen such that the RTO will be a high upper limit on the round-trip times. The original TCP specification <ref> [20] </ref> recommended a value of b = 2 as a reasonable balance. More recently, Van Jacobson has developed a refinement of the TCP algorithm that dynamically computes the variance instead of using a fixed b [9,10].
Reference: 21. <author> VELTEN, D., HINDEN, R., SAX, J. </author> <title> Reliable data protocol; RFC908. Internet Requests for Comments, no. </title> <type> 908. </type> <institution> SRI International, Menlo Park, Calif., </institution> <month> (July </month> <year> 1984). </year>
Reference: 22. <author> WATSON, R.W. </author> <title> Timer-Based mechanisms in reliable transport protocol connection management, Computer Networks, </title> <publisher> North-Holland Publishing Company (1981), </publisher> <pages> 47-56. </pages>
Reference: 23. <author> ZHANG, L. </author> <title> Why TCP timers don't work well. </title> <booktitle> Proc. ACM SIGCOMM '86, Association for Computing Machinery, </booktitle> <month> (August </month> <year> 1986), </year> <pages> 397-405. </pages> <note> Final Copy 8- Final Copy </note>
References-found: 23

