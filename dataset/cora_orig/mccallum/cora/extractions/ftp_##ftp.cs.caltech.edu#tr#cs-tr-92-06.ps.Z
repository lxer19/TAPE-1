URL: ftp://ftp.cs.caltech.edu/tr/cs-tr-92-06.ps.Z
Refering-URL: ftp://ftp.cs.caltech.edu/tr/INDEX.html
Root-URL: http://www.cs.caltech.edu
Title: A Critique of Adaptive Routing  
Phone: 12 12 12 12 12 12 12 12 123 123 123 123 123 123 123 123 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 123 123 123 123 123 123 123 123 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12  91125  
Author: by Michael J. Pertel 
Address: Pasadena, CA  
Affiliation: Department of Computer Science California Institute of Technology  
Note: C SUBMICRON SYSTEMS ARCHITECTURE PROJECT  
Web: HCETLA  
Abstract: Caltech Computer Science Technical Report Caltech-CS-TR-92-06 June 18, 1992 The research described in this report was sponsored by the Defense Advanced Research Projects Agency. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> Ngai JY: </author> <title> A Framework for Adaptive Routing in Multicomputer Networks. </title> <institution> Caltech Computer Science Technical Report: CS-TR-89-09. </institution> <year> 1989. </year>
Reference-contexts: 1 Introduction Adaptive routing <ref> [1] </ref> is an alluring idea. Although there are usually many minimum-distance paths between two nodes in a multicomputer message-passing network, the dimension-order routing used in existing networks [2] always routes a packet from a given source to a given destination along the same path. <p> The most attractive feature of adaptive routing was its promise to double network throughput. Previous simulation studies <ref> [1] </ref> indicated that networks using dimension-order routing could utilize only 50% of their bisection bandwidth, whereas adaptive-routing networks could utilize 90% of their bisection bandwidth. <p> Since AR allows a packet to choose from more than one path through the network, "fault tolerance" is sometimes listed among the virtues of AR. When actual studies of the fault tolerance of AR have been done <ref> [1] </ref>, the results for realistic topologies [6] have been poor. AR does not provide redundancy for all paths; this fact alone is sufficient to discredit claims that AR provides fault tolerance.
Reference: [2] <author> Seitz CL: </author> <booktitle> Chapter 5 "Multicomputers," </booktitle> <pages> pp. 131-200, </pages> <editor> in Hoare CAR (ed): </editor> <title> Developments in Concurrency and Communication. </title> <publisher> Addison-Wesley, </publisher> <year> 1990. </year>
Reference-contexts: 1 Introduction Adaptive routing [1] is an alluring idea. Although there are usually many minimum-distance paths between two nodes in a multicomputer message-passing network, the dimension-order routing used in existing networks <ref> [2] </ref> always routes a packet from a given source to a given destination along the same path. <p> The 2D meshes exhibit lower injection and cut-through latency than the 3D meshes without reference to spooling latency. It is well known that, for fixed wire bisection, a low-dimensional mesh can have lower latency than a high-dimensional mesh <ref> [2, 8] </ref>; however, this is a consequence of the low-dimensional mesh having wider channels, thus less spooling latency. It was thought that the cut-through latency increased with radix (decreased with dimension) while the spooling latency decreased with radix (increased with dimension). <p> It was thought that the cut-through latency increased with radix (decreased with dimension) while the spooling latency decreased with radix (increased with dimension). The competition of these two effects formed the basis for computing the latency-optimal dimension <ref> [2, 8] </ref>.
Reference: [3] <author> Pertel M, Seitz C: </author> <title> x4.8 "Implementing Adaptive Routing in Mul-ticomputer Networks," </title> <note> p. 13, in Caltech Computer Science Technical Report: CS-TR-89-12 Semiannual Technical Report, </note> <year> 1989. </year>
Reference-contexts: Improving throughput was the primary motivation for adaptive routing because throughput is more important than latency, and claims for traffic diffusion and fault tolerance had not been demonstrated. 1 A VLSI implementation of adaptive routing was undertaken <ref> [3] </ref> with the belief that adaptive routing would increase throughput, diffuse hot-spots, and improve fault tolerance. In preparation for making a detailed design, an architecture [4] and simulators [5] were developed to reproduce, refine, and extend the earlier studies.
Reference: [4] <author> Pertel MJ, Seitz CL: </author> <title> x4.9 "A Silicon Architecture for Adaptive Cut-Through Routing," pp. </title> <type> 17-19, </type> <institution> in Caltech Computer Science Technical Report: CS-TR-90-14 Submicron Systems Architecture Project, </institution> <year> 1990. </year> <month> 18 </month>
Reference-contexts: In preparation for making a detailed design, an architecture <ref> [4] </ref> and simulators [5] were developed to reproduce, refine, and extend the earlier studies. The architecture was sufficiently general that it could implement either dimension-order routing (DOR) or adaptive routing (AR). <p> Latency: DOR gives significantly lower latency than AR for heavy traffic. It is for heavy traffic (communication-limited computations) that network performance is critical. The difference in latency is small for light traffic. 3. Simplicity: VLSI implementation of DOR [9] is considerably simpler than implementation of AR <ref> [4] </ref>. (a) Area: Dimension-order routers are smaller than adaptive routers and require only a tiny fraction ( 3%) of the area of a single-chip multicomputer node [6]. 11 Rather than making the packets longer to compensate for narrower channels, more packets could be used to send each message.
Reference: [5] <author> Pertel MJ: </author> <title> A Simple Simulator for Multicomputer Routing Net--works. </title> <institution> Caltech Computer Science Technical Report: CS-TR-92-04. </institution> <year> 1992. </year>
Reference-contexts: In preparation for making a detailed design, an architecture [4] and simulators <ref> [5] </ref> were developed to reproduce, refine, and extend the earlier studies. The architecture was sufficiently general that it could implement either dimension-order routing (DOR) or adaptive routing (AR). <p> Such an approach requires no special hardware and can be used in existing machines. 4 different paths makes it harder to guarantee that a packet will be delivered in a faulty network using AR. 2 Simulation Results This section presents measurements of network latency obtained from a simulator <ref> [5] </ref>. The simulation parameters are (d; R; L; A), where d is the mesh dimension, R is the mesh radix, L is the packet length in flits, 2 and A is the applied load. <p> Cut-through latency is the head-to-head transmission delay. Since the injection queue is just another input FIFO, injection latency and cut-through latency are not separated. Spooling latency refers to the L-cycle head-to-tail delay. The basic simulator has been described in a previous report <ref> [5] </ref>, so only minimal discussion is included here. Results are reported for two simulator variants: SNS (which uses DOR) and ANS (which uses AR). The versions of SNS and ANS used to produce the data for this report differ from those previously reported [5] in some minor respects. <p> has been described in a previous report <ref> [5] </ref>, so only minimal discussion is included here. Results are reported for two simulator variants: SNS (which uses DOR) and ANS (which uses AR). The versions of SNS and ANS used to produce the data for this report differ from those previously reported [5] in some minor respects. The main () function has been changed to wait for the throughput to con verge before waiting for the latency to converge. Also, a measurement of the average queue length (AQLEN) has been added. <p> AR, and it increases with dimension. 7 A packet can be spread over multiple nodes when it cannot fit into a single FIFO. 8 With the FIFO length equal to the packet length, the performance is the same as for infinite buffering for a 128 fi 128 mesh with A&lt;80% <ref> [5] </ref>. 9 If T were proportional to average distance, it would be proportional to d. 12 DOR (SNS) AR (ANS) R A T AQLEN T AQLEN 4 .1 8.90 0.01 7.92 0.01 4 .5 74.7 0.20 65.8 0.21 4 .7 467 1.74 1 1 8 .3 32.8 0.03 22.9 0.02 8
Reference: [6] <editor> Seitz CL et al: </editor> <booktitle> x2.1 "The Mosaic Project," </booktitle> <pages> pp. 2-10, </pages> <note> in Caltech Computer Science Technical Report: CS-TR-91-10 Semiannual Technical Report, </note> <year> 1991. </year>
Reference-contexts: The simulators were significantly faster and more flexible than simulators used in earlier studies, and a wider range of network topologies, sizes, and characteristics were simulated. In particular, it was possible to compare DOR and AR for realistic network sizes <ref> [6] </ref> while keeping everything but the routing algorithm fixed. <p> Since AR allows a packet to choose from more than one path through the network, "fault tolerance" is sometimes listed among the virtues of AR. When actual studies of the fault tolerance of AR have been done [1], the results for realistic topologies <ref> [6] </ref> have been poor. AR does not provide redundancy for all paths; this fact alone is sufficient to discredit claims that AR provides fault tolerance. <p> This research is part of a large multicomputer design project called the Mosaic <ref> [6] </ref>. The Mosaic is a 128fi128 mesh of single-chip multicomputer nodes; each node contains an 11 MIPS processor, 64 KB memory, and asynchronous DOR network router with 60 MB/s channels. <p> The Mosaic is a 128fi128 mesh of single-chip multicomputer nodes; each node contains an 11 MIPS processor, 64 KB memory, and asynchronous DOR network router with 60 MB/s channels. Since the 2D mesh is the topology used in state-of-the-art machines <ref> [6, 11, 12] </ref>, it is the most appropriate topology for comparing AR to DOR. 5 The 2D simulation results are shown in Table 3. T and AQLEN are listed as "1" when the latency and queue lengths did not converge, i.e., when they grew without bound. <p> The difference in latency is small for light traffic. 3. Simplicity: VLSI implementation of DOR [9] is considerably simpler than implementation of AR [4]. (a) Area: Dimension-order routers are smaller than adaptive routers and require only a tiny fraction ( 3%) of the area of a single-chip multicomputer node <ref> [6] </ref>. 11 Rather than making the packets longer to compensate for narrower channels, more packets could be used to send each message.
Reference: [7] <author> Boden N: </author> <title> Runtime Systems for Fine-Grain Multicomputers. </title> <institution> Cal-tech Computer Science Technical Report: CS-TR-92-10. </institution> <type> (Ph.D. thesis, </type> <note> in preparation) </note>
Reference-contexts: */ if (p-&gt;dest == n) return out==0; /* p at dest? */ pc=COORD (p-&gt;dest,dim), nc=COORD (n,dim); if (nc&lt;pc) return out==SUCC (dim); if (nc&gt;pc) return out==PRED (dim); return 0; /* not profitable */ - Except where otherwise noted, the simulations use packet length L=32 flits, which is realistic for fine-grained computations <ref> [7, 8] </ref>. For comparison, L=8 and L=128 results are presented in an appendix. The simulations were run using ACCURACY=.03, which is more than sufficient to show that DOR is preferable to AR. The execution times for the simulations would increase by an order of magnitude if ACCURACY=.01 were used instead.
Reference: [8] <author> Dally WJ: </author> <title> A VLSI Architecture for Concurrent Data Structures. </title> <publisher> Kluwer Academic Publishers, </publisher> <year> 1987. </year>
Reference-contexts: */ if (p-&gt;dest == n) return out==0; /* p at dest? */ pc=COORD (p-&gt;dest,dim), nc=COORD (n,dim); if (nc&lt;pc) return out==SUCC (dim); if (nc&gt;pc) return out==PRED (dim); return 0; /* not profitable */ - Except where otherwise noted, the simulations use packet length L=32 flits, which is realistic for fine-grained computations <ref> [7, 8] </ref>. For comparison, L=8 and L=128 results are presented in an appendix. The simulations were run using ACCURACY=.03, which is more than sufficient to show that DOR is preferable to AR. The execution times for the simulations would increase by an order of magnitude if ACCURACY=.01 were used instead. <p> The 2D meshes exhibit lower injection and cut-through latency than the 3D meshes without reference to spooling latency. It is well known that, for fixed wire bisection, a low-dimensional mesh can have lower latency than a high-dimensional mesh <ref> [2, 8] </ref>; however, this is a consequence of the low-dimensional mesh having wider channels, thus less spooling latency. It was thought that the cut-through latency increased with radix (decreased with dimension) while the spooling latency decreased with radix (increased with dimension). <p> It was thought that the cut-through latency increased with radix (decreased with dimension) while the spooling latency decreased with radix (increased with dimension). The competition of these two effects formed the basis for computing the latency-optimal dimension <ref> [2, 8] </ref>. <p> The misunderstandings that were incidentally exposed by this adaptive-routing research impact other aspects of network design. For example, it is clear that the "optimal" dimension for a routing network is not determined by minimizing the expression for congestion-free latency <ref> [8] </ref>. Networks of different dimensionality and equal cost do not have the same throughput, so the dimension should be chosen to maximize throughput rather than minimize latency. The congestion-free latency formula is both quantitatively and qualitatively incorrect, even for light traffic.
Reference: [9] <author> Flaig CM: </author> <title> VLSI Mesh Routing Systems. </title> <institution> Caltech Computer Science Technical Report: 5241:TR:87. </institution> <year> 1987. </year>
Reference-contexts: Latency: DOR gives significantly lower latency than AR for heavy traffic. It is for heavy traffic (communication-limited computations) that network performance is critical. The difference in latency is small for light traffic. 3. Simplicity: VLSI implementation of DOR <ref> [9] </ref> is considerably simpler than implementation of AR [4]. (a) Area: Dimension-order routers are smaller than adaptive routers and require only a tiny fraction ( 3%) of the area of a single-chip multicomputer node [6]. 11 Rather than making the packets longer to compensate for narrower channels, more packets could be
Reference: [10] <author> Pertel MJ: </author> <title> Mesh Distance Formulae. </title> <institution> Caltech Computer Science Technical Report: CS-TR-92-05. </institution> <year> 1992. </year>
Reference: [11] <editor> Seitz CL et al: </editor> <booktitle> "The Architecture and Programming of the Ame-tek Series 2010 Multicomputer," in: Proceedings of the Third Conference on Hypercube Concurrent Computers and Applications, </booktitle> <publisher> ACM Press, </publisher> <year> 1988. </year>
Reference-contexts: The Mosaic is a 128fi128 mesh of single-chip multicomputer nodes; each node contains an 11 MIPS processor, 64 KB memory, and asynchronous DOR network router with 60 MB/s channels. Since the 2D mesh is the topology used in state-of-the-art machines <ref> [6, 11, 12] </ref>, it is the most appropriate topology for comparing AR to DOR. 5 The 2D simulation results are shown in Table 3. T and AQLEN are listed as "1" when the latency and queue lengths did not converge, i.e., when they grew without bound.
Reference: [12] <author> Lillevik SL: </author> <title> "The Touchstone 30 Gigaflop DELTA Prototype," </title> <booktitle> in Sixth Distributed Memory Computing Conference Proceedings, </booktitle> <pages> pp. 671-677. </pages> <publisher> IEEE Computer Society Press, </publisher> <year> 1991. </year>
Reference-contexts: The Mosaic is a 128fi128 mesh of single-chip multicomputer nodes; each node contains an 11 MIPS processor, 64 KB memory, and asynchronous DOR network router with 60 MB/s channels. Since the 2D mesh is the topology used in state-of-the-art machines <ref> [6, 11, 12] </ref>, it is the most appropriate topology for comparing AR to DOR. 5 The 2D simulation results are shown in Table 3. T and AQLEN are listed as "1" when the latency and queue lengths did not converge, i.e., when they grew without bound.
Reference: [13] <author> Pertel MJ: </author> <title> The Optimal Dimension for Multicomputer Routing Networks. </title> <note> Caltech Computer Science Technical Report: CS-TR-92-09. (in preparation) </note>
Reference-contexts: Observation 9 Differences in latency between DOR and AR reflect differences in average queue length. 5 For planar wiring, 2D networks are throughput optimal <ref> [13] </ref>. 6 In an empty network, T cut = D + 1 ) T = D + 1, for both AR and DOR. 9 DOR (SNS) AR (ANS) R A T AQLEN T AQLEN 4 .1 6.31 0.00 6.17 0.00 4 .5 54.7 0.44 52.9 0.43 4 .65 184 0.44 1 <p> However, in reality, a 1D network is much more expensive than a 2D network with the same bisection bandwidth. Wiring area is a much more realistic cost metric than bisection bandwidth, and for a given wiring area, the highest bisection bandwidth is achieved by using a 2D network <ref> [13] </ref>. Therefore, large-N machines (e.g., N=16384) have large radices (e.g., R=128), and for large radices DOR outperforms AR a fortiori. As noted earlier, the simulators used for this report give only a crude measure of the average queue length. AQLEN is the network-average queue length when the simulator terminated. <p> For a fixed layout area, a 2D network can be given more bisection bandwidth than a 3D network <ref> [13] </ref>. 14 to have bisection R W . <p> The congestion-free latency formula is both quantitatively and qualitatively incorrect, even for light traffic. A future report will show that 2D networks are throughput-optimal for fixed area <ref> [13] </ref>. 17 Another future report will elucidate the mechanism responsible for the superior performance of DOR. It is easy to understand why adaptive routing does not outperform dimension-order routing.
Reference: [14] <author> Pertel MJ: </author> <title> Multicomputer Routing Network Throughput. </title> <note> Caltech Computer Science Technical Report: (in preparation) 19 </note>
Reference-contexts: If the utilizations of the bisection channels are independently monitored, then U max is seen to be the DOR value multiplied by the ratio of the mean to the peak of the AR bisection-utilization profile <ref> [14] </ref>. Note that, even if an AR implementation could be devised that performs as well as DOR, AR cannot beat DOR. <p> However, this does not explain why DOR performs better than adaptive routing. The reason why adaptive routing does not perform as well as dimension-order routing is that AR does not utilize all the bisection channels evenly. Simulation results proving this explanation of AR's inferior performance will be presented in <ref> [14] </ref>. It is important to remember that, even though a different AR implementation might perform as well as DOR, AR cannot outperform DOR. 5 Acknowledgements The research described in this report was sponsored by the Defense Advanced Research Projects Agency.
References-found: 14

