URL: http://www.graphics.cornell.edu/pubs/1994/SAG94.ps.gz
Refering-URL: http://www.graphics.cornell.edu/pubs/1994/SAG94.html
Root-URL: 
Title: A Clustering Algorithm for Radiosity in Complex Environments  
Author: Brian Smits James Arvo Donald Greenberg 
Keyword: CR Categories and Subject Descriptors: I.3.7 [Computer Graphics]: Three-Dimensional Graphics and Realism. Additional Key Words: clustering, error bounds, hierarchical ra-diosity, global illumination.  
Affiliation: Program of Computer Graphics Cornell University  
Abstract: We present an approach for accelerating hierarchical radiosity by clustering objects. Previous approaches constructed effective hierarchies by subdividing surfaces, but could not exploit a hierarchical grouping on existing surfaces. This limitation resulted in an excessive number of initial links in complex environments. Initial linking is potentially the most expensive portion of hierarchical radiosity algorithms, and constrains the complexity of the environments that can be simulated. The clustering algorithm presented here operates by estimating energy transfers between collections of objects while maintaining reliable error bounds on each transfer. Two methods of bounding the transfers are employed with different tradeoffs between accuracy and time. In contrast with the O(s 2 ) time and space complexity of the initial linking in previous hierarchical radiosity algorithms, the new methods have complexities of O(s log s) and O(s) for both time and space. Using these methods we have obtained speedups of two orders of magnitude for environments of moderate complexity while maintaining comparable accuracy. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> ARVO, J., AND KIRK, D. </author> <title> Fast ray tracing by ray classification. </title> <booktitle> Computer Graphics 21, </booktitle> <month> 4 (July </month> <year> 1987), </year> <pages> 55-64. </pages>
Reference-contexts: The hierarchy of clusters presented in this paper were fairly straightforward modifications to traditional bounding volume hierarchies. Our current research shows that it is beneficial to build 5D hierarchies in the spirit of <ref> [1] </ref>, to bound direction of the patch normals as well as position. This can be used to obtain tighter bounds on the transfers since patch orientations are constrained.
Reference: [2] <author> CHEN, S. E., RUSHMEIER, H. E., MILLER, G., AND TURNER, D. </author> <title> A progressive multi-pass method for global illumination. </title> <booktitle> In Proceedings of SIGGRAPH'91 (Las Vegas, </booktitle> <address> Nevada, July 28-August 2, </address> <year> 1991) </year> <month> (July </month> <year> 1991), </year> <title> vol. </title> <booktitle> 25, ACM, </booktitle> <pages> pp. 165-174. </pages>
Reference-contexts: 1 Introduction Recent trends in realistic image synthesis have been towards a separation of the rendering process into two or more stages <ref> [10, 2, 9] </ref>. One of these stages solves for the global energy equilibrium throughout the environment. This process can be very expensive and its complexity grows rapidly with the number of objects in the environment. These computational demands generally limit the level of detail of environments that can be simulated.
Reference: [3] <author> COHEN, M. F., GREENBERG, D. P., IMMEL, D. S., AND BROCK, P. J. </author> <title> An efficient radiosity approach for realistic image synthesis. </title> <journal> IEEE Computer Graphics and Applications 6, </journal> <month> 2 (March </month> <year> 1986), </year> <pages> 26-35. </pages>
Reference-contexts: The challenge is to reduce the computational complexity of this process. In one of the early approaches, Cohen et al. <ref> [3] </ref> reduced the number of interactions by imposing a two-level hierarchy of patches and elements on the environment. Although the number of interactions was reduced, the approach was still O (p 2 ) in the number of elements in the environment.
Reference: [4] <author> GOLDSMITH, J., AND SALMON, J. </author> <title> Automatic creation of object hierarchies for ray tracing. </title> <journal> IEEE Computer Graphics and Applications 7, </journal> <month> 5 (May </month> <year> 1987), </year> <pages> 14-20. </pages>
Reference-contexts: The same hierarchy can be used to identify clusters. For simplicity, each object should appear in only one cluster. Otherwise, some method of eliminating copies of objects is needed to prevent an object from contributing to a cluster twice. For these reasons we chose to use bounding volume hierarchies <ref> [4] </ref> instead of octrees to generate our hierarchy of clusters. We use axis-aligned rectangular bounding boxes for both the clusters and for ray casting. The HR algorithm can be combined with a bounding volume hierarchy to perform clustering fairly easily.
Reference: [5] <author> GORAL, C. M., TORRANCE, K. E., GREENBERG, D. P., AND BATTAILE, B. </author> <title> Modeling the interaction of light between diffuse surfaces. </title> <booktitle> Computer Graphics 18, </booktitle> <month> 3 (July </month> <year> 1984), </year> <pages> 213-222. </pages>
Reference-contexts: Furthermore, a solution to this problem must be computed before anything useful can be displayed. Radiosity algorithms attempt to solve the global illumination problem by discretizing the environment and solving a linear system to approximate the transfer of energy between the elements <ref> [5] </ref>. For complex environments, the large number of interactions is expensive fl 580 ETC Building, Cornell University, Ithaca, NY 14853 E-mail: -bes | arvo | dpg-@graphics.cornell.edu to compute, as each requires form factor and visibility calculations. The challenge is to reduce the computational complexity of this process.
Reference: [6] <author> GREENGARD, L. </author> <title> The Rapid Evaluation of Potential Fields in Particle Systems. </title> <publisher> MIT Press, </publisher> <address> Cambridge, Massachusetts, </address> <year> 1988. </year>
Reference-contexts: Although the number of interactions was reduced, the approach was still O (p 2 ) in the number of elements in the environment. Currently, the best radiosity algorithms are analogous to linear-time algorithms for charged particle simulation <ref> [6] </ref>. These algorithms work by clustering particles together so that the mutual effect of well-separated collections can be approximated with a single interaction. Hanrahan et al. [7] used a similar strategy to reduce the number of interactions needed for a radiosity solution. <p> This structuring results in a binary tree with a depth of log s. The total number of clusters at level d is 2 d and each cluster at level d has s/2 d patches. Now, following Hanrahan et al. [7] and Greengard <ref> [6] </ref>, we assume each cluster is linked to a constant c 1 number of other clusters resulting in c 1 2 d ff-links on level d. We can also assume that each cluster is linked to other clusters at approximately the same level in the tree.
Reference: [7] <author> HANRAHAN, P., SALZMAN, D., AND AUPPERLE, L. </author> <title> A rapid hierarchical radiosity algorithm. </title> <booktitle> Computer Graphics 25, </booktitle> <month> 4 (July </month> <year> 1991), </year> <pages> 197-206. </pages>
Reference-contexts: Currently, the best radiosity algorithms are analogous to linear-time algorithms for charged particle simulation [6]. These algorithms work by clustering particles together so that the mutual effect of well-separated collections can be approximated with a single interaction. Hanrahan et al. <ref> [7] </ref> used a similar strategy to reduce the number of interactions needed for a radiosity solution. A hierarchical structure was imposed on each surface in an environment and interactions were allowed to occur between the appropriate levels on each. <p> Such an underestimate usually will not prevent further subdivision, however, and the problem diminishes as the two patches approach the same size. Bounding the error in the transfer of energy and only computing interactions to a given accuracy results in a linear number of interactions <ref> [7] </ref>. The transfer of energy between the two surfaces can then be determined using any of the various form-factor methods. The main deficiency of HR is that the coarsest representation is the initial surfaces. By collecting a group of these surfaces together, we obtain an even coarser representation. <p> This structuring results in a binary tree with a depth of log s. The total number of clusters at level d is 2 d and each cluster at level d has s/2 d patches. Now, following Hanrahan et al. <ref> [7] </ref> and Greengard [6], we assume each cluster is linked to a constant c 1 number of other clusters resulting in c 1 2 d ff-links on level d. We can also assume that each cluster is linked to other clusters at approximately the same level in the tree. <p> We use axis-aligned rectangular bounding boxes for both the clusters and for ray casting. The HR algorithm can be combined with a bounding volume hierarchy to perform clustering fairly easily. The bounds on the error given earlier fit naturally into the brightness-weighted refinement scheme of Hanrahan et al. <ref> [7] </ref>. This approach first links the surfaces together, then performs several iterations of energy propagation and refinement of the system. The error tolerance is gradually reduced until the final error tolerance is reached. This approach is a variation on the multigridding method for iteratively solving systems of linear equations.
Reference: [8] <author> KOK, A. J. </author> <title> Grouping of patches in progressive radiosity. </title> <booktitle> In Proceedings of the Fourth Eurographics Workshop on Rendering (Paris, </booktitle> <address> France, </address> <month> June 14-16, </month> <year> 1993) </year> <month> (June </month> <year> 1993), </year> <pages> pp. 221-231. </pages>
Reference-contexts: One disadvantage of this approach is that it is not automatic; appropriate clusters must be specified and approximated in advance. Also, no hierarchy is maintained, so the coarsest representation used by the algorithm is that of the selected clusters. Another clustering approach was proposed by Kok <ref> [8] </ref>, which extended progressive radiosity so that patches could transfer energy to a) conventional HR links, b) an ff-link requiring linear time and space, and c) a fi-link requiring constant time and space. groups of surfaces at once.
Reference: [9] <author> LISCHINSKI, D., TAMPIERI, F., AND GREENBERG, D. P. </author> <title> Combining hierarchical radiosity and discontinuity meshing. </title> <booktitle> In Computer Graphics Proceedings (1993), Annual Conference Series, ACM SIGGRAPH, </booktitle> <pages> pp. 199-208. </pages>
Reference-contexts: 1 Introduction Recent trends in realistic image synthesis have been towards a separation of the rendering process into two or more stages <ref> [10, 2, 9] </ref>. One of these stages solves for the global energy equilibrium throughout the environment. This process can be very expensive and its complexity grows rapidly with the number of objects in the environment. These computational demands generally limit the level of detail of environments that can be simulated. <p> Often large numbers of interactions are insignificant and can be treated very coarsely or ignored altogether <ref> [9] </ref>. In this section we introduce a more efficient but cruder method for bounding the interaction between two clusters. We do this using a very simple bound on the kernel k (x, y) which we denote k d (x, y), k (x, y) k (x, y) jjx yjj 2 . <p> This can be done by Gouraud-shading the surfaces, however this is very prone to artifacts in hierarchical systems [12]. A better approach is to use the techniques of Lischinki et al. <ref> [9] </ref> and create a separate mesh for display purposes, using the information obtained by the global solution, and recomputing some parts of the illumination on each surface. Our approach is based on this method as well as on the method proposed by Reichert [10].
Reference: [10] <author> REICHERT, M. C. </author> <title> A two-pass radiosity method driven by lights and viewer position. </title> <type> Master's thesis, </type> <institution> Program of Computer Graphics, Cornell University, </institution> <address> Ithaca, New York, </address> <month> January </month> <year> 1992. </year>
Reference-contexts: 1 Introduction Recent trends in realistic image synthesis have been towards a separation of the rendering process into two or more stages <ref> [10, 2, 9] </ref>. One of these stages solves for the global energy equilibrium throughout the environment. This process can be very expensive and its complexity grows rapidly with the number of objects in the environment. These computational demands generally limit the level of detail of environments that can be simulated. <p> Our approach is based on this method as well as on the method proposed by Reichert <ref> [10] </ref>. Given a view, we approximate the intensity with the function s log (s). by reconstructing the radiance function at each visible point in the environment.
Reference: [11] <author> RUSHMEIER, H. E., PATTERSON, C., AND VEERASAMY, A. </author> <title> Geometric simplification for indirect illumination calculations. </title> <booktitle> Graphics Interface `93 (May 1993), </booktitle> <pages> 227-236. </pages>
Reference-contexts: Because it attempts to compute the radiance very coarsely in some regions of the environment, some means of clustering is needed if it is to do less work than that required for the initial linking. An approach to clustering was developed by Rushmeier et al. <ref> [11] </ref> in which the effect of complex groups of surfaces is approximated by simpler representations resembling BRDF's obtained through Monte Carlo sampling. One disadvantage of this approach is that it is not automatic; appropriate clusters must be specified and approximated in advance.
Reference: [12] <author> SMITS, B., ARVO, J., AND SALESIN, D. </author> <title> An importance-driven radiosity algorithm. </title> <booktitle> Computer Graphics 26, </booktitle> <month> 4 (July </month> <year> 1992), </year> <pages> 273-282. </pages>
Reference-contexts: Global visibility [13] is effective for computing the initial links for environments in which only a small number of cells see each other. Many environments, however, also contain large collections of objects that are mutually visible. In such cases, global visibility algorithms do not suffice. Importance <ref> [12] </ref> is another method that reduces computation in areas that have little or no noticeable effect on the surfaces of interest. This approach is effective once the initial interactions have been computed, but does nothing to reduce the time of the initial linking phase. <p> HR then allows surfaces interact at a level in the hierarchy where all the interactions have an error less than some bound. This requires bounding the error in the transfer between two patches, which can be done by bounding the difference between the maximum and minimum transfers <ref> [12] </ref>. The maximum transfer can be computed by finding the maximum value of k (x, y) over all points on the two patches and then integrating the product of this with the radiance of the source. <p> The maximum and minimum values of k are computed by taking a set of jittered samples on both the source and receiver and computing the maximum and minimum values of the kernel between all pairs of samples <ref> [12] </ref>. Occasionally, this approach greatly underestimates the maximum, such as when a small patch is very close to a large patch. Such an underestimate usually will not prevent further subdivision, however, and the problem diminishes as the two patches approach the same size. <p> Intuitively, this is because large surfaces will often have a much more significant effect on the local pass than the smaller ones. Another useful norm is obtained from the importance weighting <ref> [12] </ref>. This corresponds to a norm very similar to the 1-norm; rather than weighting each receiver by the area, the receiver is weighted by its importance. 5 Implementation 5.1 Clustering Most ray tracing acceleration techniques collect nearby objects together into groups. <p> This can be done by Gouraud-shading the surfaces, however this is very prone to artifacts in hierarchical systems <ref> [12] </ref>. A better approach is to use the techniques of Lischinki et al. [9] and create a separate mesh for display purposes, using the information obtained by the global solution, and recomputing some parts of the illumination on each surface. <p> Although we have not noticed any serious problems as a result of this approximation, analytic bounds on these transfers would produce guaranteed bounds. Guaranteed bounds on transfers make it possible to examine the global error in the solution. As mentioned in <ref> [12] </ref> bounds on transfers between surfaces do not immediately provide a bound on the total error in the solution. Acknowledgments We would like to thank Dani Lischinski for discussions on complexity and for helpful comments on the paper.
Reference: [13] <author> TELLER, S., AND HANRAHAN, P. </author> <title> Global visibility for illumination computations. </title> <booktitle> In Computer Graphics Proceedings (1993), Annual Conference Series, ACM SIGGRAPH, </booktitle> <pages> pp. 239-246. </pages>
Reference-contexts: Because complexity in environments is often a result of replacing large surfaces with many small surfaces, this inability to group objects together is a major obstacle in conventional HR algorithms. Several methods have been developed to increase the efficiency of HR algorithms for complex environments. Global visibility <ref> [13] </ref> is effective for computing the initial links for environments in which only a small number of cells see each other. Many environments, however, also contain large collections of objects that are mutually visible. In such cases, global visibility algorithms do not suffice.
References-found: 13

