URL: http://www.cis.ohio-state.edu/rfc/rfc1584.ps
Refering-URL: http://www.cis.ohio-state.edu/rfc/
Root-URL: 
Title: Moy [Page 1] Multicast Extensions to OSPF Status of this  
Date: March 1994  
Note: Network Working Group J. Moy Request for Comments: 1584 Proteon, Inc. Category: Standards Track  Please send comments to mospf@gated.cornell.edu.  
Pubnum: Memo  
Abstract: This document specifies an Internet standards track protocol for the Internet community, and requests discussion and suggestions for improvements. Please refer to the current edition of the Internet Official Protocol Standards (STD 1) for the standardization state and status of this protocol. Distribution of this memo is unlimited. Abstract This memo documents enhancements to the OSPF protocol enabling the routing of IP multicast datagrams. In this proposal, an IP multicast packet is routed based both on the packets source and its multicast destination (commonly referred to as source/destination routing). As it is routed, the multicast packet follows a shortest path to each multicast destination. During packet forwarding, any commonality of paths is exploited; when multiple hosts belong to a single multicast group, a multicast packet will be replicated only when the paths to the separate hosts diverge. OSPF, a link-state routing protocol, provides a database describing the Autonomous Systems topology. A new OSPF link state advertisement is added describing the location of multicast destinations. A multicast packets path is then calculated by building a pruned shortest-path tree rooted at the packets IP source. These trees are built on demand, and the results of the calculation are cached for use by subsequent packets. The multicast extensions are built on top of OSPF Version 2. The extensions have been implemented so that a multicast routing capability can be introduced piecemeal into an OSPF Version 2 routing domain. Some of the OSPF Version 2 routers may run the multicast extensions, while others may continue to be restricted to the forwarding of regular IP traffic (unicasts). 
Abstract-found: 1
Intro-found: 1
Reference: [Bharath-Kumar] <author> Bharath-Kumar, K. and J. Jaffe, </author> <title> Routing to Multiple Destinations in Computer Networks, </title> <journal> IEEE Transactions on Communications, </journal> <volume> COM-31[3], </volume> <month> March </month> <year> 1983. </year>
Reference-contexts: This type of minimal spanning tree is called a Steiner tree in the literature. For a comparison of shortest-path tree routing to routing using Steiner trees, see [Deering2] and <ref> [Bharath-Kumar] </ref>. 2.2 Sample path of a multicast datagram As an example of multicast datagram routing in MOSPF, consider the sample Autonomous System pictured in Figure 1. This figure has been taken from the OSPF specification (see [OSPF]). The larger rectangles represent routers, the smaller rectangles hosts.
Reference: [Deering] <author> Deering, S., </author> <title> Multicast Routing in Internetworks and Extended LANs, </title> <booktitle> SIGCOMM Summer 1988 Proceedings, </booktitle> <month> August </month> <year> 1988. </year>
Reference-contexts: Stub network. A network having only a single OSPF router attached. A network belonging to an OSPF system is either a transit or a stub network, but never both. 1.2 Acknowledgments The multicast extensions to OSPF are based on Link-State Multicast Routing algorithm presented in <ref> [Deering] </ref>. In addition, the [Deering] paper contains a section on Hierarchical Multicast Routing (providing the ideas for MOSPFs inter-area multicasting scheme) and several Distance Vector (also called Bellman-Ford) multicast algorithms. One of these Distance Vector multicast algorithms, Truncated Reverse Path Broadcasting, has been implemented in the Internet (see [RFC 1075]). <p> Stub network. A network having only a single OSPF router attached. A network belonging to an OSPF system is either a transit or a stub network, but never both. 1.2 Acknowledgments The multicast extensions to OSPF are based on Link-State Multicast Routing algorithm presented in <ref> [Deering] </ref>. In addition, the [Deering] paper contains a section on Hierarchical Multicast Routing (providing the ideas for MOSPFs inter-area multicasting scheme) and several Distance Vector (also called Bellman-Ford) multicast algorithms. One of these Distance Vector multicast algorithms, Truncated Reverse Path Broadcasting, has been implemented in the Internet (see [RFC 1075]). <p> RT3 a,b RT5 RT10 a 6 6 RT7 a 2 3 RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 22] 2. MOSPF assumes that the inter-AS routing protocol is forwarding multicast datagrams in an RPF (reverse path forwarding; see <ref> [Deering] </ref> for an explanation of this terminology) fashion. In other words, it is assumed that a multicast datagram whose source (call it X) lies outside the MOSPF domain will enter the MOSPF domain at those points that are advertising (into OSPF) the best routes back to X.
Reference: [Deering2] <author> Deering, S., </author> <title> Multicast Routing in a Datagram Internetwork, </title> <type> Stanford Technical Report, </type> <institution> STAN CS-92-1415, Department of Computer Science, Stanford University, </institution> <month> December </month> <year> 1991. </year>
Reference-contexts: This type of minimal spanning tree is called a Steiner tree in the literature. For a comparison of shortest-path tree routing to routing using Steiner trees, see <ref> [Deering2] </ref> and [Bharath-Kumar]. 2.2 Sample path of a multicast datagram As an example of multicast datagram routing in MOSPF, consider the sample Autonomous System pictured in Figure 1. This figure has been taken from the OSPF specification (see [OSPF]). The larger rectangles represent routers, the smaller rectangles hosts.
Reference: [OSPF] <author> Moy, J., </author> <note> OSPF Version 2, RFC 1583, </note> <institution> Proteon, Inc., </institution> <month> March </month> <year> 1994. </year>
Reference-contexts: In MOSPF, just as in the base OSPF protocol, datagrams (multicast or unicast) are routed as is -- they are not further encapsulated or decapsulated as they transit the Autonomous System. 1.1 Terminology This memo uses the terminology listed in section 1.2 of <ref> [OSPF] </ref>. For this reason, terms such as Network, Autonomous System and link state advertisement are assumed to be understood. In addition, the abbreviation LSA is used for link state advertisement. <p> Routers running the MOSPF protocol are referred to herein as either multicast-capable routers or MOSPF routers. Non-broadcast networks. A network supporting the attachment of more than two stations, but not supporting the delivery of a single physical datagram to multiple destinations (i.e., not supporting data-link multicast). <ref> [OSPF] </ref> describes these networks as non-broadcast, multi-access networks. An example of a non-broadcast network is an X.25 PDN. Transit network. A network having two or more OSPF routers attached. These networks can forward data traffic that is neither locally-originated nor locally-destined. <p> This figure has been taken from the OSPF specification (see <ref> [OSPF] </ref>). The larger rectangles represent routers, the smaller rectangles hosts. Oblongs and circles represent multi-access networks 2 . Lines joining routers are point-to-point serial connections. A cost has been assigned to each outbound router interface. All routers in Figure 1 are assumed to be running MOSPF. <p> In the stub areas datagram shortest-path tree the neighborhood of the datagrams source cannot be approximated by AS external links. Instead the neighborhood of the source is approximated by the default summary links (see Section 3.6 of <ref> [OSPF] </ref>) that are originated by the stub areas intra-area multicast forwarders. <p> Note that this support is in addition to that required for the base OSPF implementation as outlined in Section 4.4 of <ref> [OSPF] </ref>. Promiscuous multicast reception. In a multicast router, it is necessary to receive all IP multicasts at the data-link level. <p> These data structures are included for explanatory uses only, and are not intended to constrain a MOSPF implementation. Besides the data structures listed below, this specification will also reference the various data structures (e.g., OSPF interfaces and neighbors) defined in <ref> [OSPF] </ref>. In a MOSPF router, the following items are added to the list of global OSPF data structures described in Section 5 of [OSPF]: Local group database. This database describes the group membership on all attached networks for which the router is either Designated Router or Backup Designated Router. <p> Besides the data structures listed below, this specification will also reference the various data structures (e.g., OSPF interfaces and neighbors) defined in <ref> [OSPF] </ref>. In a MOSPF router, the following items are added to the list of global OSPF data structures described in Section 5 of [OSPF]: Local group database. This database describes the group membership on all attached networks for which the router is either Designated Router or Backup Designated Router. This in turn determines the group-membership LSAs that the router will originate, and the local delivery of multicast datagrams (see Sections 2.3.1 and 10). <p> See Sections 2.3.4 and 11 for more details. Multicast routing capability. Indicates whether the router is running the multicast extensions defined in this memo. A router running the multicast extensions must still run the base OSPF algorithm as set forth in <ref> [OSPF] </ref>. Such a router will continue to interoperate with non-multicast-capable OSPF routers when forwarding IP unicast traffic. Inter-area multicast forwarder. Indicates whether the router will forward IP multicasts from one OSPF area to another. <p> When building inter-AS multicast datagram trees, it is these routers that appear immediately adjacent to the datagram source at the root of the tree. 8.1 Additions to the OSPF area structure The OSPF area data structure is described in Section 6 of <ref> [OSPF] </ref>. In a MOSPF router, the following item is added to the OSPF area structure: List of group-membership-LSAs. These link state advertisements describe the location of the areas multicast group members. Group-membership-LSAs are ooded throughout a single area only. <p> Group-membership-LSAs are ooded throughout a single area only. Area border routers also summarize their attached areas membership by originating group-membership-LSAs into the backbone area. For more information, see Sections 3.1 and 10. 8.2 Additions to the OSPF interface structure The OSPF interface structure is described in Section 9 of <ref> [OSPF] </ref>. In a MOSPF router, the following items are added to the OSPF interface structure. Note that the IPMulticastForwarding parameter is really a description of the attached network. <p> The length of this timer is the configurable parameter IGMPPollingInterval. See Section 9 for details. 8.3 Additions to the OSPF neighbor structure The OSPF neighbor structure is defined in Section 10 of <ref> [OSPF] </ref>. In a MOSPF router, the following items are added to the OSPF neighbor structure: Neighbor Options. This field was already defined in the OSPF specification. However, in MOSPF there is a new option which indicates the neighbors multicast capability. <p> In that case, the router ushes the advertisement from the routing domain by premature aging. For more information concerning the maintenance of LSAs, see Sections 12, 12.4, 14 and 14.1 of <ref> [OSPF] </ref>. When one of the following events occurs, it may be necessary for a router to (re)issue one or more group-membership-LSAs: 1. One of the routers interfaces changes state. <p> It is assumed that the group-membership-LSA is to report membership in multicast group G: The advertisement fields that are not type-specific (LS age, LS sequence number, LS checksum and length) are set according to Section 12.1 of <ref> [OSPF] </ref>. RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 37] The Options field of a group-membership-LSA is not processed on receipt. <p> Also note that if no transit vertices are listed by the advertisement, the advertisement should not be (re)originated; if an instance of the advertisement already exists, it should then be ushed from the link state database using the premature aging procedure specified in Section 14.1 of <ref> [OSPF] </ref>. a. Consider those entries in the local group database that describe Group G membership (see Section 8.4). Consider each such entry in turn. Each entry references one of Router Xs attached networks (call it Network N). <p> As a general design principle, optional OSPF advertisements are only ooded to those routers that understand them. A MOSPF router learns of its neighbors multicast-capability at the beginning of the Database Exchange Process (see Section 10.6 of <ref> [OSPF] </ref>, receiving Database Description packets from a neighbor in state Exstart). A neighbor is multicast-capable if and only if it sets the MC-bit in the Options field of its Database Description packets. <p> A neighbor is multicast-capable if and only if it sets the MC-bit in the Options field of its Database Description packets. Then, in the next step of the Database Exchange process, group-membership-LSAs are included in the Database summary list sent to the neighbor (see Sections 7.2 and 10.3 of <ref> [OSPF] </ref>) if and only if the neighbor is multicast-capable. When ooding group-membership-LSAs to adjacent neighbors, a MOSPF router looks at the neighbors multicast-capability. Group-membership-LSAs are only ooded to multicast-capable neighbors. To be more precise, in Section 13.3 of [OSPF], group-membership-LSAs are only placed on the Link state retransmission lists of multicast-capable <p> summary list sent to the neighbor (see Sections 7.2 and 10.3 of <ref> [OSPF] </ref>) if and only if the neighbor is multicast-capable. When ooding group-membership-LSAs to adjacent neighbors, a MOSPF router looks at the neighbors multicast-capability. Group-membership-LSAs are only ooded to multicast-capable neighbors. To be more precise, in Section 13.3 of [OSPF], group-membership-LSAs are only placed on the Link state retransmission lists of multicast-capable neighbors 18 . Note however that when sending Link State Update packets as multicasts, a non-multicast neighbor may (inadvertently) receive group-membership-LSAs. The non-multicast router will then simply discard the LSA (see Section 13 of [OSPF], receiving LSAs having <p> Section 13.3 of <ref> [OSPF] </ref>, group-membership-LSAs are only placed on the Link state retransmission lists of multicast-capable neighbors 18 . Note however that when sending Link State Update packets as multicasts, a non-multicast neighbor may (inadvertently) receive group-membership-LSAs. The non-multicast router will then simply discard the LSA (see Section 13 of [OSPF], receiving LSAs having unknown LS types). 11 Detailed description of multicast datagram forwarding This section describes in detail the way MOSPF forwards a multicast datagram. The forwarding process has already been informally presented in Section 2.2. <p> This is accomplished by the following algorithm: Look up the OSPF TOS 0 routing table entry 20 corresponding to the datagrams IP source address, as described in Section 11.1 of <ref> [OSPF] </ref>. If this routing table entry describes an OSPF intra-area or inter-area route, the source network is set to be the network defined by the routing table entrys Destination ID and Address Mask (see Section 11 of [OSPF]). <p> corresponding to the datagrams IP source address, as described in Section 11.1 of <ref> [OSPF] </ref>. If this routing table entry describes an OSPF intra-area or inter-area route, the source network is set to be the network defined by the routing table entrys Destination ID and Address Mask (see Section 11 of [OSPF]). Otherwise (i.e., the routing table entry specifies an external route, or there is no matching routing table entry), the list of matching AS external-link-LSAs is examined. A matching AS external-link-LSA is one that describes a network which contains the datagrams IP source address. <p> Forwarding the locally originated multicast then consists of the following steps: 21. It is assumed that a MOSPF router that wants to stop advertising a route to an external destination will use the premature aging procedure specified in Section 14.1 of <ref> [OSPF] </ref>, rather than setting the AS external-link-LSAs cost to LSInfinity. Network Mask Cost MC-bit 10.1.1.0 255.255.255.0 Type 1: 10 clear 10.1.0.0 255.255.0.0 Type 2: LSInfinity set 10.0.0.0 255.0.0.0 Type 2: 1 set Table 3: Sample AS external-link-LSAs RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 42] 1. <p> For each Area A to which the calculating router is attached: a. Calculate Area As datagram shortest-path tree. This calculation is described in Section 12.2 below. In many ways it is similar to the calculation of OSPFs intra-area routes, described in Section 16.1 of <ref> [OSPF] </ref>. The main differences between the multicast datagram shortest-path tree calculation and OSPFs intra-area unicast calculation are listed in Section 12.2.9 below. As a product of each areas datagram shortest-path tree, the forwarding cache entrys list of outgoing interfaces is (possibly) updated. <p> Note that this coding matches the coding for vertices listed in the group-membership-LSA (see Section A.3). LSA. The link state advertisement describing the vertex immediate neighborhood. Can be discovered by performing a database lookup in Area As link state database (see Section 12.2 of <ref> [OSPF] </ref>), with LS type set to Vertex type and Link State ID set to Vertex ID. Parent. In the current best path from SourceNet to the vertex, the router/transit network immediately preceding the vertex. <p> A router connected to multiple areas builds a separate datagram shortest-path tree for each area. The datagram shortest-path tree is built by the Dijkstra or SPF algorithm, which is the same algorithm used to discover OSPFs intra-area unicast routes (see Section 16.1 of <ref> [OSPF] </ref>). The algorithm is stated herein and in [OSPF] using graph-oriented language: vertices and links. Vertices are the areas routers and transit networks, and links are the router interfaces and point-to-point lines that connect them. <p> The datagram shortest-path tree is built by the Dijkstra or SPF algorithm, which is the same algorithm used to discover OSPFs intra-area unicast routes (see Section 16.1 of <ref> [OSPF] </ref>). The algorithm is stated herein and in [OSPF] using graph-oriented language: vertices and links. Vertices are the areas routers and transit networks, and links are the router interfaces and point-to-point lines that connect them. Basically, the algorithm manipulates two lists of vertices: the candidate list and the forming shortest-path tree. <p> Namely, the multicast datagram is forwarded from the source area, over the backbone and then into the non-backbone areas. This is similar to the hub and spoke architecture for unicast forwarding described in Section 3.2 of <ref> [OSPF] </ref>. RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 51] ILDirect, the upstream node is set to the appropriate directly-connected stub network. If equal to ILNormal, the upstream node is set to the Parent field in RTXs Area A Vertex structure. <p> RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 52] 12.2.9 Comparison to the unicast SPF calculation There are many similarities between the construction of a multicast datagrams shortest-path trees in Section 12.2 and OSPFs intra-area route calculation for unicast traffic (Section 16.1 of <ref> [OSPF] </ref>). Both have been described in terms of Dijkstras algorithm. However, there are some differences. The major differences are listed below: In the multicast case, the datagram SPF calculation is rooted at the datagrams source. <p> In the unicast case, each router is the root of its own unicast intra-area SPF calculation. In the multicast case, the datagram shortest-path tree is a true tree; i.e., between any two nodes on the tree there is one path. However, due to the provision for equal-cost multipath in <ref> [OSPF] </ref>, the unicast SPF calculation may add additional links to the shortest-path tree. In order to avoid unwanted replication of multicast datagrams, MOSPF ensures that, for any given datagram, each router builds the exact same datagram shortest-path tree. This forces two differences from the unicast SPF calculation. <p> The calculation of datagram shortest path trees takes into account only those links that connect transit nodes (i.e, router to router or router to transit network links). The unicast SPF calculation in Section 16.1 of <ref> [OSPF] </ref> must additionally examine links to stub networks, although this is done after all the transit links are examined. <p> A router running MOSPF will still interoperate with an OSPF router when forwarding unicast traffic. Most of the modifications have been described earlier in this document. This section collects together those changes which have yet to be mentioned, organizing them by the affected Section of <ref> [OSPF] </ref>. 14.1 The Designated Router This functionality is described in Section 7.3 of [OSPF]. In OSPF, a networks Designated Router has two specialized roles. First, it originates the networks network-LSA. <p> Most of the modifications have been described earlier in this document. This section collects together those changes which have yet to be mentioned, organizing them by the affected Section of <ref> [OSPF] </ref>. 14.1 The Designated Router This functionality is described in Section 7.3 of [OSPF]. In OSPF, a networks Designated Router has two specialized roles. First, it originates the networks network-LSA. Second, it controls the ooding on the network, in that all of the routers on the network synchronize with the Designated Router (and the Backup Designated Router) only. <p> This is done by periodically sending Host Membership Queries, and receiving Host Membership Reports in response (see Section 9). This is yet another reason why the Designated Router must be multicast-capable. 14.2 Sending Hello packets This functionality is described in Section 9.5 of <ref> [OSPF] </ref>. A MOSPF router sets the MC-bit in the Options field of its Hello packets. This indicates that the router is multicast-capable; it does not necessarily indicate the state of the sending interfaces IPMulticastForwarding parameter (see Section B.2). Setting the MC-bit in Hellos is done strictly for informational purposes. <p> Neighbors receiving the routers Hello packets do not act on the state of the MC-bit. A neighbors multicast-capability is learned instead during the Database Exchange Process (see Section 14.4). 14.3 The Neighbor state machine This functionality is described in Section 10.3 of <ref> [OSPF] </ref>. When a neighbor enters state Exchange, the neighbor Database summary list is initialized (see the OSPF neighbor FSM entry for State: ExStart and Event: NegotiationDone). This list describes of the portion of the routers link state database that needs to be synchronized with the neighbor. <p> RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 55] neighbor is multicast-capable. The neighbors multicast capability is learned by examining the neighbors Database Description packets (see Section 14.4). 14.4 Receiving Database Description packets This functionality is described in Section 10.6 of <ref> [OSPF] </ref>. A neighbors multicast-capability is learned through received Database Description packets. When the Database Description packet is received that transitions the neighbor from ExStart to Exchange, the state of the MC-bit in the packets Options field is examined. The neighbor is multicast-capable if and only if the MC-bit is set. <p> The neighbors multicast capability controls whether group-membership-LSAs are summarized to the neighbor during the Database Exchange process (see Section 14.3), and whether group-membership-LSAs are ooded to the neighbor during the ooding process (see Section 10.2). 14.5 Sending Database Description packets This functionality is described in Section 10.8 of <ref> [OSPF] </ref>. A MOSPF router sets the MC-bit in the Options field of its Database Description packets. This indicates to its adjacent neighbors that the router is multicast-capable; it does not necessarily indicate the state of the sending interfaces IPMulticastForwarding parameter (see Section B.2). <p> When a router goes from being multicast-capable to multicast-incapable, or vice-versa, it must indicate this fact to its adjacent neighbors by restarting the Database Description process (i.e., rolling back the state of all adjacent neighbors to Exstart). 14.6 Originating Router-LSAs This functionality is described in Section 12.4.1 of <ref> [OSPF] </ref>. A MOSPF router sets the MC-bit in the Options field of its router-LSA. This allows the router to be included in datagram shortest-path trees (see Step 5a of Section 12.2). In addition, MOSPF has introduced a new ag in the router-LSAs rtype field: the W-bit. <p> In particular, if the routers multicast capability or its ability to function as either an inter-area or inter-AS multicast forwarder changes, its router-LSA must be reoriginated. 14.7 Originating Network-LSAs This functionality is described in Section 12.4.2 of <ref> [OSPF] </ref>. In OSPF, a transit networks network-LSA is originated by the networks Designated Router. <p> It is intended that all routers attached to a common network agree on the networks IPMulticastForwarding capability. However, this agreement is not enforced. When there are disagreements, incorrect routing of multicast datagrams can result. 14.8 Originating Summary-link-LSAs This functionality is described in Section 12.4.3 of <ref> [OSPF] </ref>. Inter-area multicast forwarders always set the MC-bit in the Options field of their summary-link-LSAs, regardless of whether the path described by the summary-link-LSA is actually multicast-capable. Indeed, it is possible that there is no multicast-capable path to the described destination. <p> If its MC-bit is clear, the summary-link-LSA will not be used when initializing the candidate list in Sections 12.2.2, 12.2.3 and 12.2.5. 14.9 Originating AS external-link-LSAs This functionality is described in Section 12.4.4 of <ref> [OSPF] </ref>. Unlike in summary-link-LSAs, an inter-AS multicast forwarder should clear the MC-bit in the Options field of one of its AS external-link-LSAs if it is known that there is no multicast-capable path from the described destination to the router itself. <p> Such an AS external-link-LSA will still be used by the multicast routing calculation (see Section 12.2.4). As a result, when a MOSPF router wishes to stop advertising an AS external destination, it must use the premature aging procedure specified in Section 14.1 of <ref> [OSPF] </ref>, rather than simply setting the AS external-link-LSAs cost to LSInfinity. 14.10 Next step in the ooding procedure This functionality is described in Section 13.3 of [OSPF]. Group-membership-LSAs are specific to a OSPF single area, and are ooded to multicast-capable routers only. <p> when a MOSPF router wishes to stop advertising an AS external destination, it must use the premature aging procedure specified in Section 14.1 of <ref> [OSPF] </ref>, rather than simply setting the AS external-link-LSAs cost to LSInfinity. 14.10 Next step in the ooding procedure This functionality is described in Section 13.3 of [OSPF]. Group-membership-LSAs are specific to a OSPF single area, and are ooded to multicast-capable routers only. When ooding a group-membership-LSA, Section 13.3 of the OSPF specification is modified as follows: 1) The list of interfaces examined during ooding (called the eligible interfaces in Section 13.3 of [OSPF]) is the set of <p> in Section 13.3 of <ref> [OSPF] </ref>. Group-membership-LSAs are specific to a OSPF single area, and are ooded to multicast-capable routers only. When ooding a group-membership-LSA, Section 13.3 of the OSPF specification is modified as follows: 1) The list of interfaces examined during ooding (called the eligible interfaces in Section 13.3 of [OSPF]) is the set of all interfaces attaching to Area A (the area that the group-membership-LSA is received from), just as for router-LSAs, network-LSAs and summary-link-LSAs. 2) When examining each interface, a group-membership-LSA is added to a neighbors link state retransmission list if and only if both a) Step 1d of <p> For more information on ooding group-membership-LSAs, see Section 10.2. 14.11 Virtual links This functionality is described in Section 15 of <ref> [OSPF] </ref>. When a MOSPF router (i.e., multicast-capable router) is both an area border router and an endpoint of a virtual link whose other endpoint is also multicast capable, the router must then also be an inter-area multicast forwarder.
Reference: [RFC 1075] <author> Waitzman, D., Partridge, C., and S. Deering, </author> <title> Distance Vector Multicast Routing Protocol, </title> <type> RFC 1075, </type> <institution> BBN STC, Stanford University, </institution> <month> November </month> <year> 1988. </year>
Reference-contexts: In addition, the [Deering] paper contains a section on Hierarchical Multicast Routing (providing the ideas for MOSPFs inter-area multicasting scheme) and several Distance Vector (also called Bellman-Ford) multicast algorithms. One of these Distance Vector multicast algorithms, Truncated Reverse Path Broadcasting, has been implemented in the Internet (see <ref> [RFC 1075] </ref>). The MOSPF protocol has been developed by the MOSPF Working Group of the Internet Engineering Task Force. Portions of this work have been supported by DARPA under NASA contract NAG 2-650. 2 Multicast routing in MOSPF This section describes MOSPFs basic multicast routing algorithm.
Reference: [RFC 1112] <author> Deering, S., </author> <title> Host Extensions for IP Multicasting, </title> <type> STD 5, RFC 1112, </type> <institution> Stanford University, </institution> <month> May </month> <year> 1988. </year>
Reference-contexts: The protocol resulting from the addition of the multicast enhancements to OSPF is herein referred to as the MOSPF protocol. IP multicasting is an extension of LAN multicasting to a TCP/IP internet. Multicasting support for TCP/IP hosts has been specified in <ref> [RFC 1112] </ref>. In that document, multicast groups are represented by IP class D addresses. Individual TCP/IP hosts join (and leave) multicast groups through the Internet Group Management Protocol (IGMP, also specified in [RFC 1112]). <p> Multicasting support for TCP/IP hosts has been specified in <ref> [RFC 1112] </ref>. In that document, multicast groups are represented by IP class D addresses. Individual TCP/IP hosts join (and leave) multicast groups through the Internet Group Management Protocol (IGMP, also specified in [RFC 1112]). A host need not be a member of a multicast group in order to send datagrams to the group. Multicast datagrams are to be delivered to each member of the multicast group with the same best-effort delivery accorded regular (unicast) IP data traffic. <p> For example, router links advertisements are referred to as router-LSAs and the new link state advertisement describing the location of members of a multicast group is referred to as a group-membership-LSA. RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 6] <ref> [RFC 1112] </ref> discusses the data-link encapsulation of IP multicast datagrams. In contrast to the normal forwarding of IP unicast datagrams, on a broadcast network the mapping of an IP multicast destination to a data-link destination address is not done with the ARP protocol. <p> 3 1 N12 N4 1 6 RT4 8 7 Ia 7 5 RT5 5 3 1 1 6 N13 N15 8 2 RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 11] The local group database is built through the operation of the Internet Group Management Protocol (IGMP; see <ref> [RFC 1112] </ref>). When a MOSPF router becomes Designated Router on an attached network (call the network N1), it starts sending periodic IGMP Host Membership Queries on the network. Hosts then respond with IGMP Host Membership Reports, one for each multicast group to which they belong. <p> See Section 6.4 for more details. An implementation of IGMP. MOSPF uses the Internet Group Management Protocol (IGMP, documented in <ref> [RFC 1112] </ref>) to monitor multicast group membership. See Section 9 for details. 8 Protocol data structures The MOSPF protocol is described herein in terms of its operation on various protocol data structures. These data structures are included for explanatory uses only, and are not intended to constrain a MOSPF implementation. <p> The three components of a local group database entry are defined as follows: MulticastGroup. The multicast group whose members are being tracked by this entry. Each multicast group is represented as a class D IP address. For the semantics of multicast group membership, see <ref> [RFC 1112] </ref>. AttachedNetwork. Each database entry is concerned with the group members belonging to a single attached network. To get a complete picture of the local group membership (when for example building a group membership-LSA), it may be necessary to consult multiple database entries, one for each attached network. <p> The source network for a datagram is discovered via a routing table/database lookup of the datagrams IP source address, as described in Section 11.2. Destination multicast group. The destination group to which matching datagrams are being forwarded. For the semantics of multicast group membership, see <ref> [RFC 1112] </ref>. IP TOS. The IP Type of Service specified by matching datagrams. Note that this means that the path of the multicast datagram depends on its TOS classification. Upstream node. The attached network/neighboring router from which the datagram must be received. <p> As done for downstream interfaces, each downstream neighbor is specified together with the smallest TTL that will actually reach a group member. 9 Interaction with the IGMP protocol MOSPF uses the IGMP protocol (see <ref> [RFC 1112] </ref>) to monitor multicast group membership. In short, the Designated Router on a network periodically sends IGMP Host Membership Queries (see Section 9.1), which in turn elicit IGMP Host Membership Reports from the networks multicast group members. <p> If so, it starts the interfaces IGMP polling timer. Then, whenever the timer fires (every IGMPPollingInterval seconds), the MOSPF router sends a Host Membership Query out the interface. The destination of the query is the IP address 224.0.0.1. For the format of the query, see <ref> [RFC 1112] </ref>. If/when the MOSPF router ceases to be the networks Designated Router, the IGMP polling timer is disabled and no more Hosts Membership Queries are sent. Unusual behavior can result when multiple IP networks are assigned to a single physical network. <p> An IGMP Host Membership Report concerns membership in a single IP multicast group (call it Group A). The Report is sent to the Group A address so that other group members may see the Report and avoid sending duplicates (see <ref> [RFC 1112] </ref> for details). When an IGMP Host Membership Report, sent on Network N 14 , is received by a MOSPF router, the following steps are executed: 1. <p> Identical to the operation of any IP host supporting multicast applications, the exact procedure for issuing these Host Membership Reports is specified in <ref> [RFC 1112] </ref>. Note that in this case, if the router has been elected Designated Router on a network, it must receive its own Host Membership Reports and Host Membership Queries. <p> The exact data-link encapsulation is dependent on the attached networks type: On ethernet and IEEE 802.3 networks, the datagram is forwarded as a data-link multicast. The destination data-link multicast address is selected as an algorithmic translation of the IP multicast destination. See <ref> [RFC 1112] </ref> for details. On FDDI networks, the datagram is forwarded as a data-link multicast. The destination data-link multicast address is selected as an algorithmic translation of the IP multicast destination. See [RFC 1390] for details. <p> See [RFC 1209] for details. On networks that support broadcast, but not multicast (e.g., the Experimental Ethernet), the datagram is forwarded as a data-link broadcast. See <ref> [RFC 1112] </ref> for details. On point-to-point networks, the datagram is forwarded in the same way that unicast datagrams are forwarded. See [RFC 1112] for details. 10. Examine each of the downstream neighbors listed in the forwarding cache entry. <p> See [RFC 1209] for details. On networks that support broadcast, but not multicast (e.g., the Experimental Ethernet), the datagram is forwarded as a data-link broadcast. See <ref> [RFC 1112] </ref> for details. On point-to-point networks, the datagram is forwarded in the same way that unicast datagrams are forwarded. See [RFC 1112] for details. 10. Examine each of the downstream neighbors listed in the forwarding cache entry. <p> Find the router interface whose IP address matches the datagrams source address. Multicast the datagram out that interface, according to the Host extensions for IP multicasting specified in <ref> [RFC 1112] </ref>. 2. If the router interface found in the previous step has been configured for MOSPF, and if its IPMulticastForwarding parameter is not equal to disabled, then set the receiving MOSPF interface to that interface. Otherwise, set the receiving MOSPF interface to NULL. 3.
Reference: [RFC 1209] <author> Piscitello, D., and J. Lawrence, </author> <title> Transmission of IP Datagrams over the SMDS Service, </title> <type> RFC 1209, </type> <institution> Bell Communications Research, </institution> <month> March </month> <year> 1991. </year>
Reference-contexts: See [RFC 1390] for details. RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 40] On SMDS networks, the datagram is forwarded using the same SMDS address that is used by IP broadcast datagrams. See <ref> [RFC 1209] </ref> for details. On networks that support broadcast, but not multicast (e.g., the Experimental Ethernet), the datagram is forwarded as a data-link broadcast. See [RFC 1112] for details. On point-to-point networks, the datagram is forwarded in the same way that unicast datagrams are forwarded.
Reference: [RFC 1340] <author> Reynolds, J. and J. Postel, </author> <title> Assigned Numbers, </title> <type> STD 2, RFC 1340, </type> <institution> USC/Information Sciences Institute, </institution> <month> July </month> <year> 1992. </year>
Reference: [RFC 1390] <author> Katz, D., </author> <title> Transmission of IP and ARP over FDDI Networks, </title> <type> STD 36, RFC 1390, </type> <institution> cisco Systems, Inc., </institution> <month> January </month> <year> 1993. </year> <note> RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 59] </note>
Reference-contexts: The destination data-link multicast address is selected as an algorithmic translation of the IP multicast destination. See [RFC 1112] for details. On FDDI networks, the datagram is forwarded as a data-link multicast. The destination data-link multicast address is selected as an algorithmic translation of the IP multicast destination. See <ref> [RFC 1390] </ref> for details. RFC 1584 Multicast Extensions to OSPF March 1994 Moy [Page 40] On SMDS networks, the datagram is forwarded using the same SMDS address that is used by IP broadcast datagrams. See [RFC 1209] for details.
References-found: 9

