URL: http://www.eecis.udel.edu:80/~mills/database/papers/fine.ps
Refering-URL: http://www.eecis.udel.edu:80/~mills/papers.htm
Root-URL: http://www.cis.udel.edu
Title: Precision Synchronization of Computer Network Clocks  
Author: ,, David L. Mills 
Keyword: disciplined oscillator, computer clock, network time synchronization.  
Affiliation: Electrical Engineering Department University of Delaware  
Abstract: This paper builds on previous work involving the Network Time Protocol, which is used to synchronize computer clocks in the Internet. It describes a series of incremental improvements in system hardware and software which result in significantly better accuracy and stability, especially in primary time servers directly synchronized to radio or satellite time services. These improvements include novel interfacing techniques and operating system features. The goal in this effort is to improve the synchronization accuracy for fast computers and networks from the tens of milliseconds regime of the present technology to the submillisecond regime of the future. In order to assess how well these improvements work, a series of experiments is described in which the error contributions of various modern Unix system hardware and software components are calibrated. These experiments define the accuracy and stability expectations of the computer clock and establish its design parameters with respect to time and frequency error tolerances. The paper concludes that submillisecond accuracies are indeed practical, but that further improvements will be possible only through the use of temperature-compensated local clock oscillators.
Abstract-found: 1
Intro-found: 1
Reference: [ALL74] <author> Allan, D.W., J.H. Shoaf and D. Halford. </author> <title> Statistics of time and frequency data analysis. In: Blair, B.E. (Ed.). Time and Frequency Theory and Fundamentals . National Bureau of Standards Monograph 140, </title> <type> U.S. </type> <institution> Department of Commerce, </institution> <year> 1974, </year> <pages> 151-204. </pages>
Reference-contexts: Nevertheless, the conclusion drawn from this figure is that frequency variations up to a couple of ppm must be expected as the norm for typical modern workstations. The stability of a freerunning frequency source is commonly characterized by a statistic called Allan variance <ref> [ALL74] </ref>, which is defined as follows. Consider a series of time offsets measured between a local clock oscillator and some external standard. Let q ( i ) be the i th measurement and T be the interval between measurements.
Reference: [DAR81a] <institution> Defense Advanced Research Projects Agency. Internet Protocol. DARPA Network Working Group Report RFC-791, USC Information Sci ences Institute, </institution> <month> September </month> <year> 1981. </year>
Reference-contexts: NTP and its implementations have evolved and proliferated in the Internet over the last decade, with NTP Version 2 adopted as an Internet Standard (Recommended) [MIL89] and its successor NTP Version 3 adopted as a Internet Standard (Draft) [MIL92a]. NTP is built on the Internet Protocol (IP) <ref> [DAR81a] </ref> and User Datagram Protocol (UDP) [POS80], which provide a connectionless transport mechanism; however, it is readily adaptable to other protocol suites. The protocol can operate in several modes appropriate to different scenarios involving private workstations, public servers and various subnet configurations.
Reference: [DAR81b] <institution> Defense Advanced Research Projects Agency. Internet Control Message Protocol. DARPA Network Working Group Report RFC-792, USC Information Sciences Institute, </institution> <month> September </month> <year> 1981. </year>
Reference-contexts: Network Time Protocol The Network Time Protocol (NTP) is used by Internet time servers and their clients to synchronize clocks, as well as automatically organize and maintain the time synchronization subnet itself. It is evolved from the Time Protocol [POS83] and the ICMP Timestamp Message <ref> [DAR81b] </ref>, but is specifically designed for high accuracy, stability and reliability, even when used over typical Internet paths involving multiple gateways and unreliable networks. This section contains an overview of the architecture and algorithms used in NTP.
Reference: [DEC89] <institution> Digital Time Service Functional Specification Version T.1.0.5. Digital Equipment Corporation, </institution> <year> 1989. </year>
Reference-contexts: Unix Kernel Modifications for Precision Time keeping The following sections describe modifications to Unix kernel routines that manage the local clock and timer functions. They provide improved accuracy and stability through the use of a disciplined-oscillator model for use with NTP or another synchronization protocol such as DTSS <ref> [DEC89] </ref>. There are three versions of this software, one each for the Sun SPARCstation with the SunOS 4.1.x kernel, Digital Equipment DECstation 5000 with the Ultrix 4.x kernel and Digital Equipment 3000 AXP Alpha with the OSF/1 V1.x kernel.
Reference: [LIN80] <author> Lindsay, W.C., and A.V. Kantak. </author> <title> Network synchronization of random signals. </title> <journal> IEEE Trans. Communications COM-28, </journal> <month> 8 (August </month> <year> 1980), </year> <pages> 1260-1266. </pages>
Reference-contexts: Thus, both peers A and B can independently calculate delay and offset using a single bidirectional message stream. This is a symmetric, continuously sampled, time-transfer scheme similar to those used in some digital telephone networks <ref> [LIN80] </ref>. Among its advantages are that errors due to missing or duplicated messages are avoided (see [MIL92b] and [MIL93] for an extended discussion of these issues and a comprehensive analysis of errors). 2.1.
Reference: [MAR85] <author> Marzullo, K., and S. Owicki. </author> <title> Maintaining the time in a distributed system. </title> <booktitle> ACM Operating Sys tems Review 19, </booktitle> <month> 3 (July </month> <year> 1985), </year> <pages> 44-54. </pages>
Reference-contexts: This is done using a cascade of two subalgorithms, one based on interval intersections to cast out faulty peers <ref> [MAR85] </ref> and the other based on clustering and maximum likelihood principles to improve accuracy [MIL91a]. The resulting offsets of this subset are first combined on a weighted-average basis using the algorithm described in [MIL92a] and then processed by a phase-lock loop (PLL) using the algorithms described in [MIL92b].
Reference: [MIL89] <author> Mills, </author> <title> D.L. Network Time Protocol (version 2) - specification and implementation. DARPA Net work Working Group Report RFC-1119, </title> <institution> University of Delaware, </institution> <month> September </month> <year> 1989. </year>
Reference-contexts: A subset of the protocol, designated Simple Network Time Protocol (SNTP), is described in RFC-1361 [MIL92c]. NTP and its implementations have evolved and proliferated in the Internet over the last decade, with NTP Version 2 adopted as an Internet Standard (Recommended) <ref> [MIL89] </ref> and its successor NTP Version 3 adopted as a Internet Standard (Draft) [MIL92a]. NTP is built on the Internet Protocol (IP) [DAR81a] and User Datagram Protocol (UDP) [POS80], which provide a connectionless transport mechanism; however, it is readily adaptable to other protocol suites.
Reference: [MIL90] <author> Mills, </author> <title> D.L. Measured performance of the Network Time Protocol in the Internet system. </title> <journal> ACM Computer Communication Review 20, </journal> <month> 1 (January </month> <year> 1990), </year> <pages> 65-75. </pages>
Reference-contexts: Previous works have described The Network Time Protocol (NTP) used to synchronize computer network clocks in the Internet [MIL91a], modeling and analysis of computer clocks [MIL92b], the chronology and metrology of network timescales [MIL91b], and measurement programs designed to establish the accuracy, stability and reliability in service <ref> [MIL90] </ref>. This paper, which is a condensation of [MIL93], presents a series of design improvements in interface hardware, input/output driver software and Unix operating system kernel software which improve the accuracy and stability of the local clock, especially when directly synchronized via radio or satellite to national time standards.
Reference: [MIL91a] <author> Mills, </author> <title> D.L. Internet time synchronization: the Network Time Protocol. </title> <journal> IEEE Trans. </journal> <volume> Communica tions 39, </volume> <month> 10 (October </month> <year> 1991), </year> <pages> 1482-1493. </pages>
Reference-contexts: 1. Introduction This is one of a series of reports and papers on the technology of synchronizing clocks in computer networks. Previous works have described The Network Time Protocol (NTP) used to synchronize computer network clocks in the Internet <ref> [MIL91a] </ref>, modeling and analysis of computer clocks [MIL92b], the chronology and metrology of network timescales [MIL91b], and measurement programs designed to establish the accuracy, stability and reliability in service [MIL90]. <p> This section contains an overview of the architecture and algorithms used in NTP. A detailed description of the architecture and service model is contained in <ref> [MIL91a] </ref>, while the current protocol specification, designated NTP Version 3, is defined by RFC-1305 [MIL92a]. A subset of the protocol, designated Simple Network Time Protocol (SNTP), is described in RFC-1361 [MIL92c]. <p> This is done using a cascade of two subalgorithms, one based on interval intersections to cast out faulty peers [MAR85] and the other based on clustering and maximum likelihood principles to improve accuracy <ref> [MIL91a] </ref>. The resulting offsets of this subset are first combined on a weighted-average basis using the algorithm described in [MIL92a] and then processed by a phase-lock loop (PLL) using the algorithms described in [MIL92b].
Reference: [MIL91b] <author> Mills, </author> <title> D.L. On the chronology and metrology of computer network timescales and their application to the Network Time Protocol. </title> <journal> ACM Computer Communications Review 21, </journal> <month> 5 (October </month> <year> 1991), </year> <pages> 8 17. </pages>
Reference-contexts: Previous works have described The Network Time Protocol (NTP) used to synchronize computer network clocks in the Internet [MIL91a], modeling and analysis of computer clocks [MIL92b], the chronology and metrology of network timescales <ref> [MIL91b] </ref>, and measurement programs designed to establish the accuracy, stability and reliability in service [MIL90]. <p> The new kernel software is designed to implement the leap event upon command by an ntp_adjtime () argument. The intricate and sometimes arcane details of the model and implementation are discussed in <ref> [MIL91b] </ref> and [MIL93]. 5. Errors in Time and Frequency In preceding sections a number of improvements in driver software and hardware are described, along with modifications to the SunOS, Ultrix and OSF/1 kernels. These provide increased accuracy and stability of the local clock without requiring an external precision oscillator.
Reference: [MIL92a] <author> Mills, </author> <title> D.L. Network Time Protocol (Version 3) specification, implementation and analysis. </title> <institution> DARPA Network Working Group Report RFC-1305, University of Delaware, </institution> <month> March </month> <year> 1992, </year> <pages> 113 pp. </pages> <month> [MIL92b]Mills, </month> <title> D.L. Modelling and analysis of computer network clocks. </title> <institution> Electrical Engineering Department Report 92-5-2, University of Delaware, </institution> <month> May </month> <year> 1992, </year> <pages> 29 pp. </pages>
Reference-contexts: This section contains an overview of the architecture and algorithms used in NTP. A detailed description of the architecture and service model is contained in [MIL91a], while the current protocol specification, designated NTP Version 3, is defined by RFC-1305 <ref> [MIL92a] </ref>. A subset of the protocol, designated Simple Network Time Protocol (SNTP), is described in RFC-1361 [MIL92c]. <p> NTP and its implementations have evolved and proliferated in the Internet over the last decade, with NTP Version 2 adopted as an Internet Standard (Recommended) [MIL89] and its successor NTP Version 3 adopted as a Internet Standard (Draft) <ref> [MIL92a] </ref>. NTP is built on the Internet Protocol (IP) [DAR81a] and User Datagram Protocol (UDP) [POS80], which provide a connectionless transport mechanism; however, it is readily adaptable to other protocol suites. <p> As shown in the figure, the computed delays and offsets for each peer are processed by the clock filter algorithm to reduce incidental time jitter. As described in <ref> [MIL92a] </ref>, this algorithm selects from among the last several samples the one with minimum delay and presents the associated offset as the output. 1 3 3 3 2 3 (a) (b) Clock Filter Clock Filter Clock Filter Clock Selection Clock Combining Loop Filter NCO Network Phase-Locked Oscillator 2 The clock selection <p> The resulting offsets of this subset are first combined on a weighted-average basis using the algorithm described in <ref> [MIL92a] </ref> and then processed by a phase-lock loop (PLL) using the algorithms described in [MIL92b]. In the PLL the combined effects of the filtering, selection and combining operations are to produce a phase correction term, which is processed by the loop filter to control the numeric-controlled oscillator (NCO) frequency. <p> Finally, the poll interval r for transmitted NTP messages is determined as a multiple of t . Details on how t is computed from h and how r is determined from t are given in <ref> [MIL92a] </ref>. q 0 T 2 T 3 A t ( i - 1 ) t ( i ) t ( i + 1 ) time 3 Updates are numbered from zero, with those in the neighborhood of the i th update shown in Figure 4. <p> This particular machine is a dedicated, primary server with both GPS and WWVB radio clocks and supporting over 400 clients, some of which use the computationally intense cryptographic authentication procedures outlined in the NTP Version 3 specification RFC-1305 <ref> [MIL92a] </ref>. Both noise and wander components are apparent from the figure, as well as a 400-m s glitch that may be due to something as arcane as a daemon restart or radio glitch, for example.
Reference: [MIL92c] <author> Mills, </author> <title> D.L. Simple Network Time Protocol (SNTP). </title> <institution> DARPA Network Working Group Report RFC-1361, University of Delaware, </institution> <month> August </month> <year> 1992, </year> <pages> 10 pp. </pages> <institution> [MIL93].Mills, D.L. Precision synchronizatin of computer network clocks. Electrical Engineering Department Report 93-11-1, University of Delaware, </institution> <month> November </month> <year> 1993, </year> <pages> 66 pp. </pages>
Reference-contexts: A detailed description of the architecture and service model is contained in [MIL91a], while the current protocol specification, designated NTP Version 3, is defined by RFC-1305 [MIL92a]. A subset of the protocol, designated Simple Network Time Protocol (SNTP), is described in RFC-1361 <ref> [MIL92c] </ref>. NTP and its implementations have evolved and proliferated in the Internet over the last decade, with NTP Version 2 adopted as an Internet Standard (Recommended) [MIL89] and its successor NTP Version 3 adopted as a Internet Standard (Draft) [MIL92a].
Reference: [POS80] <author> Postel, J. </author> <title> User Datagram Protocol. </title> <institution> DARPA Network Working Group Report RFC-768, USC Information Sciences Institute, </institution> <month> August </month> <year> 1980. </year>
Reference-contexts: NTP is built on the Internet Protocol (IP) [DAR81a] and User Datagram Protocol (UDP) <ref> [POS80] </ref>, which provide a connectionless transport mechanism; however, it is readily adaptable to other protocol suites. The protocol can operate in several modes appropriate to different scenarios involving private workstations, public servers and various subnet configurations.
Reference: [POS83] <author> Postel, J. </author> <title> Time protocol. </title> <institution> DARPA Network Working Group Report RFC-868, USC Information Sciences Institute, </institution> <month> May </month> <year> 1983. </year>
Reference-contexts: Network Time Protocol The Network Time Protocol (NTP) is used by Internet time servers and their clients to synchronize clocks, as well as automatically organize and maintain the time synchronization subnet itself. It is evolved from the Time Protocol <ref> [POS83] </ref> and the ICMP Timestamp Message [DAR81b], but is specifically designed for high accuracy, stability and reliability, even when used over typical Internet paths involving multiple gateways and unreliable networks. This section contains an overview of the architecture and algorithms used in NTP.
Reference: [RAM90] <author> Ramanathan, P., K.G. Shin and R.W. Butler. </author> <title> Fault-tolerant clock synchronization in distributed systems. </title> <booktitle> IEEE Computer 23, </booktitle> <month> 10 (October </month> <year> 1990), </year> <pages> 33-42. </pages>
Reference-contexts: In practice each NTP server synchronizes with several other servers in order to survive outages and Byzantine failures using methods similar to those described in [SHI87]. server model, which has much in common with the phase-lock methods summarized in <ref> [RAM90] </ref>. Times-tamps exchanged between the server and possibly many other subnet peers are used to determine individual roundtrip delays and clock offsets, as well as provide reliable error bounds.
Reference: [SHI87] <author> Shin, K.G., and P. Ramanathan. </author> <title> Clock synchronization of a large multiprocessor system in the presence of malicious faults. </title> <journal> IEEE Trans. Comput ers C-36, </journal> <month> 1 (January </month> <year> 1987), </year> <pages> 2-12. </pages>
Reference-contexts: In practice each NTP server synchronizes with several other servers in order to survive outages and Byzantine failures using methods similar to those described in <ref> [SHI87] </ref>. server model, which has much in common with the phase-lock methods summarized in [RAM90]. Times-tamps exchanged between the server and possibly many other subnet peers are used to determine individual roundtrip delays and clock offsets, as well as provide reliable error bounds.
Reference: [VAS88] <author> Vasanthavada, N., </author> <title> and P.N. Marinos. Synchronization of fault-tolerant clocks in the presence of malicious failures. </title> <journal> IEEE Trans. Computers C-37, </journal> <month> 4 (April </month> <year> 1988), </year> <pages> 440-448. 16 </pages>
Reference-contexts: 3 2 3 (a) (b) Clock Filter Clock Filter Clock Filter Clock Selection Clock Combining Loop Filter NCO Network Phase-Locked Oscillator 2 The clock selection algorithm determines from among all peers a suitable subset capable of providing the most accurate and trustworthy time using principles similar to those described in <ref> [VAS88] </ref>. This is done using a cascade of two subalgorithms, one based on interval intersections to cast out faulty peers [MAR85] and the other based on clustering and maximum likelihood principles to improve accuracy [MIL91a].
References-found: 17

