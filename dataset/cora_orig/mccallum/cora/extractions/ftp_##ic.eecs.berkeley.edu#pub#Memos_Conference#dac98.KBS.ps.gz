URL: ftp://ic.eecs.berkeley.edu/pub/Memos_Conference/dac98.KBS.ps.gz
Refering-URL: http://www-cad.eecs.berkeley.edu/HomePages/kukimoto/
Root-URL: 
Email: fkukimoto,braytong@eecs.berkeley.edu psawkar@ichips.intel.com  
Title: Delay-Optimal Technology Mapping by DAG Covering  
Author: Yuji Kukimoto Robert K. Brayton Prashant Sawkar 
Address: Berkeley, CA 94720  OR 97124  
Affiliation: Department of Electrical Engineering and Computer Sciences Strategic CAD Laboratories University of California,  Intel Corporation, Hillsboro,  
Abstract: We propose an algorithm for minimal-delay technology mapping for library-based designs. We show that subject graphs need not be decomposed into trees for delay minimization; they can be mapped directly as DAGs. Experimental results demonstrate that significant delay improvement is possible by this new approach. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> J. Cong and Y. Ding. </author> <title> An optimal technology mapping algorithm for delay optimization in lookup-table based FPGA designs. </title> <booktitle> In Proceedings of IEEE International Conference on Computer-Aided Design, </booktitle> <pages> pages 48-53, </pages> <month> November </month> <year> 1992. </year>
Reference-contexts: Minimum-delay mapping, on the other hand, was shown for LUT-based FPGAs to be solvable in polynomial time by Cong et al. in <ref> [1, 2] </ref>. Here the given circuit is directly mapped without decomposing its DAG structure to trees unlike conventional library-based mapping. In this paper we consider the minimum-delay technology mapping problem for library-based designs where a subject graph is a DAG.
Reference: [2] <author> J. Cong and Y. Ding. FlowMap: </author> <title> An optimal technology mapping algorithm for delay optimization in lookup-table based FPGA designs. </title> <journal> IEEE Transactions on Computer-Aided Design, </journal> <volume> 13(1) </volume> <pages> 1-12, </pages> <month> January </month> <year> 1994. </year>
Reference-contexts: Minimum-delay mapping, on the other hand, was shown for LUT-based FPGAs to be solvable in polynomial time by Cong et al. in <ref> [1, 2] </ref>. Here the given circuit is directly mapped without decomposing its DAG structure to trees unlike conventional library-based mapping. In this paper we consider the minimum-delay technology mapping problem for library-based designs where a subject graph is a DAG. <p> Here the given circuit is directly mapped without decomposing its DAG structure to trees unlike conventional library-based mapping. In this paper we consider the minimum-delay technology mapping problem for library-based designs where a subject graph is a DAG. Careful analysis of <ref> [2] </ref> shows that the basic dynamic programming approach in [2] is not specific to FPGA mapping and can be easily adapted to library-based mapping. This leads to a linear time algorithm for minimum-delay DAG covering under load-independent delay models. <p> In this paper we consider the minimum-delay technology mapping problem for library-based designs where a subject graph is a DAG. Careful analysis of <ref> [2] </ref> shows that the basic dynamic programming approach in [2] is not specific to FPGA mapping and can be easily adapted to library-based mapping. This leads to a linear time algorithm for minimum-delay DAG covering under load-independent delay models. <p> We experimentally confirmed that the additional solution space explored by this direct approach finds significantly faster mappings especially under a rich library. 2 Delay-Optimal Technology Mapping for FPGAs We will have a close look at the FlowMap algorithm presented in <ref> [2] </ref> since this gives the basis of our proposed algorithm. Assume that a network is decomposed into a k-bounded network [2], which is a Boolean network where the number of fanins of each node is less than or equal to k. <p> this direct approach finds significantly faster mappings especially under a rich library. 2 Delay-Optimal Technology Mapping for FPGAs We will have a close look at the FlowMap algorithm presented in <ref> [2] </ref> since this gives the basis of our proposed algorithm. Assume that a network is decomposed into a k-bounded network [2], which is a Boolean network where the number of fanins of each node is less than or equal to k. If a given network is not k-bounded, simple decomposition can yield an equivalent k-bounded network. <p> Although explicit enumeration of all valid cuts is possible by a brute-force approach, the complexity is pseudo polynomial O (n k ), where n is the number of nodes in a given network. <ref> [2] </ref> showed that this optimal depth com putation at each node can be formulated as a network flow problem whose runtime is strongly polynomial with respect to k. Once all the nodes have been labeled by their optimal depths, the network is traversed backward from primary outputs to primary inputs. <p> More precisely once the fanin cone of the node is extracted, the standard matching procedure against pattern graphs can be applied to exhaustively check all the successful matches. This way the best delay achievable at each intermediate node can be computed in a similar way to <ref> [2] </ref>. The only difference is that actual pin-to-pin delays of gates specified in a given library need to be used in our case instead of unit delay in [2]. As with FPGA mapping, the principle of optimality is still valid here. <p> This way the best delay achievable at each intermediate node can be computed in a similar way to <ref> [2] </ref>. The only difference is that actual pin-to-pin delays of gates specified in a given library need to be used in our case instead of unit delay in [2]. As with FPGA mapping, the principle of optimality is still valid here. Notice that as long as delay is optimized, any DAG pattern graph can be used directly without losing the optimality, i.e. it is not necessary to restrict the library to pattern graphs of trees and leaf DAGs. <p> = (V p ; E p ) on a subject graph G s = (V s ; E s ) is a one-to-one mapping of the pattern graph nodes into the subject graph nodes I : V p 7! V s such that: 1 It is interesting to note that <ref> [2] </ref> has a comment as follows. Our result makes a sharp contrast with the fact that the conventional technology mapping problem in library-based designs is NP-hard for general Boolean networks.(page 2 [2]) 1. 8e = (e 1 ; e 2 ) 2 E p ; (I (e 1 ); I (e <p> subject graph nodes I : V p 7! V s such that: 1 It is interesting to note that <ref> [2] </ref> has a comment as follows. Our result makes a sharp contrast with the fact that the conventional technology mapping problem in library-based designs is NP-hard for general Boolean networks.(page 2 [2]) 1. 8e = (e 1 ; e 2 ) 2 E p ; (I (e 1 ); I (e 2 )) 2 E s . 2. 8v 2 V p ; ji (v)j 6= 0 ) ji (v)j = ji (I (v))j; where i (v) = fw j (w; v) <p> the graph match algorithm makes the algorithm search all extended matches instead of all standard matches without changing its asymptotic complexity. 3.3 Constructing an Optimum Mapping Once a (best delay, best gate)-pair is computed at each node, a delay-optimal network can be constructed in exactly the same way as in <ref> [2] </ref>. We maintain a queue which contains nodes to be created in the final mapping. This queue is initialized to the set of all primary outputs. A node is picked up from the queue and the best gate at the node is created in the mapping. <p> This procedure is used repeatedly to guide a binary search to determine the minimum cycle time achievable by retiming and optimal technology mapping. The core of this decision procedure is again a labeling scheme quite similar to the one used in FlowMap <ref> [2] </ref>. All k-cuts at each intermediate node are explored by considering re-timing possibility. This is again done implicitly by converting the original problem to a flow network problem. This step of examining all k cuts can be replaced by pattern matching as was done for combinational mapping.
Reference: [3] <author> J. Cong and Y. Ding. </author> <title> On area/depth trade-off in LUT-based FPGA technology mapping. </title> <journal> IEEE Transactions on VLSI Systems, </journal> <volume> 2(2) </volume> <pages> 137-148, </pages> <month> June </month> <year> 1994. </year>
Reference-contexts: Therefore at each intermediate node the fastest mapping is simply created no matter how critical the node is. By constructing slower but smaller mapping for non-critical subnet-works we can have a better control over area increase. Cong et al. <ref> [3] </ref> already have results on area-delay tradeoff for FPGA mapping based on the FlowMap algorithm. An extension of this idea to library-based mapping is currently being investigated. 4 Each gate has a non-zero load-dependent delay specified in lib2.genlib.
Reference: [4] <author> J. Cong and Y. Ding. </author> <title> Combinational logic synthesis for LUT based field programmable gate arrays. </title> <journal> ACM Transactions on Design Automation of Electronic Systems, </journal> <volume> 1(2) </volume> <pages> 145-204, </pages> <month> April </month> <year> 1996. </year>
Reference-contexts: Based on this observation many ideas have been proposed for the FPGA mapping problem again under different cost criteria <ref> [4] </ref>. As for minimum area mapping Levin et al. [10] and Farrahi et al. [6] proved that the problem is NP-hard for k = 4 and k 5 respectively.
Reference: [5] <author> J. Cong and C. Wu. </author> <title> An improved algorithm for performance optimal technology mapping with retiming in LUT-based FPGA design. </title> <booktitle> In Proceedings of IEEE International Conference on Computer Design, </booktitle> <pages> pages 572-578, </pages> <month> October </month> <year> 1996. </year>
Reference-contexts: three-step transformation: (1) Retime an initial circuit, (2) Perform technology mapping of the combinational portion of the circuit, (3) Retime the resulting mapped circuit. [11] proposed a polynomial-time algorithm for computing the minimum cycle-time mapping among all the mapped circuits obtained by the above transformation, which was later improved in <ref> [5] </ref>. The key ingredient is a polynomial-time decision procedure which determines whether there exists a mapping whose cycle time is less than or equal to a given value.
Reference: [6] <author> A. Farrahi and M. Sarrafzadeh. </author> <title> Complexity of the lookup-table mini mization problem for FPGA technology mapping. </title> <journal> IEEE Transactions on Computer-Aided Design, </journal> <volume> 13(11) </volume> <pages> 1319-1332, </pages> <month> November </month> <year> 1994. </year>
Reference-contexts: Based on this observation many ideas have been proposed for the FPGA mapping problem again under different cost criteria [4]. As for minimum area mapping Levin et al. [10] and Farrahi et al. <ref> [6] </ref> proved that the problem is NP-hard for k = 4 and k 5 respectively. Minimum-delay mapping, on the other hand, was shown for LUT-based FPGAs to be solvable in polynomial time by Cong et al. in [1, 2].
Reference: [7] <author> K. Keutzer. DAGON: </author> <title> Technology binding and local optimization by DAG matching. </title> <booktitle> In Proceedings of 24th ACM/IEEE Design Automation Conference, </booktitle> <pages> pages 617-623, </pages> <month> June </month> <year> 1987. </year>
Reference-contexts: 1 Introduction In 1987 Keutzer <ref> [7] </ref> proposed an algorithmic approach to the technology mapping problem, in which he observed similarity between this problem and the code optimization problem for programming languages and adapted an existing tree-covering technique for the latter problem to technology mapping. <p> Pattern matching between a subject graph and a pattern graph in the context of technology mapping was studied extensively by Keutzer <ref> [7] </ref> and Rudell [12]. A match between a subject graph G s = (V s ; E s ) and a pattern graph G p = (V p ; E p ) is defined as follows [12].
Reference: [8] <author> K. Keutzer and D. Richards. </author> <booktitle> Computational complexity of logic syn thesis and optimization. In Proceedings of International Workshop on Logic Synthesis, </booktitle> <month> May </month> <year> 1989. </year>
Reference-contexts: A subject graph is a directed acyclic graph (DAG) in general since it is derived from a given network. Keutzer showed that if a subject graph is a DAG, graph covering for minimum area mapping is NP-hard <ref> [8] </ref>. He further proposed a linear-time dynamic programming algorithm which guarantees optimal results for the case where a subject graph and pattern graphs are trees.
Reference: [9] <author> E. Lehman, Y. Watanabe, J. Grodstein, and H. Harkness. </author> <title> Logic decom position during technology mapping. </title> <booktitle> In Proceedings of IEEE/ACM International Conference on Computer-Aided Design, </booktitle> <pages> pages 264-271, </pages> <month> November </month> <year> 1995. </year>
Reference-contexts: Since a single subject graph is chosen among a huge number of different decompositions without knowing an actual library to be used, it is likely that many potentially good mappings are simply not explored due to this initial choice. Lehman et al. <ref> [9] </ref> have recently resolved this issue by encoding various decompositions into a single extended subject graph called mapping graph and performing technology mapping on it. Since this technique is orthogonal to our technique, the two can be combined to produce even better results. <p> Since this technique is orthogonal to our technique, the two can be combined to produce even better results. In fact, we have recently become aware that the actual implementation of <ref> [9] </ref> performed DAG covering similar to ours although [9] discusses their algorithm for subject trees [14]. It is interesting to know how much of delay improvement in [9] is due to DAG covering. 5 Experimental Results To show the effectiveness of this approach the technology mapper of SIS was extended so <p> Since this technique is orthogonal to our technique, the two can be combined to produce even better results. In fact, we have recently become aware that the actual implementation of <ref> [9] </ref> performed DAG covering similar to ours although [9] discusses their algorithm for subject trees [14]. It is interesting to know how much of delay improvement in [9] is due to DAG covering. 5 Experimental Results To show the effectiveness of this approach the technology mapper of SIS was extended so that delay-optimal mapping is obtained for combinational circuits <p> In fact, we have recently become aware that the actual implementation of <ref> [9] </ref> performed DAG covering similar to ours although [9] discusses their algorithm for subject trees [14]. It is interesting to know how much of delay improvement in [9] is due to DAG covering. 5 Experimental Results To show the effectiveness of this approach the technology mapper of SIS was extended so that delay-optimal mapping is obtained for combinational circuits by DAG covering 3 . <p> As discussed in the previous sections the delay model used in this experiment is the intrinsic delay model where a fixed, load-independent delay is given between each input and the output of a gate. This is in fact the delay model used in <ref> [9] </ref>. Although loading effects are certainly an important factor in delays, there are several justifications. In design scenarios where continuous sizing of any gate is permissible, 3 In this experiment we used graph match for only finding standard matches instead of extended matches. <p> DAG mapping for lib2.genlib one way to capture this flexibility in technology mapping is to approximate this flexibility by having many discrete size gates. This approach, however, is known to be very expensive. The approach taken in <ref> [9] </ref> is to pick a single delay for each gate and perform technology mapping by ignoring loads. Each gate in the final mapping is then continuously sized by considering actual loads so that the delay matches the one associated with the gate.
Reference: [10] <author> I. Levin and R. Y. Pinter. </author> <title> Realizing expression graphs using table lookup FPGAs. </title> <booktitle> In Proceedings of the European Design Automation Conference, </booktitle> <pages> pages 306-311, </pages> <month> September </month> <year> 1993. </year>
Reference-contexts: Based on this observation many ideas have been proposed for the FPGA mapping problem again under different cost criteria [4]. As for minimum area mapping Levin et al. <ref> [10] </ref> and Farrahi et al. [6] proved that the problem is NP-hard for k = 4 and k 5 respectively. Minimum-delay mapping, on the other hand, was shown for LUT-based FPGAs to be solvable in polynomial time by Cong et al. in [1, 2].
Reference: [11] <author> P. Pan and C. L. Liu. </author> <title> Optimal clock period FPGA technology mapping for sequential circuits. </title> <booktitle> In Proceedings of 33rd ACM/IEEE Design Automation Conference, </booktitle> <pages> pages 720-725, </pages> <month> June </month> <year> 1996. </year>
Reference-contexts: We only consider sequential circuits with edge-triggered latches all of which are controlled by a single clock. This problem was studied for LUT-based FPGAs by Pan and Liu <ref> [11] </ref>. Given a k-bounded network consider the following three-step transformation: (1) Retime an initial circuit, (2) Perform technology mapping of the combinational portion of the circuit, (3) Retime the resulting mapped circuit. [11] proposed a polynomial-time algorithm for computing the minimum cycle-time mapping among all the mapped circuits obtained by the <p> This problem was studied for LUT-based FPGAs by Pan and Liu <ref> [11] </ref>. Given a k-bounded network consider the following three-step transformation: (1) Retime an initial circuit, (2) Perform technology mapping of the combinational portion of the circuit, (3) Retime the resulting mapped circuit. [11] proposed a polynomial-time algorithm for computing the minimum cycle-time mapping among all the mapped circuits obtained by the above transformation, which was later improved in [5].
Reference: [12] <author> R. Rudell. </author> <title> Logic synthesis for VLSI design. </title> <type> Technical Report UCB/ERL M89/49, </type> <institution> University of California, Berkeley, </institution> <month> April </month> <year> 1989. </year>
Reference-contexts: This separation of the problem again has become a standard approach due to the theoretical justification about the complexity of DAG covering. Inspired by Keutzer's result technology mapping has been studied extensively to optimize different criteria. Rudell <ref> [12] </ref> worked on minimum-delay technology mapping and showed that if loading effects are completely ignored, the minimum-delay mapping problem for subject trees can be solved optimally by dynamic programming in linear time. <p> Pattern matching between a subject graph and a pattern graph in the context of technology mapping was studied extensively by Keutzer [7] and Rudell <ref> [12] </ref>. A match between a subject graph G s = (V s ; E s ) and a pattern graph G p = (V p ; E p ) is defined as follows [12]. <p> a pattern graph in the context of technology mapping was studied extensively by Keutzer [7] and Rudell <ref> [12] </ref>. A match between a subject graph G s = (V s ; E s ) and a pattern graph G p = (V p ; E p ) is defined as follows [12]. <p> However, in the conventional tree-covering based approach such a match is invalid, i.e. all fanouts of a subject-graph node matched with an intermediate pattern-graph node need to be covered by the same pattern. A match satisfying this additional constraint is called an exact match <ref> [12] </ref> and defined as follows. <p> Rudell proposed an algorithm called graph match <ref> [12] </ref> for the general case where both a subject graph and a pattern graph are DAGs. We can simply use this matching algorithm to enumerate all successful standard matches instead of exact matches. <p> Once the queue becomes empty, the mapping is complete. 3.4 Complexity of DAG Mapping for Delay Minimization An application of graph match to enumerate all successful matches at a node is O (p) <ref> [12] </ref>, where p is the number of nodes in the entire unique pattern graphs 2 . Since this procedure is called once at each node in a subject graph, the complexity of the labeling step is O (sp), where s is the number of nodes in the subject graph. <p> See <ref> [12] </ref> for details. in the subject graph is duplicated in this mapping, which makes effective use of the pattern graph possible. This example also illustrates how multiple-fanout points are created in DAG mapping.
Reference: [13] <author> H. J. Touati. </author> <title> Performance-oriented technology mapping. </title> <institution> Techni cal Report UCB/ERL M90/109, University of California, Berkeley, </institution> <month> November </month> <year> 1990. </year>
Reference-contexts: He also considered the minimum-delay mapping problem for trees under loading effects and showed that by maintaining the best mapping for each possible load at each node the same dynamic programming approach can guarantee optimal results. Touati <ref> [13] </ref> further refined this idea later by combining the optimal tree mapping with sophisticated buffer tree construction. An interesting fact is that they directly started looking at tree covering without studying the complexity of DAG covering for minimum delay. <p> Since p is a constant defined by a given technology, the procedure is linear in the size of a subject graph. 3.5 Comparison between DAG Mapping and Tree Map ping In the past, performance-oriented technology mapping has been done by a combination of tree covering and buffer tree construction <ref> [13] </ref>. A fundamental limitation of this conventional tree-covering approach is that the search space is highly limited by the structure of a given subject graph since multiple-fanout points in the subject graph are completely preserved in the final results. <p> Each gate in the final mapping is then continuously sized by considering actual loads so that the delay matches the one associated with the gate. Even without the capability of continuous sizing, the buffer tree construction methods of <ref> [13] </ref> can be used later at multiple fanout points to reduce load dependency of delays. Therefore the use of this delay model is at least justified as an approximation to the minimum-delay mapping problem under realistic delay models.
Reference: [14] <author> Y. Watanabe. </author> <title> Private communication, </title> <month> October </month> <year> 1997. </year>
Reference-contexts: Since this technique is orthogonal to our technique, the two can be combined to produce even better results. In fact, we have recently become aware that the actual implementation of [9] performed DAG covering similar to ours although [9] discusses their algorithm for subject trees <ref> [14] </ref>. It is interesting to know how much of delay improvement in [9] is due to DAG covering. 5 Experimental Results To show the effectiveness of this approach the technology mapper of SIS was extended so that delay-optimal mapping is obtained for combinational circuits by DAG covering 3 .
References-found: 14

