URL: ftp://w3imagis.imag.fr/pub/dret/SIG97/dret.ps.gz
Refering-URL: http://w3imagis.imag.fr/Publications/index_fr.html
Root-URL: http://www.imag.fr
Title: Interactive Update Of Global Illumination Using A Line-Space Hierarchy  
Author: George Drettakis and Francois X. Sillion 
Keyword: Global illumination, Dynamic environments, Hierarchical radiosity, Form-factors, Interactivity, Frame-rate control.  
Affiliation: iMAGIS GRAVIR/IMAG INRIA  
Note: To appear in ACM SIGGRAPH 97 Annual Conference Proceedings  
Abstract: Interactively manipulating the geometry of complex, globally illuminated scenes has to date proven an elusive goal. Previous attempts have failed to provide interactive updates of global illumination and have not been able to offer well-adapted algorithms controlling the frame rate. The need for such interactive updates of global illumination is becoming increasingly important as the field of application of radiosity algorithms widens. To address this need, we present a novel algorithm which provides interactive update rates of global illumination for complex scenes with moving objects. In the context of clustering for hierarchical radiosity, we introduce the idea of an implicit line-space hierarchy. This hierarchy is realized by augmenting the links between hierarchical elements (clusters or surfaces) with shafts, representing the set of lines passing through the two linked elements. We show how line-space traversal allows rapid identification of modified links, and simultaneous cleanup of subdivision no longer required after a geometry move. The traversal of line-space also limits the amount of work required to update and solve the new hierarchical system after a move, by identifying the modified paths in the scene hierarchy. The implementation of our new algorithm allows interactive updates of illumination after object motion for scenes containing several thousand polygons, including global illumination effects. Finally, the line-space hierarchy traversal provides a natural control mechanism allowing the regulation of the tradeoff between image quality and frame rate. 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> N. Amenta. </author> <title> Finding a line transversal of axial objects in three dimensions. </title> <booktitle> In Proc. 3rd ACM-SIAM Sympos. Discrete Algorithms, </booktitle> <pages> pages 66-71, </pages> <year> 1992. </year>
Reference-contexts: One possibility would be the approach using Plucker coordinates as was presented by Teller [16], or the intercepts of lines on two parallel planes <ref> [1] </ref>. Another approach would be that of ray-classification [2]. We have preferred to use the shaft structure [9] for its simplicity, and because it is well defined and easy to manipulate for the case when one endpoint of a link is a bounding box.
Reference: [2] <author> James Arvo and David Kirk. </author> <title> Fast ray tracing by classification. </title> <journal> Computer Graphics, </journal> <volume> 21(4) </volume> <pages> 55-64, </pages> <month> July </month> <year> 1987. </year> <note> Proceedings SIGGRAPH '87 in Anaheim. </note>
Reference-contexts: One possibility would be the approach using Plucker coordinates as was presented by Teller [16], or the intercepts of lines on two parallel planes [1]. Another approach would be that of ray-classification <ref> [2] </ref>. We have preferred to use the shaft structure [9] for its simplicity, and because it is well defined and easy to manipulate for the case when one endpoint of a link is a bounding box.
Reference: [3] <author> Daniel R. Baum, John R. Wallace, Michael F. Cohen, and Donald P. Greenberg. </author> <title> The back-buffer algorithm : an extension of the radiosity method to dynamic environments. </title> <journal> The Visual Computer, </journal> <volume> 2 </volume> <pages> 298-306, </pages> <year> 1986. </year>
Reference-contexts: In what follows we present a brief overview of these methods. 2.1 Progressive radiosity solutions The initial full-matrix radiosity solution [8], led to the development of an algorithm which took advantage of coherence properties of the hemi-cube, used to calculate form-factors <ref> [3] </ref>. This solution suffered from all the limitations of full-matrix radiosity (including To appear in ACM SIGGRAPH 97 Annual Conference Proceedings quadratic storage and lack of adaptive subdivision), and most notably was limited to predetermined trajectories.
Reference: [4] <author> Shenchang Eric Chen. </author> <title> Incremental radiosity: An extension of progressive ra-diosity to an interactive image synthesis system. </title> <journal> Computer Graphics, </journal> <volume> 24(4) </volume> <pages> 135-144, </pages> <month> August </month> <year> 1990. </year> <note> Proceedings SIGGRAPH '90 in Dallas. </note>
Reference-contexts: Address: iMAGIS/GRAVIR, BP 53, F-38041 Grenoble Cedex 09 France. Email: fGeorge.Drettakis|Francois.Silliong@imag.fr tion of the scene geometry, without loss of important illumination information. Although significant advances have been made towards accelerating radiosity calculations for changing geometry <ref> [7, 4, 11] </ref>, all previous approaches fail to provide interactive global illumination updates even for moderately complex scenes, and do not provide a way to control the quality/speed tradeoff for interactive display. <p> The advent of progressive refinement solutions led to the development of two similar approaches which took advantage of the shooting process of radiosity propagation <ref> [4, 7] </ref>. By treating all object movements as deletions and re-insertions in the scene, shadows were removed by re-shooting energy, and new shadows were correctly inserted where appropriate by shooting negative energy. This approach achieved impressive update times for direct illumination, even though global updates remained very expensive.
Reference: [5] <author> Fredo Durand, George Drettakis, and Claude Puech. </author> <title> The 3d visibility complex, a new approach to the problems of accurate visibility. </title> <editor> In X. Pueyo and P. Shroeder, editors, </editor> <booktitle> Rendering Techniques '96, </booktitle> <pages> pages 245-257. </pages> <publisher> Springer Verlag, </publisher> <month> June </month> <year> 1996. </year> <booktitle> Proc. 7th EG Workshop on Rendering in Porto. </booktitle>
Reference-contexts: More precisely, this is the set of line segments rather than infinite lines. For simplicity however, we will use the term line-space hierarchy throughout this paper. In this respect, we build a coarse approximation to structures which encode visibility information of maximal free segments such as the visibility complex <ref> [5] </ref>. ... (c) (d) l p (shown as a shaft) is subdivided, resulting in four sub-links (b), which are the line-space children of l p . P-links (c) and the subsequent children links (d) are embedded in the H-element hierarchy. <p> Recent work on accelerated approximate shadow calculations using the hierarchy of clusters and feature-based error metrics may be applicable to dynamic updates [14]. Finally, more involved visibility structures, which provide detailed line-space information, such as the Visibility Complex <ref> [5] </ref>, will probably be very useful for dynamic updates of illumination. Acknowledgements Thanks to Fredo Durand, Mathieu Desbrun and Rachel Orti for crucial help.
Reference: [6] <author> David Forsyth, Chien Yang, and Kim Teo. </author> <title> Efficient radiosity in dynamic environments. </title> <editor> In Sakas et al., editor, </editor> <booktitle> Photorealistic Rendering Techniques, </booktitle> <address> Darmstadt, D, </address> <month> June </month> <year> 1994. </year> <title> Springer Verlag. </title> <booktitle> Proc. 5th EG Workshop on Rendering. </booktitle>
Reference-contexts: Two first solutions have been developed exploiting hierarchical radiosity for dynamic environments. Forsyth et al. <ref> [6] </ref> present the idea of promoting and demoting links based on a refinement criterion which moves links up and down in the hierarchy, depending on the position of the objects at each frame. This is similar to the idea of ghost links presented by Shaw [12]. <p> These ideas are related to the approach developed by Teller and Han-rahan [17], where a similar link hierarchy was used to incrementally maintain blocker lists, as well as the ghost-link idea [12] or link demotion/promotion approach <ref> [6] </ref>. 3.2 Data structures To explicitly work in line-space, we need a representation of the set of lines between surfaces. One possibility would be the approach using Plucker coordinates as was presented by Teller [16], or the intercepts of lines on two parallel planes [1].
Reference: [7] <author> David W. George, Francois Sillion, and Donald P. Greenberg. </author> <title> Radiosity redistribution for dynamic environments. </title> <journal> IEEE Computer Graphics and Applications, </journal> <volume> 10(4), </volume> <month> July </month> <year> 1990. </year>
Reference-contexts: Address: iMAGIS/GRAVIR, BP 53, F-38041 Grenoble Cedex 09 France. Email: fGeorge.Drettakis|Francois.Silliong@imag.fr tion of the scene geometry, without loss of important illumination information. Although significant advances have been made towards accelerating radiosity calculations for changing geometry <ref> [7, 4, 11] </ref>, all previous approaches fail to provide interactive global illumination updates even for moderately complex scenes, and do not provide a way to control the quality/speed tradeoff for interactive display. <p> The advent of progressive refinement solutions led to the development of two similar approaches which took advantage of the shooting process of radiosity propagation <ref> [4, 7] </ref>. By treating all object movements as deletions and re-insertions in the scene, shadows were removed by re-shooting energy, and new shadows were correctly inserted where appropriate by shooting negative energy. This approach achieved impressive update times for direct illumination, even though global updates remained very expensive.
Reference: [8] <author> Cindy M. Goral, Kenneth E. Torrance, Donald P. Greenberg, and Bennett Bat-taile. </author> <title> Modeling the interaction of light between diffuse surfaces. </title> <journal> Computer Graphics, </journal> <volume> 18(3) </volume> <pages> 213-222, </pages> <month> July </month> <year> 1984. </year> <note> Proc. SIGGRAPH '84 in Minneapolis. </note>
Reference-contexts: Several algorithms have been proposed which deal specifically with changes to geometry, and their evolution follows closely the progress of ra-diosity solutions. In what follows we present a brief overview of these methods. 2.1 Progressive radiosity solutions The initial full-matrix radiosity solution <ref> [8] </ref>, led to the development of an algorithm which took advantage of coherence properties of the hemi-cube, used to calculate form-factors [3].
Reference: [9] <author> Eric A. Haines. </author> <title> Shaft culling for efficient ray-traced radiosity. </title> <editor> In Brunet and Jansen, editors, </editor> <booktitle> Photorealistic Rendering in Comp. Graphics, </booktitle> <pages> pages 122-138. </pages> <publisher> Springer Verlag, </publisher> <year> 1993. </year> <booktitle> Proc. 2nd EG Workshop on Rendering (Barcelona, </booktitle> <year> 1991). </year>
Reference-contexts: These links induce a subdivision of the line-space of the scene, or more accurately the space of line-segments, following the flow of light between scene elements. We augment links with an explicit representation of all lines passing between two elements via a shaft <ref> [9] </ref>. In particular, when an object moves, we can efficiently identify the parts of the system which are modified, by hierarchically descending in this line-space. <p> One possibility would be the approach using Plucker coordinates as was presented by Teller [16], or the intercepts of lines on two parallel planes [1]. Another approach would be that of ray-classification [2]. We have preferred to use the shaft structure <ref> [9] </ref> for its simplicity, and because it is well defined and easy to manipulate for the case when one endpoint of a link is a bounding box. In addition the shaft structure permits efficient intersection tests with bounding boxes, which is an operation central to the algorithms presented below.
Reference: [10] <author> Pat Hanrahan, David Saltzman, and Larry Aupperle. </author> <title> A rapid hierarchical ra-diosity algorithm. </title> <journal> Computer Graphics, </journal> <volume> 25(4) </volume> <pages> 197-206, </pages> <month> August </month> <year> 1991. </year> <note> SIG-GRAPH '91 Las Vegas. </note>
Reference-contexts: The line-space hierarchy we introduce is such a representation en coded using the traditional link structure of hierarchical radiosity. 2 To appear in ACM SIGGRAPH 97 Annual Conference Proceedings 3.1 Introduction to the Line-Space Hierarchy In the original hierarchical radiosity algorithm <ref> [10] </ref>, the scene, as well as subsequent subdivision, is represented as a hierarchy. In addition, when the clustering algorithm is used, the polygons of the scene are grouped together to form a complete hierarchical representation of the environment. <p> A typical hierarchical solution process proceeds by refining the links: when the link is considered to insufficiently or incorrectly represent the light transfer, the element is subdivided and sub-links are created <ref> [10, 15] </ref>. The decision to subdivide is based on a subdivision criterion which may be based on error-estimation or magnitude of energy transfer across a link. We will refer to a refiner, which is the module responsible for the refinement operation. <p> This number can be calculated based on the value of the area threshold A * <ref> [10] </ref>, which limits the size of the smallest surface. To see this, consider the partially subdivided hierarchy shown in Fig. 3, where subdivided nodes are represented with solid lines. <p> This additional refinement will be required for example around new shadow boundaries. Once these steps are complete, we have a complete hierarchical system which is ready to be resolved. In hierarchical radiosity <ref> [10, 15] </ref>, system resolution is performed by performing complete sweeps of the hierarchy: Gather and Push-Pull. In the context of clustering [13], irradiance is gathered through the links onto the H-elements; this irradiance is subsequently pushed down the hierarchy. <p> We thus avoid the Gather sweep of the hierarchy. 5.2 Non-recursive refinement for modified links At each frame, certain links will be identified as requiring refinement. This typically occurs when the dynamic object touches a link shaft for the first time. Previous hierarchical radiosity (e.g., <ref> [10] </ref>) performed recursive refinement of links. In such an approach, when a link is refined, we immediately attempt to refine its children and so on recursively until subdivision is no longer possible given the current subdivision criteria. <p> An example is shown in Fig. 11, where an update takes about 4 s., but we see that the quality of shadows is improved compared to Fig. 9. To achieve this, we simply decrease the * threshold for BF refinement <ref> [10] </ref>. 8 Conclusions and Future Work We have presented a new framework for the efficient calculation of incremental changes of global illumination using hierarchical ra-diosity. This set of algorithms allows interactive updates of the lighting solutions in scenes with moving geometry.
Reference: [11] <author> Stefan Muller and Frank Schoffel. </author> <title> Fast radiosity repropagation for interactive virtual environments using a shadow-form-factor-list. </title> <editor> In Sakas et al., editor, </editor> <booktitle> Photorealistic Rendering Techniques, </booktitle> <address> Darmstadt, D, </address> <month> June </month> <year> 1994. </year> <title> Springer Verlag. </title> <booktitle> Proc. 5th EG Workshop on Rendering. </booktitle>
Reference-contexts: Address: iMAGIS/GRAVIR, BP 53, F-38041 Grenoble Cedex 09 France. Email: fGeorge.Drettakis|Francois.Silliong@imag.fr tion of the scene geometry, without loss of important illumination information. Although significant advances have been made towards accelerating radiosity calculations for changing geometry <ref> [7, 4, 11] </ref>, all previous approaches fail to provide interactive global illumination updates even for moderately complex scenes, and do not provide a way to control the quality/speed tradeoff for interactive display. <p> This approach achieved impressive update times for direct illumination, even though global updates remained very expensive. An improvement to these methods was developed by Muller et al. <ref> [11] </ref>, who added an intelligent data structure maintaining shadow-lists accelerating potentially modified interactions between surfaces. The main drawback of all these approaches is due to the fact that they are based on progressive refinement, for which the global energy balance is hard to control.
Reference: [12] <author> Erin Shaw. </author> <title> Hierarchical radiosity for dynamic environments. </title> <type> Master's thesis, </type> <institution> Cornell University, </institution> <address> Ithaca, NY, </address> <month> August </month> <year> 1994. </year>
Reference-contexts: Forsyth et al. [6] present the idea of promoting and demoting links based on a refinement criterion which moves links up and down in the hierarchy, depending on the position of the objects at each frame. This is similar to the idea of ghost links presented by Shaw <ref> [12] </ref>. A first approach to the problems incurred by changes in visibility was presented in Shaw's work, by introducing special shadow links connected to the source and containing blocker information. <p> These ideas are related to the approach developed by Teller and Han-rahan [17], where a similar link hierarchy was used to incrementally maintain blocker lists, as well as the ghost-link idea <ref> [12] </ref> or link demotion/promotion approach [6]. 3.2 Data structures To explicitly work in line-space, we need a representation of the set of lines between surfaces. One possibility would be the approach using Plucker coordinates as was presented by Teller [16], or the intercepts of lines on two parallel planes [1]. <p> After this removal, if there are no links remaining on any of the children of h e (or its intermediate nodes), the subdivision is cleaned up. A similar approach to subdivision cleanup presented in <ref> [12] </ref> required a special pass, and multiple hierarchy passes to mark attached sources and their children. The line space traversal is summarized in Fig. 6. <p> Finally, the radiosity values are computed at the leaves, and pulled up the hierarchy to provide the new solution. Such an approach was used for a dynamic solution in <ref> [12] </ref> for example. For large scenes containing thousands of input polygons, 4 To appear in ACM SIGGRAPH 97 Annual Conference Proceedings ... ... ... time is approximately .3 s.
Reference: [13] <author> Francois Sillion. </author> <title> A unified hierarchical algorithm for global illumination with scattering volumes and object clusters. </title> <journal> IEEE Trans. on Vis. and Comp. Graphics, </journal> <volume> 1(3), </volume> <month> September </month> <year> 1995. </year>
Reference-contexts: In addition, when the clustering algorithm is used, the polygons of the scene are grouped together to form a complete hierarchical representation of the environment. We will refer to such an element as an H-element h e (Hierarchical element <ref> [13] </ref>), be it a cluster or a surface element. This scene hierarchy is augmented by link information, which is used to represent radiant exchanges between two H-elements of this hierarchy. <p> Once these steps are complete, we have a complete hierarchical system which is ready to be resolved. In hierarchical radiosity [10, 15], system resolution is performed by performing complete sweeps of the hierarchy: Gather and Push-Pull. In the context of clustering <ref> [13] </ref>, irradiance is gathered through the links onto the H-elements; this irradiance is subsequently pushed down the hierarchy. Finally, the radiosity values are computed at the leaves, and pulled up the hierarchy to provide the new solution. Such an approach was used for a dynamic solution in [12] for example. <p> In this case, we increase the key used to sort elements in the heap, making refinement of this link more probable. 7 Implementation and Results We have implemented the new algorithms on a clustering hierarchical radiosity algorithm following <ref> [13] </ref>. The modules for line-space traversal and all modified refinement routines required around 5000 additional lines of C++.
Reference: [14] <author> Francois Sillion and George Drettakis. </author> <title> Feature-Based Control of Visibility Error: A Multiresolution Clustering Algorithm for Global Illumination. </title> <editor> In Robert Cook, editor, </editor> <booktitle> SIGGRAPH 95 Conference Proceedings, Annual Conference Series, </booktitle> <pages> pages 145-152. </pages> <publisher> ACM SIGGRAPH, </publisher> <month> August </month> <year> 1995. </year>
Reference-contexts: This can be seen as a local and adaptive form of progressive multi-gridding <ref> [14] </ref>. A very important feature of this controlled update strategy is that no matter how much time is allocated for the update, a consistent solution is computed. This is due to the fact that the set of links always completely covers the entire line space. <p> Recent work on accelerated approximate shadow calculations using the hierarchy of clusters and feature-based error metrics may be applicable to dynamic updates <ref> [14] </ref>. Finally, more involved visibility structures, which provide detailed line-space information, such as the Visibility Complex [5], will probably be very useful for dynamic updates of illumination. Acknowledgements Thanks to Fredo Durand, Mathieu Desbrun and Rachel Orti for crucial help.
Reference: [15] <author> Brian E. Smits, James R. Arvo, and David H. Salesin. </author> <title> An importance-driven ra-diosity algorithm. </title> <journal> Computer Graphics, </journal> <volume> 26(4) </volume> <pages> 273-282, </pages> <month> July </month> <year> 1992. </year> <note> Proc. SIG-GRAPH '92 in Chicago. </note>
Reference-contexts: A typical hierarchical solution process proceeds by refining the links: when the link is considered to insufficiently or incorrectly represent the light transfer, the element is subdivided and sub-links are created <ref> [10, 15] </ref>. The decision to subdivide is based on a subdivision criterion which may be based on error-estimation or magnitude of energy transfer across a link. We will refer to a refiner, which is the module responsible for the refinement operation. <p> This additional refinement will be required for example around new shadow boundaries. Once these steps are complete, we have a complete hierarchical system which is ready to be resolved. In hierarchical radiosity <ref> [10, 15] </ref>, system resolution is performed by performing complete sweeps of the hierarchy: Gather and Push-Pull. In the context of clustering [13], irradiance is gathered through the links onto the H-elements; this irradiance is subsequently pushed down the hierarchy.
Reference: [16] <author> Seth J. Teller. </author> <title> Computing the antipenumbra of an area light source. </title> <journal> Computer Graphics, </journal> <volume> 26(4) </volume> <pages> 139-148, </pages> <month> July </month> <year> 1992. </year> <note> Proc. SIGGRAPH '92 in Chicago. </note>
Reference-contexts: One possibility would be the approach using Plucker coordinates as was presented by Teller <ref> [16] </ref>, or the intercepts of lines on two parallel planes [1]. Another approach would be that of ray-classification [2].
Reference: [17] <author> Seth J. Teller and Patrick M. Hanrahan. </author> <title> Global visibility algorithms for illumination computations. </title> <editor> In J. Kajiya, editor, </editor> <booktitle> SIGGRAPH 93 Conf. Proc. (Anaheim), Annual Conf. Series, </booktitle> <pages> pages 239-246. </pages> <publisher> ACM SIGGRAPH, </publisher> <month> August </month> <year> 1993. </year> <month> 8 </month>
Reference-contexts: For example, the thick black line in Fig. 2 (c) corresponds to a (subdivided) p-link, and the four thick lines in Fig. 2 (d) to the four resulting links. These ideas are related to the approach developed by Teller and Han-rahan <ref> [17] </ref>, where a similar link hierarchy was used to incrementally maintain blocker lists, as well as the ghost-link idea [12] or link demotion/promotion approach [6]. 3.2 Data structures To explicitly work in line-space, we need a representation of the set of lines between surfaces.
References-found: 17

