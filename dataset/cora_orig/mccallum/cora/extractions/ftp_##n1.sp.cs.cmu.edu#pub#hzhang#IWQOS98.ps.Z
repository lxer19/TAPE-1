URL: ftp://n1.sp.cs.cmu.edu/pub/hzhang/IWQOS98.ps.Z
Refering-URL: http://www.cs.cmu.edu/afs/cs.cmu.edu/user/hzhang/WWW/publications.html
Root-URL: 
Email: e-mail: fistoica,hzhangg@cs.cmu.edu  
Title: Exact Emulation of an Output Queueing Switch by a Combined Input Output Queueing Switch  
Author: Ion Stoica, Hui Zhang 
Keyword: QoS guarantees, Speedup, Output Queueing, Combined Input Output Queueing  
Address: Pittsburgh, PA 15213  
Affiliation: Carnegie Mellon University  
Abstract: Combined input output queueing switches (CIOQ) have better scaling properties than output queueing (OQ) switches. However, a CIOQ switch may have lower switch throughput, and more importantly, it is difficult to control delay in a CIOQ switch due to the existence of multiple queueing points. In this paper, we study the following problem, originally formulated and studied by Prab-hakar and Mckeown [16]: Can a CIOQ switch be designed to behave identically to an OQ switch? In [16], an algorithm was proposed so that a CIOQ switch with an internal speedup of four can behave identically to an OQ switch with FIFO as the output queueing discipline. In this paper, we propose a new switch scheduling algorithm called Joined Preferred Matching (JPM) that improves Prahhakar and Mckeown's results in two aspects. First, with JPM, the internal speedup needed for a CIOQ switch to achieve exact emulation of an OQ switch is only 2 instead of 4. Second, the result applies to OQ switches that employ a general class of output service disciplines, including FIFO and various Fair Queueing algorithms 1 This result lays the theoretical foundation for designing scalable high-speed CIOQ switches that can provide same throughput and QoS as OQ switches, but require lower speed internal memory. This research was sponsored by DARPA under contract numbers N66001-96-C-8528 and N00174-96-K-0002, and by a NSF Career Award under grant number NCR-9624979. Additional support was provided by Intel Corp., MCI, and Sun Microsys-tems. Views and conclusions contained in this document are those of the authors and should no be interpreted as representing the official policies, either expressed or implied, of DARPA, NSF, Intel, MCI, Sun, or the U.S. government. 1 We note that Chuang et al have independently come up with 
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> T. Anderson, S. Owicki, J. Saxe, and C. Thacker. </author> <title> High speed switch scheduling for local area networks. </title> <booktitle> In Proceedings of the Fifth International Conference on Architectural Support for Programming Languages and Operating Systems, </booktitle> <address> Boston, MA, </address> <month> October </month> <year> 1992. </year>
Reference-contexts: By maintaining at an input card a separate queue for each output card <ref> [1] </ref>, the HOL problem can be eliminated.
Reference: [2] <author> C-Y. Chang, A. J. Paultraj, and T. Kailath. </author> <title> A Broadcast Packet Switch Architecture with Input and Output Queueing. </title> <booktitle> In Proceedings of Globecom '94, </booktitle> <pages> pages 448-452, </pages> <year> 1994. </year>
Reference-contexts: Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads <ref> [2] </ref>, [4], [10], [12], [15]. While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches.
Reference: [3] <author> A. Charny, P. Krishna, N. Patel, and R. Simcoe. </author> <title> Algorithms for Providing Bandwidth and Delay Guarantees in Input-Buffered Crossbar with Speedup. </title> <booktitle> In IWQoS'98, </booktitle> <address> Napa, CA, </address> <month> May </month> <year> 1998. </year>
Reference-contexts: In <ref> [3] </ref>, [19], Charny et al. and Stephens and Zhang studied a similar problem. Their focus was not to emulate the exact behavior of an OQ switch, but to provide QoS guarantees that are comparable to those provided by an OQ switch.
Reference: [4] <author> J.S. Chen and T. E. Stern. </author> <title> Througput analysis optimal buffer allocation, and traffic imbalance study of a generic nonblocking packet switch. </title> <journal> IEEE Journal on Selected Areas in Communication, </journal> <volume> 9(3) </volume> <pages> 439-449, </pages> <month> September </month> <year> 1991. </year>
Reference-contexts: Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], <ref> [4] </ref>, [10], [12], [15]. While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches.
Reference: [5] <author> F.M. Chiussi, Y. Xia, and V.P. Kumar. </author> <title> Backpressure in shared-memory-based atm switches under multiplexed bursty sources. </title> <booktitle> In Proceedings of IEEE INFOCOM'96, </booktitle> <pages> pages 830-843, </pages> <address> San Francisco, CA, </address> <month> March </month> <year> 1996. </year>
Reference-contexts: This requires that the memory bandwidth and control systems speed to scale as a function of the number of cards in the switch, which places stringent limits on the system size. In order to reduce cost and simplify implementation, most high performance switches (both research <ref> [5] </ref>, [14] and commercial [7], [8] have chosen architectures employing some form of input buffering. <p> By maintaining at an input card a separate queue for each output card [1], the HOL problem can be eliminated. Additional flexibility can be obtained by having buffering at both input and output cards <ref> [5] </ref>, [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], [15].
Reference: [6] <author> S. T. Chuang, A. Goel, N. McKeown, and B. Prabhakar. </author> <title> Matching Output Queueing with a Combined Input Output Queued Switch, </title> <month> April </month> <year> 1998. </year> <type> Technical Report, </type> <institution> CSL-TR-98-758. </institution>
Reference-contexts: 1 We note that Chuang et al have independently come up with similar results <ref> [6] </ref>. I. Introduction Due to its conceptual simplicity, output queueing (OQ) represents a natural way to design an N fi N communication switch. In an OQ switch, when a packet arrives at an input port, it is immediately put into the buffer that resides at the corresponding output port. <p> Many of the widely used scheduling disciplines, such as First-In-First-Out (FIFO) and various Fair Queueing algorithms, are monotonic and work-conserving. We have recently learned that the same problem has been independently addressed by Chuang et al. in <ref> [6] </ref> with an algorithm similar to JPM. In addition, they show that a speedup of 21=N is both a necessary and sufficient condition for a FIFO OQ switch in which a slot consists of either one or two phases. <p> Furthermore, it can be shown that the average time complexity of the Gale-Shapely algorithm is O (N log N ). Finally, in the context of addressing the same problem Chuang et al <ref> [6] </ref> have shown that it is possible to reduce the matching complexity to N , by carefully considering only a sub-set of cells from the preference lists. III. <p> More precisely, in <ref> [6] </ref> it is shown that in a switch model in which a slot can consists of either one or two phases, a speedup of 2 1=N is a necessary condition. IV.
Reference: [7] <author> Ascend Communications. </author> <title> GRF family of switches. </title> <address> www.ascend.com. </address>
Reference-contexts: This requires that the memory bandwidth and control systems speed to scale as a function of the number of cards in the switch, which places stringent limits on the system size. In order to reduce cost and simplify implementation, most high performance switches (both research [5], [14] and commercial <ref> [7] </ref>, [8] have chosen architectures employing some form of input buffering. <p> By maintaining at an input card a separate queue for each output card [1], the HOL problem can be eliminated. Additional flexibility can be obtained by having buffering at both input and output cards [5], <ref> [7] </ref>, [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], [15].
Reference: [8] <institution> Digital Equipment Corporation. GIGAswitch. </institution> <note> www.networks.digital.com. </note>
Reference-contexts: In order to reduce cost and simplify implementation, most high performance switches (both research [5], [14] and commercial [7], <ref> [8] </ref> have chosen architectures employing some form of input buffering. <p> By maintaining at an input card a separate queue for each output card [1], the HOL problem can be eliminated. Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], <ref> [8] </ref>, [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], [15].
Reference: [9] <author> D. Gale and L. S. Shapley. </author> <title> College Admissions and the Stability Marriage. </title> <journal> Mathematical Monthly, </journal> <volume> 69 </volume> <pages> 9-15, </pages> <year> 1962. </year>
Reference-contexts: II. Algorithm Description To each input and output we associate a preference list. Based on these preference lists at the beginning of every phase we perform a stable matching <ref> [9] </ref> between inputs and outputs. Then, similarly to [16] we use this matching to transfer cells from inputs to outputs. Next, we define the notions of input and output preference lists, which are used to match inputs with outputs. <p> A matching that has no blocking pair is called stable; otherwise it is called instable. To compute a stable matching we use the Gale-Shapely algorithm <ref> [9] </ref>. This algorithm is summarized in Figure 1. works for a 3 fi 3 switch. The letter in each cell denotes the output port where the cell should be forwarded, while the number denotes its order in the preference list of that output.
Reference: [10] <author> A. L. Gupta and N. D. Georganas. </author> <title> Analysis of a Packet Switch with Input and Output Queueing. </title> <booktitle> In Proceedings of IEEE INFOCOM'91, </booktitle> <pages> pages 694-700, </pages> <address> Bal Harbour, FL, </address> <month> April </month> <year> 1991. </year>
Reference-contexts: Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], <ref> [10] </ref>, [12], [15]. While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches.
Reference: [11] <author> D. Gusfield and R. W. Irving. </author> <title> The Stable Mariage Problem: Structure and Algorithms, </title> <publisher> MIT Press. </publisher> <year> 1989. </year>
Reference-contexts: Figure 2 (d) shows the switch's state after cells are transferred ac 2 Note that since output b was rejected in the first iteration by input 1, it does no longer consider this input in the current iteration. cording to the resulting matching. A shown in <ref> [11] </ref>, the stable matching problem has a lower bound of (N 2 ), where N is the number of inputs/outputs. By using ranking arrays for expressing the preference of both inputs/outputs it can be shown that the Gale-Shapely algorithm can be implemented in N 2 time [11]. <p> A shown in <ref> [11] </ref>, the stable matching problem has a lower bound of (N 2 ), where N is the number of inputs/outputs. By using ranking arrays for expressing the preference of both inputs/outputs it can be shown that the Gale-Shapely algorithm can be implemented in N 2 time [11]. However, in order to construct the ranking arrays efficiently we need to maintain for each input, besides its preference list, a virtual list associated to each output which contains all cells destined to that output, ordered by their schedule times in the corresponding OQ schedule.
Reference: [12] <author> I. Iliadis and W. E. Denzel. </author> <title> Performance of Packet Switches with Input and Output Queueing. </title> <booktitle> In Proceedings of ICC '90, </booktitle> <pages> pages 747-753, </pages> <address> Atlanta, GA, </address> <month> April </month> <year> 1990. </year>
Reference-contexts: Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], <ref> [12] </ref>, [15]. While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches.
Reference: [13] <author> M. J. Karol, M. G. Hluchyj, and S. Morgan. </author> <title> Input versus output queueing on a space-division packet switch. </title> <journal> IEEE Transactions on Communications, </journal> <volume> 35(12) </volume> <pages> 1347-1356, </pages> <month> De-cember </month> <year> 1987. </year>
Reference-contexts: If the input buffer is FIFO, there is no contention at input cards, but it introduces the problem of Head-of-Line (HOL) blocking <ref> [13] </ref>: if the packet at the head of the queue is blocked due to contention of the output card, packets that are on the same input card but destined to other contention-free output cards cannot be forwarded.
Reference: [14] <author> N. McKeown, M. Izzard, A. Mekkittikul, B. Ellersick, and M. Horowitz. </author> <title> The Tiny Tera: A Packet Switch Core. </title> <booktitle> IEEE Micro, </booktitle> <pages> pages 26-33, </pages> <month> January </month> <year> 1997. </year>
Reference-contexts: This requires that the memory bandwidth and control systems speed to scale as a function of the number of cards in the switch, which places stringent limits on the system size. In order to reduce cost and simplify implementation, most high performance switches (both research [5], <ref> [14] </ref> and commercial [7], [8] have chosen architectures employing some form of input buffering. <p> By maintaining at an input card a separate queue for each output card [1], the HOL problem can be eliminated. Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], <ref> [14] </ref>, [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], [15].
Reference: [15] <author> Y. Oie, M. Murata, and H. Miyahara. </author> <title> Effects of Speedup in Nonblocking Packet Switch. </title> <booktitle> In Proceedings of ICC '89, </booktitle> <pages> pages 410-414, </pages> <address> Boston, MA, </address> <month> June </month> <year> 1989. </year>
Reference-contexts: flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], [17] Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], <ref> [15] </ref>. While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches.
Reference: [16] <author> B. Prabhakar and N. McKeown. </author> <title> On the Speedup Required for Combined Input and Output Queued Switching. </title> <type> manuscript, </type> <year> 1997. </year>
Reference-contexts: While it is important to achieve switch throughput, it is also critical to provide QoS guarantees, either for each individual flow, or for both individual flows and traffic aggregates. There are several recent studies on how to provide QoS guarantees in CIOQ switches. In <ref> [16] </ref>, Prabhakar and Mckeown considered the following problem: is it possible to construct a CIOQ switch that behaves identically to an OQ switch? They proposed an algorithm, called the the most urgent cell first algorithm (MUCFA), and showed that it can identically emulate an OQ switch that employs FIFO output queueing <p> In addition, they show that a speedup of 21=N is both a necessary and sufficient condition for a FIFO OQ switch in which a slot consists of either one or two phases. Similarly to <ref> [16] </ref> we assume that only fixed sized packets, also called cells, are transfered inside the switch. This assumption is supported by the design of many of today's high speed switches, where the variable length packets are segmented in cells when they arrive and are reassembled before they depart. <p> II. Algorithm Description To each input and output we associate a preference list. Based on these preference lists at the beginning of every phase we perform a stable matching [9] between inputs and outputs. Then, similarly to <ref> [16] </ref> we use this matching to transfer cells from inputs to outputs. Next, we define the notions of input and output preference lists, which are used to match inputs with outputs. <p> thenumber of cells at output j that are ahead of cell p in the OQ schedule. * pos (p; t) the position of cell p at time t in the preference list of input i. (The cell positions in the preference list are assumed to be one-indexed.) As noted in <ref> [16] </ref>, input and output contention are the only reasons for which a cell p is not transferred from its input i to its output j during a phase.
Reference: [17] <author> R. Simcoe and T. Pei. </author> <title> Perspectives on ATM Switch Architecture and the Influence of Traffic Patterns on Switch Design. </title> <journal> Computer Communication Review, </journal> <volume> 25(2) </volume> <pages> 93-105, </pages> <month> April </month> <year> 1995. </year>
Reference-contexts: By maintaining at an input card a separate queue for each output card [1], the HOL problem can be eliminated. Additional flexibility can be obtained by having buffering at both input and output cards [5], [7], [8], [14], <ref> [17] </ref> Most of the early studies on input queueing (IQ) and CIOQ switches have focused on the throughput achievable by these switches with various speed-ups and under different workloads [2], [4], [10], [12], [15].
Reference: [18] <author> D. C. Stephens, </author> <month> February </month> <year> 1998. </year> <type> Personal communication. </type>
Reference-contexts: be shown that even in a more general model where a phase duration is a fraction of a slot, and where a cell can be transferred during a phase only if it is already enqueued at the beginning of that phase, a speedup of two is an asymptotic lower bound <ref> [18] </ref>. More precisely, in [6] it is shown that in a switch model in which a slot can consists of either one or two phases, a speedup of 2 1=N is a necessary condition. IV.
Reference: [19] <author> D.C. Stephens and H. Zhang. </author> <title> Implementing distributed packet fair queueing in a scalable switch architecture. </title> <booktitle> In INFOCOM'98, </booktitle> <pages> pages 282-290, </pages> <address> San Francisco, CA, </address> <month> March </month> <year> 1998. </year>
Reference-contexts: In [3], <ref> [19] </ref>, Charny et al. and Stephens and Zhang studied a similar problem. Their focus was not to emulate the exact behavior of an OQ switch, but to provide QoS guarantees that are comparable to those provided by an OQ switch.
Reference: [20] <author> H. Zhang. </author> <title> Service Disciplines For Guaranteed Performance Service in Packet-Switching Networks. </title> <booktitle> Proceedings of the IEEE, </booktitle> <volume> 83(10) </volume> <pages> 1374-1399, </pages> <month> October </month> <year> 1995. </year>
Reference-contexts: Since buffering and queueing happen only at output ports in an OQ switch, it is possible to design output queue scheduling algorithms that provide various QoS guarantees <ref> [20] </ref>. However, OQ has fundamental scaling limitations. Because packets destined for the same output port may arrive simultaneously from many input ports, the output buffer needs to enqueue traffic at a much higher rate than a single port may dequeue it.
References-found: 20

