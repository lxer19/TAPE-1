URL: ftp://ftp.ee.lbl.gov/papers/sync_94.ps.Z
Refering-URL: http://www.cs.washington.edu/education/courses/590s/w98/index.html
Root-URL: 
Email: floyd@ee.lbl.gov, van@ee.lbl.gov  
Title: The Synchronization of Periodic Routing Messages  
Author: Sally Floyd and Van Jacobson, 
Note: To appear in the April 1994 IEEE/ACM Transactions on Networking  
Address: One Cyclotron Road, Berkeley CA 94720,  
Affiliation: Lawrence Berkeley Laboratory,  
Abstract: The paper considers a network with many apparently-independent periodic processes and discusses one method by which these processes can inadvertently become synchronized. In particular, we study the synchronization of periodic routing messages, and offer guidelines on how to avoid inadvertent synchronization. Using simulations and analysis, we study the process of synchronization and show that the transition from unsynchronized to synchronized traffic is not one of gradual degradation but is instead a very abrupt `phase transition': in general, the addition of a single router will convert a completely unsynchronized traffic stream into a completely synchronized one. We show that synchronization can be avoided by the addition of randomization to the traffic sources and quantify how much randomization is necessary. In addition, we argue that the inadvertent synchronization of periodic processes is likely to become an increasing problem in computer networks. 1
Abstract-found: 1
Intro-found: 1
Reference: [Ba92] <author> Baker, Mary, </author> <title> private communication, </title> <year> 1992. </year>
Reference-contexts: Because the recovery procedures involved synchronized timeouts, this synchronization resulted in a substantial delay in the recovery procedure <ref> [Ba92] </ref>. * Periodic routing messages. Unlike the client/server model or the external clock model, the synchronization of periodic routing messages involves seemingly-independent periodic processes. There are many routing protocols where each router transmits a routing message at periodic intervals.
Reference: [Bl88] <author> Blekhman, </author> <title> I.I., Synchronization in Science and Technology, </title> <publisher> ASME Press Translations, </publisher> <year> 1988. </year>
Reference-contexts: Department of Energy under Contract No. DE-AC03-76SF00098. 1 This paper is an expanded version of [FJ93]. 1 reality. There is a huge body of research on the tendency of dynamic systems to synchronize in the presence of weak coupling <ref> [Bl88] </ref>. As far back as the mid-seventeenth century, Huygens noticed that two unsynchronized pendulum clocks would keep in time if hung on the same wall, synchronized by the barely-perceptible vibrations each induced in the wall. As reported in [Bl88], synchronization has been studied in electronic circuits, a wide range of mechanical <p> tendency of dynamic systems to synchronize in the presence of weak coupling <ref> [Bl88] </ref>. As far back as the mid-seventeenth century, Huygens noticed that two unsynchronized pendulum clocks would keep in time if hung on the same wall, synchronized by the barely-perceptible vibrations each induced in the wall. As reported in [Bl88], synchronization has been studied in electronic circuits, a wide range of mechanical objects, and biological systems such as cell populations and communities of fireflies. Most of these systems exhibit a tendency towards synchronization that is independent of the physical constants and initial conditions of the system [En92]. <p> In addition, this Markov model seems (to us) fairly simple and straightforward. However, there are many possible approaches to the analysis of synchronization; in this section we discuss briefly coupled nonlinear oscillators and coupling methods for Markov processes. The approach to synchronization in <ref> [Bl88] </ref> concerns coupled nonlinear oscillators and uses the tools from nonlinear dynamic systems. The book shows that the tendency of synchronization is characteristic of a broad class of dynamic systems. Because [Bl88] does not treat the question of synchronization in the presence of randomization, the results are not immediately applicable to <p> The approach to synchronization in <ref> [Bl88] </ref> concerns coupled nonlinear oscillators and uses the tools from nonlinear dynamic systems. The book shows that the tendency of synchronization is characteristic of a broad class of dynamic systems. Because [Bl88] does not treat the question of synchronization in the presence of randomization, the results are not immediately applicable to the synchronization of routing messages.
Reference: [BrChClPo93] <author> Braun, H., Chinoy, B., Claffy, K., and Polyzos, G., </author> <title> "Analysis and Modeling of Wide-Area Networks: Annual Status Report", </title> <type> CSL, </type> <institution> University of California at San Diego, </institution> <month> February </month> <year> 1993. </year>
Reference-contexts: However, many network traffic studies <ref> [Pa93a, SaAgGuJa92, Ja92, BrChClPo93] </ref> show that the total traffic is not uniform but instead is highly synchronized.
Reference: [Ca90] <author> Carta, D., </author> <title> "Two Fast Implementations of the `Minimal Standard' Random Number Generator", </title> <journal> Commun. ACM, V.33 N.1, </journal> <month> January </month> <year> 1990, </year> <month> p.87-88. </month>
Reference-contexts: We believe there are analogous interactions between packet streams and we intend to explore these mechanisms for the emergence of large-scale structure in packet-switched networks. 9 Pseudo-random numbers can be efficiently generated by a random number generator <ref> [Ca90] </ref>. 25 As the Internet expands to new types of traffic (e.g., voice and video), new routing patterns (multicast distribution), and new gateway scheduling disciplines (Quality-of-Service for realtime traffic), it is important to anticipate the large-scale structure that might be introduced by these changes.
Reference: [Ca92] <author> Casner, S., and Deering, S., </author> <title> "First IETF Internet Audiocast", </title> <journal> Computer Communication Review, V.22 N.3, </journal> <month> July </month> <year> 1992, </year> <month> p.92-97. </month>
Reference-contexts: Because 30 seconds is the default update time for RIP, these long intervals of packet losses are conjectured to result from RIP routing updates; it is not known if this problem involves synchronization. In other instances periodic 30-second audio 3 For a report on the first such audiocast, see <ref> [Ca92] </ref>. 4 . . . . .. . ... . . . . . . . . . . . . . . . . . . . . . . . .. . . . . . . . . . . . . . . . . . .
Reference: [De93] <author> Deering, S., </author> <title> private communication, </title> <year> 1993. </year>
Reference-contexts: For example, in the Xerox PARC internal network, measurements <ref> [De93] </ref> show their cisco routers require roughly 300 ms. to process a routing message (1 ms. per route times 300 routes per update). From the results in Section 5, the routers would have to add at least a second of randomness to their update intervals to prevent synchronization. <p> Pings Autocorrelation 0 50 100 150 200 0.2 0.6 Time (seconds) Audio lost (seconds) 0 100 200 300 400 500 600 0.5 1.5 packet losses have been conclusively traced to RIP routing updates <ref> [De93] </ref>, and there is some indirect evidence of synchronization. In our "ping" experiments of the Internet in May 1992 we found many examples of periodic packet drops for which we have no explanation.
Reference: [En92] <author> Engel, E.M.R.A., </author> <title> A Road to Randomness in Physical Systems, </title> <publisher> Springer-Verlag, </publisher> <year> 1992. </year>
Reference-contexts: Most of these systems exhibit a tendency towards synchronization that is independent of the physical constants and initial conditions of the system <ref> [En92] </ref>. This research suggests that a complex coupled system like a modern computer network evolves to a state of order and synchronization if left to itself.
Reference: [Fe66] <author> Feller, W., </author> <title> An Introduction to Probability Theory and Its Applications, V. II, </title> <publisher> John Wiley & Sons, </publisher> <year> 1966. </year>
Reference-contexts: Because we assume that T c &lt; 2T r + T d , there is always a nonzero probability that a cluster of size i breaks up into smaller clusters. From <ref> [Fe66, p.22] </ref>, p i;i1 = P rob:(T c &lt; L + T d ) = 1 2T r (1) Now we estimate p i;i+1 , the probability that the system moves from state i to state i + 1 in one round. <p> For T d = 0, each of the i timer expirations is uniformly distributed in the interval [T p T r , T p + T r ]. Given i events uniformly distributed on the interval [0, 1], the expected value of the smallest event is 1=(i + 1) <ref> [Fe66, p.24] </ref>. Thus the first of the i timers expires, on average, T p T r + 2T r =(i + 1) = T p T r (i 1)=(i + 1) seconds after the timers are set.
Reference: [FJ92] <author> Floyd, S., and Jacobson, V., </author> <title> "On Traffic Phase Effects in Packet-Switched Gateways", Internetworking: </title> <journal> Research and Experience, V.3 N.3, </journal> <month> September </month> <year> 1992, </year> <month> p.115-156. </month>
Reference-contexts: As an example of injecting randomness, the synchronization of window increase/decrease cycles can be avoided by adding randomization to the gateway's algorithm for choosing packets to drop during periods of congestion <ref> [FJ92] </ref>. (This randomization has the advantage of avoiding other unintended phase effects as well.) * Synchronization to an external clock. Two processes can become synchronized with each other simply by both being synchronized to an external clock.
Reference: [FJ93] <author> Floyd, S., and Jacobson, V., </author> <title> "The Synchronization of Periodic Routing Messages," </title> <journal> SIG COMM 1993, </journal> <month> September </month> <year> 1993, </year> <pages> pp. 33-44. 26 </pages>
Reference-contexts: Department of Energy under Contract No. DE-AC03-76SF00098. 1 This paper is an expanded version of <ref> [FJ93] </ref>. 1 reality. There is a huge body of research on the tendency of dynamic systems to synchronize in the presence of weak coupling [Bl88].
Reference: [Gr82] <author> Greene, D.H., and Knuth, D.E., </author> <title> Mathematics for the Analysis of Algorithms, </title> <publisher> Birkhauser, </publisher> <year> 1982. </year>
Reference: [G78] <author> Griffeath, D., </author> <title> "Coupling Methods for Markov Processes", Advances in Mathematics Supplementary Studies, V.2, </title> <publisher> Academic Press, </publisher> <year> 1978, </year> <pages> pp. 1-43. </pages>
Reference-contexts: These "pulse-coupled" oscillator systems are similar to our model of routing messages where the timing of one router's routing messages can be affected by the arrival of routing messages from a neighboring router. A different approach to synchronization comes from the literature on coupling methods for Markov processes <ref> [G78] </ref>. In the classical coupling [G78, p.13], two independent copies of a Markov process evolve until they reach a common state then, from that point, the two Markov processes use the same transition mechanism and follow the same path. <p> A different approach to synchronization comes from the literature on coupling methods for Markov processes [G78]. In the classical coupling <ref> [G78, p.13] </ref>, two independent copies of a Markov process evolve until they reach a common state then, from that point, the two Markov processes use the same transition mechanism and follow the same path.
Reference: [He88] <author> Hedrick, C., </author> <title> "Routing Information Protocol", Request For Comments (RFC) 1058, </title> <month> June </month> <year> 1988. </year>
Reference-contexts: Although it has been speculated that these packet drops were also connected with synchronization, it is unclear, and there is no direct evidence [Sc92, Lo93]. Periodic packet drops have been demonstrated associated with RIP (the Routing Information Protocol <ref> [He88] </ref>) as well as with IGRP. Figure 3 shows audio packet losses during an audiocast 3 of the December 1992 Packet Video workshop [Ja92]. The x-axis shows the time in seconds; the y-axis shows the duration of each audio outage in seconds. <p> The first triggered update results in a wave of triggered updates from neighboring routers. Not all implementations of these routing protocols correspond to the Periodic Messages model in this paper. The RFC for RIP <ref> [He88] </ref> mentions that when there are many gateways on a single network, there is a tendency for the periodic routing messages to synchronize. <p> A second method for avoiding synchronization is to implement a routing timer that is independent of external events (as mentioned in the specifications for RIP) <ref> [He88, p.23] </ref>. If each router resets its timer immediately after the timer expires (regardless of its activities when the timer expires) and if routers don't reset their timers after triggered updates, then the process of timer synchronization described in this paper might be avoided.
Reference: [He91] <author> Hedrick, C. L., </author> <title> "An Introduction to IGRP", </title> <month> August </month> <year> 1991, </year> <note> available by anonymous ftp from shiva.com in /doc/igrp.ps.Z. </note>
Reference-contexts: Earlier investigation of Internet behavior had also reported a degradation in service with a 90-second periodicity on paths to MIT [SaAgGuJa92]. These packet drops were determined to be caused by IGRP (the Inter-Gateway Routing Protocol <ref> [He91] </ref>) routing updates at the NEARnet routers [Sc92]. The routers were unable to forward other packets while large routing updates were being processed.
Reference: [Ja92] <author> Jacobson, V., </author> <title> Audio losses during yesterday's packet video workshop audiocast, </title> <journal> Message-ID 9212112039.AA24349@rx7.ee.lbl.gov archived in nic.es.net:ietf.rem-conf, Nov. </journal> <volume> 11, </volume> <year> 1992. </year>
Reference-contexts: However, many network traffic studies <ref> [Pa93a, SaAgGuJa92, Ja92, BrChClPo93] </ref> show that the total traffic is not uniform but instead is highly synchronized. <p> Periodic packet drops have been demonstrated associated with RIP (the Routing Information Protocol [He88]) as well as with IGRP. Figure 3 shows audio packet losses during an audiocast 3 of the December 1992 Packet Video workshop <ref> [Ja92] </ref>. The x-axis shows the time in seconds; the y-axis shows the duration of each audio outage in seconds. The little blips more-or-less randomly spread along the time axis represent single packet losses.
Reference: [KK93] <author> Kerner, B.S., and Konhauser, P., </author> <title> "Cluster effect in initially homogeneous traffic flow", </title> <journal> Physical Review E, V.48 N.4, </journal> <pages> pp. 2335-2338. </pages>
Reference-contexts: Individual strategies of reducing speed during congestion result in a collective decrease in traffic flow as the vehicle concentration increases past a certain density. <ref> [KK93] </ref> shows that given an initially homogeneous traffic flow, regions of high density and low average velocity (clusters of cars) can spontaneously appear.
Reference: [Li93] <author> Li, Tony, </author> <title> private communication, </title> <year> 1993. </year>
Reference-contexts: As an example of implementations that don't conform to the Periodic Messages model, in some implementations of IGRP and RIP routers reset their routing timers before the outgoing routing message is prepared, and routers don't reset their routing timers after triggered updates <ref> [Li93] </ref>. Thus the Periodic Messages model illustrates only one possible mechanism by which routing messages can become synchronized. Wherever there are interactions between routers, or between a router and the network, there could exist mechanisms that lead to synchronization. 4 Simulations This section describes simulations of the Periodic Messages model.
Reference: [Lo93] <author> Long, Dan, </author> <title> private communication, </title> <year> 1993. </year>
Reference-contexts: Although it has been speculated that these packet drops were also connected with synchronization, it is unclear, and there is no direct evidence <ref> [Sc92, Lo93] </ref>. Periodic packet drops have been demonstrated associated with RIP (the Routing Information Protocol [He88]) as well as with IGRP. Figure 3 shows audio packet losses during an audiocast 3 of the December 1992 Packet Video workshop [Ja92].
Reference: [Mi87] <author> Mickens, R. E., </author> <title> Difference Equations, </title> <publisher> Van Nostrand Reinhold, </publisher> <year> 1987. </year>
Reference: [Mi83] <author> Mills, </author> <title> D.L., "DCN Local-Network Protocols", Request For Comments (RFC) 891, </title> <month> Dec. </month> <year> 1983. </year>
Reference-contexts: This model was initially patterned after DECnet's DNA Phase IV, but other routing protocols that can conform to this model include EGP (Exterior Gateway Protocol) [M84], Hello <ref> [Mi83] </ref>, IGRP, and RIP. In these routing protocols, each router on a network transmits a routing message at periodic intervals. This ensures that routing tables are kept up-to-date even if routing update messages are occasionally lost. The Periodic Messages model behaves as follows: 1.
Reference: [M84] <author> Mills, </author> <title> D.L., "Exterior Gateway Protocol Formal Specification", </title> <type> RFC 904, </type> <month> April </month> <year> 1984. </year>
Reference-contexts: This model was initially patterned after DECnet's DNA Phase IV, but other routing protocols that can conform to this model include EGP (Exterior Gateway Protocol) <ref> [M84] </ref>, Hello [Mi83], IGRP, and RIP. In these routing protocols, each router on a network transmits a routing message at periodic intervals. This ensures that routing tables are kept up-to-date even if routing update messages are occasionally lost. The Periodic Messages model behaves as follows: 1.
Reference: [Pa93a] <author> Paxson, V., </author> <title> "Empirically-Derived Analytic Models of Wide Area TCP Connections", </title> <note> LBL Tech. Report LBL-34086 , May 1993. </note>
Reference-contexts: However, many network traffic studies <ref> [Pa93a, SaAgGuJa92, Ja92, BrChClPo93] </ref> show that the total traffic is not uniform but instead is highly synchronized. <p> Two processes can become synchronized with each other simply by both being synchronized to an external clock. For example, <ref> [Pa93a] </ref> shows DECnet traffic peaks on the hour and half-hour intervals; [Pa93b] shows peaks in ftp traffic as several users fetch the most recent weather map from Colorado every hour on the hour. * Client-server models. <p> Various forms of periodic traffic are becoming an increasingly-large component of Internet traffic. This periodic traffic includes not only routing updates and traffic resulting from the increasing use of periodic background scripts by individual users <ref> [Pa93a] </ref>, but realtime traffic (such as video traffic) that has a periodic structure. Although the periodic structure of video traffic is generally not affected by feedback from the network, there are still possibilities for synchronization.
Reference: [Pa93b] <author> Paxson, V., </author> <title> "Growth Trends in Wide-Area TCP Connections", </title> <note> submitted to IEEE Network, </note> <year> 1993. </year>
Reference-contexts: Two processes can become synchronized with each other simply by both being synchronized to an external clock. For example, [Pa93a] shows DECnet traffic peaks on the hour and half-hour intervals; <ref> [Pa93b] </ref> shows peaks in ftp traffic as several users fetch the most recent weather map from Colorado every hour on the hour. * Client-server models. Multiple clients can become synchronized as they wait for service from a busy or recovering server.
Reference: [PH71] <author> Prigogine, I. and Herman, R., </author> <title> Kinetic Theory of Vehicular Traffic, </title> <publisher> American Elsevier, </publisher> <year> 1971. </year>
Reference-contexts: One model of large-scale structure comes from the kinetic theory of automobile traffic <ref> [PH71] </ref>. Individual drivers, each seeking to optimize their own goals, can produce collective traffic patterns akin to the coordinated motion of flocks of birds or schools of fish.
Reference: [Ro85] <author> Ross, S. M., </author> <title> Introduction to Probability Models, </title> <publisher> Academic Press, </publisher> <year> 1985. </year>
Reference-contexts: Let P j;x be the probability that the Markov chain in state j first moves to state j + 1 on round x, given that the Markov chain moves from state j to state j + 1. The equation for t j;j+1 is as follows <ref> [Ro85, p.37] </ref>: t j;j+1 = x=1 = x=1 x1 p j;j+1 2 : Similarly, the equation for t j;j1 is as follows: t j;j1 = (p j;j1 + p j;j+1 ) 2 6 This solution could also be verified by the reader by substituting the right-hand side of Equation (4) into
Reference: [SaAgGuJa92] <author> Sanghi, D., Agrawala, A., Gudmundsson, O., and Jain, B., </author> <title> "Experimental Assessment of End-to-End Behavior on Internet", </title> <institution> University of Maryland Report UMIACS-TR-92-62, </institution> <month> June </month> <year> 1992. </year>
Reference-contexts: However, many network traffic studies <ref> [Pa93a, SaAgGuJa92, Ja92, BrChClPo93] </ref> show that the total traffic is not uniform but instead is highly synchronized. <p> Further experiments determined that these packet drops were occurring at the NEARnet (New England Academic and Research Network) core routers. Earlier investigation of Internet behavior had also reported a degradation in service with a 90-second periodicity on paths to MIT <ref> [SaAgGuJa92] </ref>. These packet drops were determined to be caused by IGRP (the Inter-Gateway Routing Protocol [He91]) routing updates at the NEARnet routers [Sc92]. The routers were unable to forward other packets while large routing updates were being processed.
Reference: [Sc92] <author> Schiller, Jeffrey, </author> <title> private communication, </title> <month> Sept. </month> <year> 1992. </year>
Reference-contexts: Earlier investigation of Internet behavior had also reported a degradation in service with a 90-second periodicity on paths to MIT [SaAgGuJa92]. These packet drops were determined to be caused by IGRP (the Inter-Gateway Routing Protocol [He91]) routing updates at the NEARnet routers <ref> [Sc92] </ref>. The routers were unable to forward other packets while large routing updates were being processed. <p> Although it has been speculated that these packet drops were also connected with synchronization, it is unclear, and there is no direct evidence <ref> [Sc92, Lo93] </ref>. Periodic packet drops have been demonstrated associated with RIP (the Routing Information Protocol [He88]) as well as with IGRP. Figure 3 shows audio packet losses during an audiocast 3 of the December 1992 Packet Video workshop [Ja92].
Reference: [SS93] <author> Strogatz, S., and Stewart, I., </author> <title> "Coupled Oscillators and Biological Synchronization", </title> <journal> Sci entific American, </journal> <month> December </month> <year> 1993, </year> <pages> pp. 102-109. </pages>
Reference-contexts: Because [Bl88] does not treat the question of synchronization in the presence of randomization, the results are not immediately applicable to the synchronization of routing messages. Mathematical models have recently been developed to analyze "pulse-coupled" oscillator systems <ref> [SS93] </ref> such as communities of Thai fireflies, where the periodic pattern of one firefly's flashing is affected by the others nearby.
Reference: [Tr92] <author> Treese, W., </author> <title> "Self-Synchronization Phenomena in Computer Networks", MIT class project, </title> <month> Dec. </month> <year> 1992. </year>
Reference-contexts: These simulations are shown in Figure 10; the random component T r ranges from 2:3T c to 2:8T c . As the random component increases, the simulations return more quickly to the unsynchronized state. Our simulation results are consistent with simulations of the same model in <ref> [Tr92] </ref>. In addition to simulations, preliminary results from experiments by Treese have shown synchronization of systems on an Ethernet [Tr94]. The experiments use an algorithm similar to the Periodic Messages model.
Reference: [Tr94] <author> Treese, W., </author> <title> private communication, </title> <year> 1994. </year>
Reference-contexts: As the random component increases, the simulations return more quickly to the unsynchronized state. Our simulation results are consistent with simulations of the same model in [Tr92]. In addition to simulations, preliminary results from experiments by Treese have shown synchronization of systems on an Ethernet <ref> [Tr94] </ref>. The experiments use an algorithm similar to the Periodic Messages model. The results suggest that the Periodic Messages model captures a realistic possible behavior of real computer systems. 11 . .. . .. . . . . . .. .
Reference: [VMS88] <institution> VMS Networking Manual, </institution> <note> Version 5.0, </note> <institution> AA-LA48A-TE, Digital Equipment Corpora tion, Maynard Massachusetts, </institution> <month> April </month> <year> 1988. </year>
Reference-contexts: In general, there are significant patterns of periodic packet drops and delays in the Internet. We began this investigation in 1988 after observing synchronized routing messages from DEC-net's DNA Phase IV (the DIGITAL Network Architecture) <ref> [VMS88] </ref> on a local Ethernet at LBL (Lawrence Berkeley Laboratory). Each DECnet router transmitted a routing message at 120-second intervals. Within hours after bringing up the routers on the network after a failure, the routing messages from the various routers were completely synchronized.
Reference: [ZhCl90] <author> Zhang, L., and Clark, D., </author> <title> "Oscillating Behavior of Network Traffic: A Case Study Simulation", Internetworking: </title> <journal> Research and Experience, </journal> <volume> Vol. 1 N.2, </volume> <year> 1990, </year> <pages> pp. 101-112. 27 </pages>
Reference-contexts: There are many examples of unanticipated synchronized behavior in networks: * TCP window increase/decrease cycles. A well-known example of unintended synchronization is the synchronization of the window increase/decrease cycles of separate TCP connections sharing a common bottleneck gateway <ref> [ZhCl90] </ref>. This example illustrates that unless we actively engineer to avoid synchronization, such as by injecting randomness into the network, synchronization is likely to be the equilibrium state.
References-found: 32

