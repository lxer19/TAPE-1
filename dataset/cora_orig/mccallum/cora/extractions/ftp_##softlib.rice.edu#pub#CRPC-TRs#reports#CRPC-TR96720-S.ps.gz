URL: ftp://softlib.rice.edu/pub/CRPC-TRs/reports/CRPC-TR96720-S.ps.gz
Refering-URL: http://www.crpc.rice.edu/CRPC/softlib/TRs_online.html
Root-URL: 
Title: Practical Experience in the Dangers of Heterogeneous Computing  
Author: L. S. Blackford A. Cleary J. Demmel I. Dhillon J. Dongarra S. Hammarling A. Petitet H. Ren K. Stanley R. C. Whaley 
Abstract: Special challenges exist in writing reliable numerical library software for heterogeneous computing environments. Although a lot of software for distributed memory parallel computers has been written, porting this software to a network of workstations requires careful consideration. The symptoms of heterogeneous computing failures can range from erroneous results without warning to deadlock. Some of the problems are straightforward to solve, but for others the solutions are not so obvious, or incur an unacceptable overhead. Making software robust on heterogeneous systems often requires additional communication. This paper addresses the issue of writing reliable numerical software for networks of heterogeneous computers. We describe and illustrate the problems encountered during the development of ScaLAPACK and the NAG Numerical PVM Library. Where possible, we suggest solutions to avoid potential pitfalls, or if that is not possible, recommend that the software is not used on heterogeneous networks.
Abstract-found: 1
Intro-found: 1
Reference: [1] <author> E. Anderson, Z. Bai, C. H. Bischof, J. Demmel, J. J. Dongarra, J. Du Croz, A. Green baum, S. Hammarling, A. McKenney, S. Ostrouchov, and D. C. Sorensen. </author> <title> LAPACK Users' Guide. </title> <publisher> SIAM, </publisher> <address> Philadelphia, PA, USA, 2nd edition, </address> <year> 1995. </year> <note> (Also available in Japanese, published by Maruzen, Tokyo, translated by Dr Oguni). </note>
Reference-contexts: The LAPACK and ScaLAPACK software is available from Netlib 8 , as is the documentation and the LAPACK Working Notes. A number of the other references in the bibliography can also be found via Netlib, particularly <ref> [1] </ref>, [9] and [18]. 8 http://www.netlib.org/ 10 10 Acknowledgments We wish to thank all of our ScaLAPACK and NAG colleagues for a number of useful discussions on heterogeneous computing and their valuable input to this paper.
Reference: [2] <author> J. Choi, J. Demmel, I. Dhillon, J. J. Dongarra, S. Ostrouchov, A. Petitet, K. Stanley, D. W. Walker, and R. C. Whaley. </author> <title> ScaLAPACK: A portable linear algebra library for distributed memory computers design issues and performance. </title> <editor> In J. J. Dongarra, K. Masden, and J. Wasniewski, editors, </editor> <booktitle> Applied Parallel Computing, </booktitle> <pages> pages 95-106. </pages> <publisher> Springer-Verlag, </publisher> <address> Berlin, Germany, </address> <year> 1995. </year> <booktitle> (Proceedings of the Second International Workshop, PARA '95, </booktitle> <address> Lyngby, Denmark. </address> <note> See also LAPACK Working Note No.95). </note>
Reference-contexts: This report is an updated version of [5], which takes into account problems encountered during the preparation of Version 1.2 of ScaLAPACK <ref> [2] </ref>. 2 Motivation and Background The challenges of heterogeneous computing discussed in this paper came to light during the development of ScaLAPACK and the NAG Numerical PVM Library ([17]). ScaLAPACK is a library of high performance linear algebra routines for distributed memory MIMD machines.
Reference: [3] <author> J. Choi, J. J. Dongarra, S. Ostrouchov, A. Petitet, D. W. Walker, and R. C. Whaley. </author> <title> A proposal for a set of parallel basic linear algebra subprograms. </title> <editor> In J. J. Dongarra, K. Masden, and J. Wasniewski, editors, </editor> <booktitle> Applied Parallel Computing, </booktitle> <pages> pages 107-114. </pages> <publisher> Springer-Verlag, </publisher> <address> Berlin, Germany, </address> <year> 1995. </year> <booktitle> (Proceedings of the Second International Workshop, PARA '95, </booktitle> <address> Lyngby, Denmark. </address> <note> See also LAPACK Working Note No.100). </note>
Reference: [4] <author> J. Demmel, I. Dhillon, and H. Ren. </author> <title> On the correctness of parallel bisection in floating point. </title> <journal> ETNA, </journal> <volume> 3 </volume> <pages> 116-149, </pages> <year> 1995. </year> <note> (See also LAPACK Working Note No.70). </note>
Reference-contexts: In this example we have not yet decided what to do about all these problems, so we currently only guarantee correctness of PDSYEVX for networks of processors with identical floating point formats (but slightly different floating point operations turn out to be acceptable). See <ref> [4] </ref> for further discussion. Assigning the work by index rather than by range and sorting all the eigenvalues at the end may give the desired result with modest overhead. Of course, if floating point formats differ across processors, sorting is a problem in itself. This requires further investigation.
Reference: [5] <author> J. Demmel, J. J. Dongarra, S. Hammarling, S. Ostrouchov, and K. Stanley. </author> <title> The dangers of heterogeneous network computing: Heterogenous networks considered harmful. </title> <booktitle> In Proceedings Heterogeneous Computing Workshop '96, </booktitle> <pages> pages 64-71. </pages> <publisher> IEEE Computer Society Press, Los Alamitos, </publisher> <address> CA, USA, </address> <year> 1996. </year>
Reference-contexts: Some additional considerations arising from what we regard as poor arithmetic, ranging from lack of full IEEE arithmetic support to unnecessary overflow in complex arithmetic, are discussed in Section 7. This report is an updated version of <ref> [5] </ref>, which takes into account problems encountered during the preparation of Version 1.2 of ScaLAPACK [2]. 2 Motivation and Background The challenges of heterogeneous computing discussed in this paper came to light during the development of ScaLAPACK and the NAG Numerical PVM Library ([17]).
Reference: [6] <author> J. J. Dongarra, J. Du Croz, I. S. Duff, and S. Hammarling. </author> <title> A set of Level 3 Basic Linear Algebra Subprograms. </title> <journal> ACM Trans. Math. Software, </journal> <volume> 16 </volume> <pages> 1-28, </pages> <year> 1990. </year> <title> (Algorithm 679). </title>
Reference: [7] <author> J. J. Dongarra, J. Du Croz, S. Hammarling, and R. J. Hanson. </author> <title> An extended set of FORTRAN Basic Linear Algebra Subprograms. </title> <journal> ACM Trans. Math. Software, </journal> <volume> 14 </volume> <pages> 1-32, 399, </pages> <year> 1988. </year> <title> (Algorithm 656). </title>
Reference: [8] <author> J. J. Dongarra and R. C. Whaley. </author> <title> A users' guide to the BLACS v1.0. </title> <note> LAPACK Working Note No.94. Technical Report CS-95-281, </note> <institution> Department of Computer Science, University of Tennessee, 107 Ayres Hall, </institution> <address> Knoxville, TN 37996-1301, USA, </address> <year> 1995. </year>
Reference-contexts: The BLACS permit a process to be a member of more than one, possibly overlapping, grids, each one labeled by a context. Some message passing systems also include the idea of a context; in MPI it is termed a communicator. See <ref> [8] </ref> and [18] for further details. <p> See <ref> [8] </ref> for further details on the BLACS. PROGRAM SUBNRM * * .. Local Scalars .. INTEGER IAM, ICNTXT, MYCOL, MYROW, NPCOL, NPROCS, NPROW REAL TWO * .. Local Arrays .. REAL X ( 1 ) * .. External Subroutines ..
Reference: [9] <author> A. Geist, A. Beguelin, J. J. Dongarra, W. Jiang, R. Manchek, and V. Sunderam. </author> <title> PVM: Parallel Virtual Machine. A Users' Guide and Tutorial for Networked Parallel Computing. </title> <publisher> MIT Press, </publisher> <address> Cambridge, MA, USA, </address> <year> 1994. </year>
Reference-contexts: The LAPACK and ScaLAPACK software is available from Netlib 8 , as is the documentation and the LAPACK Working Notes. A number of the other references in the bibliography can also be found via Netlib, particularly [1], <ref> [9] </ref> and [18]. 8 http://www.netlib.org/ 10 10 Acknowledgments We wish to thank all of our ScaLAPACK and NAG colleagues for a number of useful discussions on heterogeneous computing and their valuable input to this paper.
Reference: [10] <author> G. H. Golub and C. F. Van Loan. </author> <title> Matrix Computations. </title> <publisher> The Johns Hopkins University Press, </publisher> <address> Baltimore, MD, USA, 2nd edition, </address> <year> 1989. </year> <month> 13 </month>
Reference-contexts: Since H is orthogonal we see that jfij = kxk 2 : If jfij is very small (subnormal or close to being subnormal), DLARFG scales x and recomputes kxk 2 . This computation is at the heart of the LAPACK QR, and other, factorizations (see for example <ref> [10] </ref>). In the case of the equivalent ScaLAPACK routine PDLARFG, x will typically be distributed over several processors, each of which participates in the computation of kxk 2 and, if necessary, scales its portion of the vector x and recomputes kxk 2 .
Reference: [11] <author> S. Hammarling. </author> <title> Parallel library work at NAG. </title> <editor> In J. J. Dongarra and B. Tourancheau, editors, </editor> <booktitle> Environments and Tools for Parallel Scientific Computing, </booktitle> <pages> pages 172-182. </pages> <publisher> SIAM, </publisher> <address> Philadelphia, PA, USA, </address> <year> 1994. </year> <booktitle> (Proceedings of the Second Workshop, </booktitle> <address> Townsend, TN, USA). </address>
Reference: [12] <author> N. J. Higham. </author> <title> Accuracy and Stability of Numerical Algorithms. </title> <publisher> SIAM, </publisher> <address> Philadelphia, PA, USA, </address> <year> 1996. </year>
Reference-contexts: See <ref> [12, Chapter 2] </ref> for further details. 4 4 Machine Parameters Machine parameters such as the relative machine precision, the underflow and overflow thresholds, and the smallest value which can be safely reciprocated (which in LAPACK is called sfmin), are frequently used in numerical linear algebra computations, as well as in many
Reference: [13] <author> IEEE. </author> <title> ANSI/IEEE Standard for Binary Floating Point Arithmetic: </title> <address> Std 754-1985. </address> <publisher> IEEE Press, </publisher> <address> New York, NY, USA, </address> <year> 1985. </year>
Reference: [14] <author> IEEE. </author> <title> ANSI/IEEE Standard for Radix Independent Floating Point Arithmetic: </title> <address> Std 854-1987. </address> <publisher> IEEE Press, </publisher> <address> New York, NY, USA, </address> <year> 1987. </year>
Reference: [15] <author> IEEE. </author> <title> IEEE Standard for Shared-Data Formats Optimized for Scalable Coherent In terface (SCI) Processors: </title> <publisher> Std 1596.5-1993. IEEE Press, </publisher> <address> New York, NY, USA, </address> <year> 1994. </year>
Reference: [16] <author> C. L. Lawson, R. J. Hanson, D. Kincaid, and F. T. Krogh. </author> <title> Basic Linear Algebra Subprograms for FORTRAN usage. </title> <journal> ACM Trans. Math. Software, </journal> <volume> 5 </volume> <pages> 308-323, </pages> <year> 1979. </year>
Reference: [17] <author> K. McDonald. </author> <title> The NAG numerical PVM library. </title> <editor> In J. J. Dongarra, K. Masden, and J. Wasniewski, editors, </editor> <booktitle> Applied Parallel Computing, </booktitle> <pages> pages 419-428. </pages> <publisher> Springer-Verlag, </publisher> <address> Berlin, Germany, </address> <year> 1995. </year> <booktitle> (Proceedings of the Second International Workshop, PARA '95, </booktitle> <address> Lyngby, Denmark). </address>
Reference: [18] <author> M. Snir, S. W. Otto, S. Huss-Lederman, D. W. Walker, and J. J. Dongarra. </author> <title> MPI: The Complete Reference. </title> <publisher> MIT Press, </publisher> <address> Cambridge, MA, USA, </address> <year> 1996. </year>
Reference-contexts: The BLACS permit a process to be a member of more than one, possibly overlapping, grids, each one labeled by a context. Some message passing systems also include the idea of a context; in MPI it is termed a communicator. See [8] and <ref> [18] </ref> for further details. <p> The LAPACK and ScaLAPACK software is available from Netlib 8 , as is the documentation and the LAPACK Working Notes. A number of the other references in the bibliography can also be found via Netlib, particularly [1], [9] and <ref> [18] </ref>. 8 http://www.netlib.org/ 10 10 Acknowledgments We wish to thank all of our ScaLAPACK and NAG colleagues for a number of useful discussions on heterogeneous computing and their valuable input to this paper.
Reference: [19] <author> SunSoft. </author> <title> The XDR Protocol Specification. Appendix A of "Network Interfaces Pro grammer's Guide". SunSoft, </title> <booktitle> 1993. </booktitle> <pages> 14 </pages>
Reference-contexts: We refer to machines conforming to this standard as IEEE machines 3 . Thus, when we communicate floating point numbers between IEEE machines we might hope that each processor has the same value. This is a reasonable hope and will often be realized. For example, XDR (External Data Representation, <ref> [19] </ref>) uses the IEEE representation for floating point numbers and so a message passing system that uses XDR will communicate floating point numbers without change 4 . PVM is an example of a system that uses XDR.
References-found: 19

