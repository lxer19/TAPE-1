URL: http://www.robotics.stanford.edu/~koller/papers/stoc92.ps
Refering-URL: http://www.robotics.stanford.edu/~koller/papers/stoc92.html
Root-URL: http://www.robotics.stanford.edu
Email: email: grove@cs.stanford.edu  email: halpern@almaden.ibm.com  email: daphne@cs.stanford.edu  
Title: Asymptotic Conditional Probabilities for First-Order Logic  
Author: Adam J. Grove Joseph Y. Halpern Daphne Koller 
Note: Research sponsored in part by the Air Force Office of Scientific Research (AFSC), under Contract F49620-91-C-0080. The United States Government is authorized to reproduce and distribute reprints for governmental purposes. The first author was also supported by an IBM Graduate Fellowship. (Paste copyright notice here.)  
Address: Stanford, CA 94305  San Jose, CA 95120  Stanford, CA 94305  
Affiliation: Stanford University  IBM Almaden Research Center  Stanford University  
Abstract: Motivated by problems that arise in computing degrees of belief, we consider the problem of computing asymptotic conditional probabilities for first-order formulas. That is, given first-order formulas ' and , we consider the number of structures with domain f1; : : :; N g that satisfy , and compute the fraction of them in which ' is true. We then consider what happens to this probability as N gets large. This is closely connected to the work on 0-1 laws that considers the limiting probability of first-order formulas, except that now we are considering asymptotic conditional probabilities. Although work has been done on special cases of asymptotic conditional probabilities, no general theory has been developed. This is probably due in part to the fact that it has been known that, if there is a binary predicate symbol in the vocabulary, asymptotic conditional probabilities do not always exist. We show that in this general case, almost all the questions one might want to ask (such as deciding whether the asymptotic probability exists) are highly undecidable. On the other hand, we show that the situation with unary predicates only is much better. If the vocabulary consists only of unary predicate and constant symbols, it is decidable whether the limit exists, and if it does, there is an effective algorithm for computing it. The complexity depends on two parameters: whether there is a fixed finite vocabulary or an infinite one, and whether there is a bound on the depth of quantifier nesting. 
Abstract-found: 1
Intro-found: 1
Reference: [BGHK92] <author> F. Bacchus, A. J. Grove, J. Y. Halpern, and D. Koller. </author> <title> From statistics to belief. </title> <booktitle> In Proc. National Conference on Artificial Intelligence (AAAI '92), </booktitle> <pages> pages 602-608, </pages> <year> 1992. </year>
Reference-contexts: In this paper, motivated by our use our own terminology for these methods, partly because we feel it is more descriptive, and partly because there are other variants of the approach that do not fit into the standard labeled/unlabeled structures dichotomy (see <ref> [BGHK92] </ref>) . desire to apply these methods to computing degrees of belief, we consider the general question of when asymptotic probabilities exist for first-order logic, and how to compute them if they do.
Reference: [Che83] <author> P. C. Cheeseman. </author> <title> A method of computing generalized Bayesian probability values for expert systems. </title> <booktitle> In Proc. Eighth International Joint Conference on Artificial Intelligence (IJCAI '83), </booktitle> <pages> pages 198-202, </pages> <year> 1983. </year>
Reference: [Com88] <author> K. Compton. </author> <title> 0-1 laws in logic and combinatorics. </title> <editor> In I. Rival, editor, </editor> <booktitle> Proc. 1987 NATO Adv. Study Inst. on algorithms and order, </booktitle> <pages> pages 353-383. </pages> <publisher> Reidel, </publisher> <address> Dordrecht, Nether-lands, </address> <year> 1988. </year>
Reference-contexts: Intuitively, this says that structures that are indistinguishable by the language should only be counted once. 1 1 The random-worlds method considers what has been called in the literature labeled structures, while the random-structures method considers unlabeled structures <ref> [Com88] </ref>. We choose to We often do not know the precise domain size N , but do know that it is large. Thus, we are particularly interested in knowing the asymptotic behavior of the degree of belief. <p> After the initial results, 0-1 laws were proved for special classes of first-order structures (such as graphs, tournaments, partial orders, etc.; see the overview paper <ref> [Com88] </ref> for details and further references). In many cases, the classes considered could be defined in terms of first-order constraints. Thus, these results can be viewed as special cases of the problem that we are interested in: computing asymptotic conditional probabilities relative to structures satisfying the constraints of a database. <p> In particular, the Cesaro limit satisfies these restrictions; therefore, even for Cesaro limits, the non-existence problem still arises. This result is stated formally, and proved, in the full paper. 5 We remark that Cesaro limits have been used before in the context of 0-1 laws; see Compton's overview <ref> [Com88] </ref> for details and further references. We remark that, with a little more work, we can also show that equality is not necessary to obtain the nonexistence of limits.
Reference: [DD85] <author> K. G. Denbigh and J. S. Denbigh. </author> <title> Entropy in Relation to Incomplete Knowledge. </title> <publisher> Cam-bridge University Press, </publisher> <address> Cambridge, UK, </address> <year> 1985. </year>
Reference-contexts: For example, in physics applications we are interested in such predicates as quantum state (see <ref> [DD85] </ref>). Similarly, AI applications and expert systems typically use only unary predicates ([Che83]) such as symptoms and diseases. In these examples, the vocabulary typically used is relatively small, and quantifiers are rarely deeply nested.
Reference: [DG79] <author> B. Dreben and W. D. Goldfarb. </author> <title> The Decision Problem: Solvable Classes of Quantifi-cational Formulas. </title> <publisher> Addison-Wesley, </publisher> <address> Reading, MA, </address> <year> 1979. </year>
Reference-contexts: This gap between unary predicates and binary predicates is somewhat reminiscent of the fact that first-order logic over a vocabulary with only unary predicates (and constant symbols) is decidable, while if we allow even a single binary predicate symbol, then it becomes undecidable <ref> [DG79, Lew79] </ref>. This similarity is not coincidental; some of the techniques used to show that first-order logic over a vocabulary with unary predicate symbols is decidable are used here to show that asymptotic limits exist. <p> In this section, we always take = P [ C unless we explicitly state otherwise. We want to compute the asymptotic conditional probability of formulas in the language L (). Our first step is to characterize the models of these formulas. It is well known <ref> [DG79] </ref>, that if a formula in L () is satisfiable at all, then it is satisfiable in a "small" model (one of size at most exponential in the size of the formula). We actually prove a somewhat stronger result from which this fact follows. We start with some definitions.
Reference: [Fag76] <author> R. Fagin. </author> <title> Probabilities on finite models. </title> <journal> Journal of Symbolic Logic, </journal> <volume> 41(1) </volume> <pages> 50-58, </pages> <year> 1976. </year>
Reference-contexts: For example, in the context of first-order formulas, it is well known that if we consider a formula with no constant or function symbols, then (for both methods) its asymptotic probability is either 0 or 1 <ref> [GKLT69, Fag76] </ref>. Moreover, it is known that both methods give the same asymptotic probability [Fag77]; as we shall see, this is not the case once we move to conditional probabilities. <p> Despite all this work on special cases, to the best of our knowledge there has been no work on the general problem of asymptotic conditional probabilities. Perhaps the main reason for this is that it is well known <ref> [Fag76] </ref> that we do not always get convergence of conditional probabilities. <p> This example, together with Proposition 2.1, also demonstrates that the values of conditional probabilities generally differ between the random-worlds method and the random-structures method. This is in contrast to the case for unconditional probabilities; Fagin <ref> [Fag76] </ref> showed that the random-worlds and random-structures methods give the same answers for unconditional probabilities, if we do not have constant or function symbols in the language. Example 2.3: Consider = fP g for a unary predicate P . <p> Proofs of all results can be found in the full paper. 3.1 Nonexistence As we mentioned in the introduction, the fact that asymptotic conditional probabilities do not always exist is well known. Theorem 3.1: <ref> [Fag76] </ref> Let S be a binary predicate symbol. There exist formulas '; 2 L (S) such that neither 23Pr w 1 ('j) exists, although both are well-defined. The proof of this theorem is quite straightforward.
Reference: [Fag77] <author> R. Fagin. </author> <title> The number of finite relational structures. </title> <journal> Discrete Mathematics, </journal> <volume> 19 </volume> <pages> 17-21, </pages> <year> 1977. </year>
Reference-contexts: Moreover, it is known that both methods give the same asymptotic probability <ref> [Fag77] </ref>; as we shall see, this is not the case once we move to conditional probabilities. After the initial results, 0-1 laws were proved for special classes of first-order structures (such as graphs, tournaments, partial orders, etc.; see the overview paper [Com88] for details and further references).
Reference: [GHK92] <author> A. J. Grove, J. Y. Halpern, and D. Koller. </author> <title> Random worlds and maximum entropy. </title> <booktitle> In Proc. 7th IEEE Symp. on Logic in Computer Science, </booktitle> <pages> pages 22-33, </pages> <year> 1992. </year>
Reference-contexts: Since the issues that arise with statistical assertions are significantly different from those that arise with first-order assertions, in this paper we restrict attention to the pure first-order case; in a companion paper <ref> [GHK92] </ref> we consider the case of statistical assertions. To readers familiar with the work on asymptotic probabilities for various logics, our questions will seem quite familiar. <p> There are well-known results from physics that show the close connection between the random-worlds method and maximum entropy [Jay78]; some formalization of similar results, but in a framework that is close to that of the current paper, can be found in <ref> [PV89, GHK92] </ref>. <p> In order to simplify the presentation, we begin by assuming that is finite; the case of an infinite vocabulary is deferred to Section 2.3. 3 These results are of far more interest when there are statistical assertions in the language, so we do not discuss them here (see <ref> [PV89, GHK92] </ref> for more details).
Reference: [GJ79] <author> M. Garey and D. S. Johnson. </author> <title> Computers and Intractability: A Guide to the Theory of NP-completeness. </title> <publisher> W. Freeman and Co., </publisher> <address> San Francisco, CA, </address> <year> 1979. </year>
Reference-contexts: The function we are interested in is Pr w 1 ('j), which is not integer valued. Nevertheless, we want to show that it is in #EXP. In the spirit of similar definitions for #P (see, for example, [Val79b, PB83]) and NP (e.g., <ref> [GJ79] </ref>) we extend the definition of #EXP to apply also to non-integer valued functions.
Reference: [GKLT69] <author> Y. V. Glebski, D. I. Kogan, M. I. Liogon'ki, and V. A. Talanov. </author> <title> Range and degree of re-alizability of formulas in the restricted predicate calculus. </title> <journal> Kibernetika, </journal> <volume> 2 </volume> <pages> 17-28, </pages> <year> 1969. </year>
Reference-contexts: For example, in the context of first-order formulas, it is well known that if we consider a formula with no constant or function symbols, then (for both methods) its asymptotic probability is either 0 or 1 <ref> [GKLT69, Fag76] </ref>. Moreover, it is known that both methods give the same asymptotic probability [Fag77]; as we shall see, this is not the case once we move to conditional probabilities.
Reference: [Jay78] <author> E. T. Jaynes. </author> <title> Where do we stand on maximum entropy? In R. </title> <editor> D. Levine and M. Tribus, editors, </editor> <booktitle> The Maximum Entropy Formalism, </booktitle> <pages> pages 15-118. </pages> <publisher> MIT Press, </publisher> <address> Cam-bridge, MA, </address> <year> 1978. </year>
Reference-contexts: We have already mentioned its relevance to computing degrees of belief. There are well-known results from physics that show the close connection between the random-worlds method and maximum entropy <ref> [Jay78] </ref>; some formalization of similar results, but in a framework that is close to that of the current paper, can be found in [PV89, GHK92].
Reference: [Key21] <author> J. M. </author> <title> Keynes. A Treatise on Probability. </title> <publisher> Macmillan, </publisher> <address> London, </address> <year> 1921. </year>
Reference-contexts: The approach is an old one, going back to Laplace [Lap20]. It is essentially what has been called the principle of insufficient reason [Kri86] or the principle of indifference <ref> [Key21] </ref>. The idea is to assign equal degree of belief to all basic "situations" consistent with the known facts. We consider two embodiments of this principle, which we call the random-worlds method and the random-structures method ; they differ in how the idea of "situation" is interpreted.
Reference: [Kri86] <author> J. von Kries. </author> <title> Die Principien der Wahrscheinlichkeitsrechnung und Rational Expectation. </title> <type> Freiburg, 1886. </type>
Reference-contexts: In this paper we investigate the properties of two formalisms for computing degrees of belief, based on the same general approach. The approach is an old one, going back to Laplace [Lap20]. It is essentially what has been called the principle of insufficient reason <ref> [Kri86] </ref> or the principle of indifference [Key21]. The idea is to assign equal degree of belief to all basic "situations" consistent with the known facts.
Reference: [Lap20] <author> P. S. </author> <title> de Laplace. Essai Philosophique sur les Probabilites. 1820. English translation is Philosophical Essay on Probabilities, </title> <publisher> Dover Publications, </publisher> <address> New York, </address> <year> 1951. </year>
Reference-contexts: In this paper we investigate the properties of two formalisms for computing degrees of belief, based on the same general approach. The approach is an old one, going back to Laplace <ref> [Lap20] </ref>. It is essentially what has been called the principle of insufficient reason [Kri86] or the principle of indifference [Key21]. The idea is to assign equal degree of belief to all basic "situations" consistent with the known facts.
Reference: [Lew79] <author> H. R. Lewis. </author> <title> Unsolvable Classes of Quan--tificational Formulas. </title> <publisher> Addison-Wesley, </publisher> <address> New York, </address> <year> 1979. </year>
Reference-contexts: This gap between unary predicates and binary predicates is somewhat reminiscent of the fact that first-order logic over a vocabulary with only unary predicates (and constant symbols) is decidable, while if we allow even a single binary predicate symbol, then it becomes undecidable <ref> [DG79, Lew79] </ref>. This similarity is not coincidental; some of the techniques used to show that first-order logic over a vocabulary with unary predicate symbols is decidable are used here to show that asymptotic limits exist.
Reference: [Lew80] <author> H. R. Lewis. </author> <title> Complexity results for classes of quantificational formulas. </title> <journal> Journal of Computer and System Sciences, </journal> <volume> 21 </volume> <pages> 317-353, </pages> <year> 1980. </year>
Reference-contexts: From this number we can easily calculate the asymptotic conditional probability, using the formula in Theorem 4.9. We leave details to the full paper. For the lower bound, we use a result due to Lewis <ref> [Lew80] </ref>; he shows that the satisfiability problem for L (Q) is complete for NEXPTIME.
Reference: [Lyn80] <author> J. Lynch. </author> <title> Almost sure theories. </title> <journal> Annals of Mathematical Logic, </journal> <volume> 18 </volume> <pages> 91-135, </pages> <year> 1980. </year>
Reference-contexts: In many cases, the classes considered could be defined in terms of first-order constraints. Thus, these results can be viewed as special cases of the problem that we are interested in: computing asymptotic conditional probabilities relative to structures satisfying the constraints of a database. Lynch <ref> [Lyn80] </ref> showed that, for the random-worlds method, asymptotic limits exist for first-order formulas involving unary functions, although there is no 0-1 law. (Recall that the original 0-1 result is specifically for first-order logic without function symbols.) This can also be viewed as a special case of a conditional asymptotic probability for
Reference: [MP92] <author> Z. Manna and A. Pnueli. </author> <title> The Temporal Logic of Reactive and Concurrent Systems, volume 1. </title> <publisher> Springer-Verlag, </publisher> <address> Berlin/New York, </address> <year> 1992. </year>
Reference-contexts: Thus, we actually consider two notions: the persistent limit, denoted 32Pr w 1 ('j), and the intermittent limit, denoted 23Pr w 1 ('j) (the prefixes stand for the temporal logic representation of the persistence and intermittence properties <ref> [MP92] </ref>). In either case, we say that the limiting probability is either not well-defined, does not exist, or is some fraction between 0 or 1. The only difference between the two notions lies in when the limiting probability is taken to be well-defined.
Reference: [PB83] <author> S. J. Provan and M. O. Ball. </author> <title> The complexity of counting cuts and of computing the probability that a graph is connected. </title> <journal> SIAM Journal on Computing, </journal> <volume> 12 </volume> <pages> 777-788, </pages> <year> 1983. </year>
Reference-contexts: The function we are interested in is Pr w 1 ('j), which is not integer valued. Nevertheless, we want to show that it is in #EXP. In the spirit of similar definitions for #P (see, for example, <ref> [Val79b, PB83] </ref>) and NP (e.g., [GJ79]) we extend the definition of #EXP to apply also to non-integer valued functions.
Reference: [PS72] <author> R. E. Powell and S. M. Shah. </author> <title> Summabil-ity Theory and Applications. </title> <publisher> Van Nostrand Reinhold, </publisher> <year> 1972. </year>
Reference-contexts: Unfortunately, we can show that for any definition of limit satisfying some very basic restrictions (see <ref> [PS72] </ref> for some definitions), the limit of the conditional probabilities may not exist.
Reference: [PV89] <author> J. B. Paris and A. Vencovska. </author> <title> On the applicability of maximum entropy to inexact reasoning. </title> <journal> International Journal of Approximate Reasoning, </journal> <volume> 3 </volume> <pages> 1-34, </pages> <year> 1989. </year>
Reference-contexts: There are well-known results from physics that show the close connection between the random-worlds method and maximum entropy [Jay78]; some formalization of similar results, but in a framework that is close to that of the current paper, can be found in <ref> [PV89, GHK92] </ref>. <p> In order to simplify the presentation, we begin by assuming that is finite; the case of an infinite vocabulary is deferred to Section 2.3. 3 These results are of far more interest when there are statistical assertions in the language, so we do not discuss them here (see <ref> [PV89, GHK92] </ref> for more details).
Reference: [Rog67] <author> H. Rogers, Jr. </author> <title> Theory of Recursive Functions and Effective Computability. </title> <publisher> McGraw-Hill, </publisher> <address> New York, </address> <year> 1967. </year>
Reference-contexts: We analyze the complexity of these problems in terms of the arithmetic hierarchy. This is a hierarchy that extends the notions of r.e. (recursively enumerable) and co-r.e. sets. We briefly review the relevant definitions here, referring the reader to <ref> [Rog67] </ref> for further details. Consider a formula ~ in the language of arithmetic (i.e., using 0; 1; +; fi) having k free variables. The formula ~, interpreted over the natural numbers, is said to define a recursive set if the set of k-tuples satisfying the formula is a recursive set.
Reference: [Val79a] <author> L. G. Valiant. </author> <title> The complexity of computing the permanent. </title> <journal> Theoretical Computer Science, </journal> <volume> 8 </volume> <pages> 189-201, </pages> <year> 1979. </year>
Reference-contexts: For example, with an infinite vocabulary and unbounded quantification, checking whether the limit exists is NEXPTIME-complete, while the problem of computing the probability if it is exists is essentially #EXP-complete (where #EXP is the exponential time analogue of #P <ref> [Val79a] </ref>). Somewhat surprisingly in light of our other results, these results hold even if we restrict to formulas of quantification depth two. <p> The NEXPTIME lower bound holds even if Q and for sentences in L 2 (). We next consider the problem of computing the asymptotic probability Pr w 1 ('j), given that it is well-defined. We show that this problem is #EXP-complete. Recall that #P (see <ref> [Val79a] </ref>) is the class of integer functions computable as the number of accepting computations of a nondeterministic polynomial-time Turing machine. The class #EXP is the exponential time analogue.
Reference: [Val79b] <author> L. G. Valiant. </author> <title> The complexity of enumeration and reliability problems. </title> <journal> SIAM Journal on Computing, </journal> <volume> 8 </volume> <pages> 410-421, </pages> <year> 1979. </year>
Reference-contexts: The function we are interested in is Pr w 1 ('j), which is not integer valued. Nevertheless, we want to show that it is in #EXP. In the spirit of similar definitions for #P (see, for example, <ref> [Val79b, PB83] </ref>) and NP (e.g., [GJ79]) we extend the definition of #EXP to apply also to non-integer valued functions.
References-found: 24

